<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Algorithm Transparency Lens</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/compromise"></script>
    <style>
        :root {
            --primary: #6366f1;
            --primary-dark: #4f46e5;
            --secondary: #6b7280;
            --dark: #1f2937;
            --light: #f9fafb;
            --lighter: #f3f4f6;
            --success: #10b981;
            --warning: #f59e0b;
            --danger: #ef4444;
            --info: #3b82f6;
            --engagement: #ec4899;
            --profit: #f59e0b;
            --political: #8b5cf6;
            --neutral: #10b981;
            --border: #e5e7eb;
            --card-bg: rgba(255, 255, 255, 0.9);
            --header-bg: linear-gradient(135deg, #6366f1 0%, #8b5cf6 100%);
            --text-primary: #1f2937;
            --text-secondary: #6b7280;
        }

        .dark-mode {
            --primary: #818cf8;
            --primary-dark: #6366f1;
            --secondary: #9ca3af;
            --dark: #f3f4f6;
            --light: #1f2937;
            --lighter: #111827;
            --card-bg: rgba(31, 41, 55, 0.9);
            --header-bg: linear-gradient(135deg, #4f46e5 0%, #7c3aed 100%);
            --text-primary: #f9fafb;
            --text-secondary: #d1d5db;
            --border: #374151;
        }

        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: 'Inter', 'Segoe UI', system-ui, -apple-system, sans-serif;
        }

        body {
            background: var(--lighter);
            color: var(--text-primary);
            line-height: 1.6;
            min-height: 100vh;
            padding: 0;
            transition: background 0.3s ease, color 0.3s ease;
        }

        .container {
            max-width: 1400px;
            margin: 0 auto;
            padding: 20px;
        }

        header {
            text-align: center;
            margin-bottom: 30px;
            padding: 30px;
            background: var(--header-bg);
            color: white;
            border-radius: 20px;
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.2);
            position: relative;
            overflow: hidden;
        }

        header::before {
            content: "";
            position: absolute;
            top: -50%;
            left: -50%;
            width: 200%;
            height: 200%;
            background: radial-gradient(circle, rgba(255,255,255,0.1) 0%, rgba(255,255,255,0) 60%);
            transform: rotate(30deg);
        }

        h1 {
            font-size: 2.8rem;
            margin-bottom: 15px;
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 20px;
            font-weight: 800;
            text-shadow: 0 2px 4px rgba(0,0,0,0.2);
        }

        .tagline {
            font-size: 1.2rem;
            opacity: 0.9;
            max-width: 700px;
            margin: 0 auto;
            font-weight: 300;
        }

        .main-content {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 30px;
            margin-bottom: 40px;
        }

        @media (max-width: 992px) {
            .main-content {
                grid-template-columns: 1fr;
            }
        }

        .card {
            background: var(--card-bg);
            border-radius: 20px;
            box-shadow: 0 10px 25px -5px rgba(0, 0, 0, 0.1);
            padding: 30px;
            height: 100%;
            transition: transform 0.3s ease, box-shadow 0.3s ease;
            position: relative;
            overflow: hidden;
            backdrop-filter: blur(10px);
        }

        .card::before {
            content: "";
            position: absolute;
            top: 0;
            left: 0;
            width: 5px;
            height: 100%;
            background: var(--header-bg);
        }

        .card:hover {
            transform: translateY(-5px);
            box-shadow: 0 15px 30px -5px rgba(0, 0, 0, 0.15);
        }

        .card-header {
            font-weight: 700;
            margin-bottom: 20px;
            color: var(--text-primary);
            font-size: 1.5rem;
            padding-bottom: 15px;
            border-bottom: 2px solid var(--border);
            display: flex;
            align-items: center;
            gap: 12px;
        }

        textarea {
            width: 100%;
            min-height: 220px;
            padding: 20px;
            border: 2px solid var(--border);
            border-radius: 15px;
            resize: vertical;
            font-size: 16px;
            margin-bottom: 20px;
            transition: all 0.3s;
            line-height: 1.6;
            background: var(--lighter);
            color: var(--text-primary);
        }

        textarea:focus {
            outline: none;
            border-color: var(--primary);
            box-shadow: 0 0 0 3px rgba(99, 102, 241, 0.1);
        }

        .button-group {
            display: grid;
            grid-template-columns: repeat(2, 1fr);
            gap: 16px;
            margin-bottom: 25px;
        }

        @media (max-width: 576px) {
            .button-group {
                grid-template-columns: 1fr;
            }
        }

        button {
            padding: 16px 20px;
            border: none;
            border-radius: 12px;
            cursor: pointer;
            font-weight: 600;
            transition: all 0.3s ease;
            font-size: 16px;
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 12px;
            position: relative;
            overflow: hidden;
        }

        button::before {
            content: "";
            position: absolute;
            top: 0;
            left: -100%;
            width: 100%;
            height: 100%;
            background: linear-gradient(90deg, transparent, rgba(255,255,255,0.2), transparent);
            transition: all 0.5s ease;
        }

        button:hover::before {
            left: 100%;
        }

        button:hover {
            transform: translateY(-3px);
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.2);
        }

        #engagement-btn {
            background: linear-gradient(to right, var(--engagement), #db2777);
            color: white;
        }

        #profit-btn {
            background: linear-gradient(to right, var(--profit), #d97706);
            color: white;
        }

        #political-btn {
            background: linear-gradient(to right, var(--political), #7c3aed);
            color: white;
        }

        #neutral-btn {
            background: linear-gradient(to right, var(--neutral), #059669);
            color: white;
        }

        .metrics {
            display: grid;
            grid-template-columns: repeat(2, 1fr);
            gap: 16px;
            margin-top: 20px;
        }

        .metric {
            background: var(--lighter);
            padding: 18px;
            border-radius: 15px;
            text-align: center;
            box-shadow: 0 4px 6px rgba(0, 0, 0, 0.05);
            transition: all 0.3s ease;
        }

        .metric:hover {
            transform: translateY(-3px);
        }

        .metric-value {
            font-size: 2rem;
            font-weight: 800;
            margin: 10px 0;
            background: var(--header-bg);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
        }

        .metric-label {
            font-size: 0.9rem;
            color: var(--text-secondary);
            font-weight: 500;
        }

        .panel-content {
            min-height: 320px;
            padding: 20px;
            line-height: 1.8;
            border: 2px solid var(--border);
            border-radius: 15px;
            overflow-y: auto;
            max-height: 500px;
            font-size: 16px;
            background: var(--lighter);
        }

        .manipulative {
            background-color: rgba(236, 72, 153, 0.15);
            border-bottom: 2px solid var(--engagement);
            padding: 0 4px;
            font-weight: 600;
            border-radius: 3px;
        }

        .political {
            background-color: rgba(139, 92, 246, 0.15);
            border-bottom: 2px solid var(--political);
            padding: 0 4px;
            font-weight: 600;
            border-radius: 3px;
        }

        .neutral {
            background-color: rgba(16, 185, 129, 0.15);
            border-bottom: 2px solid var(--neutral);
            padding: 0 4px;
            font-weight: 600;
            border-radius: 3px;
        }

        .ad-highlight {
            background-color: rgba(245, 158, 11, 0.15);
            border-bottom: 2px dashed var(--profit);
            padding: 0 4px;
            font-style: italic;
            border-radius: 3px;
        }

        footer {
            text-align: center;
            padding: 30px;
            color: var(--text-secondary);
            font-size: 16px;
            margin-top: 30px;
            background: var(--card-bg);
            border-radius: 20px;
            box-shadow: 0 4px 6px rgba(0, 0, 0, 0.05);
        }

        .tabs {
            display: flex;
            gap: 10px;
            margin-bottom: 20px;
            border-bottom: 2px solid var(--border);
            padding-bottom: 15px;
        }

        .tab {
            padding: 12px 24px;
            background: var(--lighter);
            border-radius: 10px;
            cursor: pointer;
            transition: all 0.3s;
            font-weight: 500;
        }

        .tab.active {
            background: var(--primary);
            color: white;
        }

        .tab-content {
            display: none;
            animation: fadeIn 0.5s ease;
        }

        @keyframes fadeIn {
            from { opacity: 0; }
            to { opacity: 1; }
        }

        .tab-content.active {
            display: block;
        }

        .analysis-result {
            margin-top: 20px;
            padding: 20px;
            background: var(--lighter);
            border-radius: 15px;
            box-shadow: 0 4px 6px rgba(0, 0, 0, 0.05);
        }

        .bias-indicator {
            height: 12px;
            background: var(--border);
            border-radius: 6px;
            margin: 12px 0;
            overflow: hidden;
        }

        .bias-value {
            height: 100%;
            border-radius: 6px;
            transition: width 1s ease;
        }

        .engagement-bias {
            background: var(--engagement);
        }

        .profit-bias {
            background: var(--profit);
        }

        .political-bias {
            background: var(--political);
        }

        .tooltip {
            position: relative;
            display: inline-block;
            cursor: help;
        }

        .tooltip .tooltiptext {
            visibility: hidden;
            width: 220px;
            background-color: var(--dark);
            color: #fff;
            text-align: center;
            border-radius: 6px;
            padding: 10px;
            position: absolute;
            z-index: 1;
            bottom: 125%;
            left: 50%;
            margin-left: -110px;
            opacity: 0;
            transition: opacity 0.3s;
            font-size: 14px;
            font-weight: normal;
        }

        .tooltip:hover .tooltiptext {
            visibility: visible;
            opacity: 1;
        }

        .stats-container {
            display: grid;
            grid-template-columns: repeat(3, 1fr);
            gap: 15px;
            margin-top: 20px;
        }

        .stat {
            text-align: center;
            padding: 15px;
            background: var(--lighter);
            border-radius: 15px;
            box-shadow: 0 4px 6px rgba(0, 0, 0, 0.05);
            transition: all 0.3s ease;
        }

        .stat:hover {
            transform: translateY(-3px);
        }

        .stat-value {
            font-size: 1.8rem;
            font-weight: 700;
            color: var(--primary);
            margin: 10px 0;
        }

        .stat-label {
            font-size: 0.9rem;
            color: var(--text-secondary);
        }

        .logo {
            font-size: 2.5rem;
            background: var(--header-bg);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            margin-bottom: 10px;
        }

        .powered-by {
            font-size: 0.9rem;
            color: var(--text-secondary);
            margin-top: 10px;
        }

        .word-count {
            font-size: 0.9rem;
            color: var(--text-secondary);
            margin-top: 10px;
        }
        
        .loading {
            display: inline-block;
            width: 20px;
            height: 20px;
            border: 3px solid rgba(255,255,255,.3);
            border-radius: 50%;
            border-top-color: #fff;
            animation: spin 1s ease-in-out infinite;
        }
        
        @keyframes spin {
            to { transform: rotate(360deg); }
        }
        
        .analysis-detail {
            margin-top: 15px;
            padding: 15px;
            background: var(--card-bg);
            border-radius: 15px;
            box-shadow: 0 4px 6px rgba(0, 0, 0, 0.05);
        }
        
        .action-buttons {
            display: flex;
            gap: 12px;
            margin-top: 20px;
        }
        
        .action-btn {
            padding: 14px;
            border-radius: 12px;
            background: var(--lighter);
            border: none;
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 10px;
            font-weight: 500;
            flex: 1;
            transition: all 0.3s ease;
            box-shadow: 0 4px 6px rgba(0, 0, 0, 0.05);
        }
        
        .action-btn:hover {
            transform: translateY(-3px);
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.1);
        }
        
        .action-btn.primary {
            background: var(--primary);
            color: white;
        }

        .platform-selector {
            display: flex;
            gap: 10px;
            margin-bottom: 20px;
            overflow-x: auto;
            padding-bottom: 10px;
        }

        .platform-btn {
            padding: 10px 15px;
            background: var(--lighter);
            border: 2px solid var(--border);
            border-radius: 10px;
            cursor: pointer;
            transition: all 0.3s ease;
            flex-shrink: 0;
            font-weight: 500;
        }

        .platform-btn.active {
            background: var(--primary);
            color: white;
            border-color: var(--primary);
        }

        .chart-container {
            width: 100%;
            height: 300px;
            margin: 20px 0;
        }

        .ai-insight {
            background: var(--header-bg);
            color: white;
            padding: 20px;
            border-radius: 15px;
            margin-top: 20px;
            position: relative;
            overflow: hidden;
        }

        .ai-insight::before {
            content: "";
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 100 100' width='100' height='100'%3E%3Ccircle cx='50' cy='50' r='40' fill='none' stroke='white' stroke-width='0.5' stroke-dasharray='5,5'/%3E%3C/svg%3E");
            opacity: 0.1;
        }

        .comparison-view {
            display: grid;
            grid-template-columns: 1fr;
            gap: 20px;
            margin-top: 20px;
        }

        @media (min-width: 768px) {
            .comparison-view {
                grid-template-columns: 1fr 1fr;
            }
        }

        .comparison-card {
            background: var(--card-bg);
            padding: 20px;
            border-radius: 15px;
            box-shadow: 0 4px 6px rgba(0, 0, 0, 0.05);
        }

        .timeline {
            display: flex;
            flex-direction: column;
            gap: 15px;
            margin-top: 20px;
        }

        .timeline-item {
            display: flex;
            gap: 15px;
        }

        .timeline-dot {
            width: 20px;
            height: 20px;
            background: var(--primary);
            border-radius: 50%;
            flex-shrink: 0;
            margin-top: 5px;
        }

        .timeline-content {
            background: var(--lighter);
            padding: 15px;
            border-radius: 10px;
            flex: 1;
            box-shadow: 0 4px 6px rgba(0, 0, 0, 0.05);
        }

        .theme-toggle {
            position: absolute;
            top: 20px;
            right: 20px;
            background: rgba(255, 255, 255, 0.2);
            color: white;
            border: none;
            border-radius: 50%;
            width: 40px;
            height: 40px;
            display: flex;
            align-items: center;
            justify-content: center;
            cursor: pointer;
            backdrop-filter: blur(10px);
        }

        .innovation-badge {
            position: absolute;
            top: 20px;
            left: 20px;
            background: rgba(255, 255, 255, 0.2);
            color: white;
            padding: 8px 16px;
            border-radius: 20px;
            font-size: 0.9rem;
            font-weight: 600;
            backdrop-filter: blur(10px);
        }

        .highlight {
            background-color: rgba(255, 255, 0, 0.3);
            padding: 2px 0;
            border-radius: 3px;
        }

        .suggestion {
            background-color: rgba(16, 185, 129, 0.15);
            padding: 15px;
            border-radius: 10px;
            margin: 10px 0;
            border-left: 4px solid var(--success);
        }
    </style>
</head>
<body>
    <div class="container">
        <header>
            <div class="logo">
                <i class="fas fa-brain"></i>
            </div>
            <h1>Algorithm Transparency Lens</h1>
            <p class="tagline">Advanced analysis of algorithmic content manipulation across platforms</p>
            <button class="theme-toggle" id="theme-toggle">
                <i class="fas fa-moon"></i>
            </button>
            <div class="innovation-badge">ADVANCED NLP ANALYSIS</div>
        </header>
        
        <div class="main-content">
            <div class="card">
                <div class="card-header">
                    <i class="fas fa-pencil-alt"></i> Input Text
                </div>
                <textarea id="input-text" placeholder="Paste or type any text here to analyze...">Social media platforms have revolutionized how people communicate and access information. These platforms use sophisticated algorithms to curate content for users. While this can help people discover relevant information, it also creates filter bubbles and can amplify extreme content. Many experts are concerned about the societal impact of these algorithms and their effect on public discourse.</textarea>
                
                <div class="platform-selector">
                    <div class="platform-btn active" data-platform="all">All Platforms</div>
                    <div class="platform-btn" data-platform="facebook">Facebook</div>
                    <div class="platform-btn" data-platform="youtube">YouTube</div>
                    <div class="platform-btn" data-platform="twitter">Twitter</div>
                    <div class="platform-btn" data-platform="instagram">Instagram</div>
                </div>
                
                <div class="button-group">
                    <button id="engagement-btn">
                        <i class="fas fa-fire"></i> Engagement
                    </button>
                    <button id="profit-btn">
                        <i class="fas fa-dollar-sign"></i> Profit
                    </button>
                    <button id="political-btn">
                        <i class="fas fa-landmark"></i> Political
                    </button>
                    <button id="neutral-btn">
                        <i class="fas fa-balance-scale"></i> Neutral
                    </button>
                </div>
                
                <div class="metrics">
                    <div class="metric">
                        <div class="metric-label">Manipulation Score</div>
                        <div class="metric-value" id="manipulation-score">0%</div>
                    </div>
                    <div class="metric">
                        <div class="metric-label">Bias Detected</div>
                        <div class="metric-value" id="bias-level">None</div>
                    </div>
                    <div class="metric">
                        <div class="metric-label">Emotional Language</div>
                        <div class="metric-value" id="emotional-score">0%</div>
                    </div>
                    <div class="metric">
                        <div class="metric-label">Ad Density</div>
                        <div class="metric-value" id="ad-density">0%</div>
                    </div>
                </div>
                
                <div class="word-count" id="word-count">Words: 0 | Characters: 0</div>
                
                <div class="action-buttons">
                    <button class="action-btn" id="clear-btn">
                        <i class="fas fa-trash"></i> Clear
                    </button>
                    <button class="action-btn primary" id="analyze-btn">
                        <i class="fas fa-chart-line"></i> Analyze
                    </button>
                    <button class="action-btn" id="export-btn">
                        <i class="fas fa-download"></i> Export
                    </button>
                </div>
            </div>
            
            <div class="card">
                <div class="card-header">
                    <i class="fas fa-code"></i> Algorithmic Output
                </div>
                
                <div class="tabs">
                    <div class="tab active" data-tab="output">Output</div>
                    <div class="tab" data-tab="analysis">Analysis</div>
                    <div class="tab" data-tab="comparison">Comparison</div>
                    <div class="tab" data-tab="timeline">Timeline</div>
                </div>
                
                <div class="tab-content active" id="output-tab">
                    <div id="output-text" class="panel-content">
                        <p>Output will appear here after analysis...</p>
                    </div>
                    
                    <div class="action-buttons">
                        <button class="action-btn" id="copy-btn">
                            <i class="fas fa-copy"></i> Copy
                        </button>
                        <button class="action-btn" id="share-btn">
                            <i class="fas fa-share-alt"></i> Share
                        </button>
                    </div>
                </div>
                
                <div class="tab-content" id="analysis-tab">
                    <div class="panel-content">
                        <h3>Deep Text Analysis</h3>
                        <p id="analysis-summary">No analysis performed yet. Select a bias type to analyze your text.</p>
                        
                        <div class="stats-container">
                            <div class="stat">
                                <div class="stat-value" id="emotional-impact">0%</div>
                                <div class="stat-label">Emotional Impact</div>
                            </div>
                            <div class="stat">
                                <div class="stat-value" id="ad-content">0%</div>
                                <div class="stat-label">Ad Content</div>
                            </div>
                            <div class="stat">
                                <div class="stat-value" id="persuasion-score">0%</div>
                                <div class="stat-label">Persuasion Score</div>
                            </div>
                        </div>
                        
                        <div class="chart-container">
                            <canvas id="bias-chart"></canvas>
                        </div>
                        
                        <h4>Bias Indicators</h4>
                        <p>Engagement Bias: <span class="tooltip" id="engagement-bias-value">0%<span class="tooltiptext">Emotional language and sensationalism</span></span></p>
                        <div class="bias-indicator">
                            <div class="bias-value engagement-bias" id="engagement-bias-bar" style="width: 0%"></div>
                        </div>
                        
                        <p>Profit Bias: <span class="tooltip" id="profit-bias-value">0%<span class="tooltiptext">Commercial language and advertising cues</span></span></p>
                        <div class="bias-indicator">
                            <div class="bias-value profit-bias" id="profit-bias-bar" style="width: 0%"></div>
                        </div>
                        
                        <p>Political Bias: <span class="tooltip" id="political-bias-value">0%<span class="tooltiptext">Ideological framing and partisan language</span></span></p>
                        <div class="bias-indicator">
                            <div class="bias-value political-bias" id="political-bias-bar" style="width: 0%"></div>
                        </div>
                        
                        <div class="ai-insight">
                            <h4><i class="fas fa-robot"></i> AI Insight</h4>
                            <p id="ai-insight-text">Our proprietary AI will provide insights here after analysis.</p>
                        </div>

                        <div class="suggestion">
                            <h4><i class="fas fa-lightbulb"></i> Content Suggestions</h4>
                            <p id="suggestion-text">Analysis will provide suggestions for more balanced content.</p>
                        </div>
                    </div>
                </div>
                
                <div class="tab-content" id="comparison-tab">
                    <div class="panel-content">
                        <h3>Comparison with Original</h3>
                        <p id="comparison-summary">No comparison data available yet.</p>
                        
                        <div class="comparison-view">
                            <div class="comparison-card">
                                <h4>Original Content</h4>
                                <div id="original-text-comparison">Original text will appear here.</div>
                            </div>
                            <div class="comparison-card">
                                <h4>Algorithmically Modified</h4>
                                <div id="modified-text-comparison">Modified text will appear here.</div>
                            </div>
                        </div>
                        
                        <div class="analysis-detail">
                            <h4>Changes Detected</h4>
                            <ul id="changes-list">
                                <li>No changes detected yet</li>
                            </ul>
                        </div>
                        
                        <h4>Impact Assessment</h4>
                        <p id="impact-assessment">Submit text for analysis to see potential impacts.</p>
                    </div>
                </div>
                
                <div class="tab-content" id="timeline-tab">
                    <div class="panel-content">
                        <h3>Algorithmic Manipulation Timeline</h3>
                        <p>See how your content would be transformed over time by platform algorithms.</p>
                        
                        <div class="timeline">
                            <div class="timeline-item">
                                <div class="timeline-dot"></div>
                                <div class="timeline-content">
                                    <h4>Initial Content</h4>
                                    <p>Your original content before algorithmic processing.</p>
                                </div>
                            </div>
                            <div class="timeline-item">
                                <div class="timeline-dot"></div>
                                <div class="timeline-content">
                                    <h4>Engagement Optimization</h4>
                                    <p>Algorithm adds emotional triggers to increase interaction.</p>
                                </div>
                            </div>
                            <div class="timeline-item">
                                <div class="timeline-dot"></div>
                                <div class="timeline-content">
                                    <h4>Monetization Phase</h4>
                                    <p>Platform inserts promotional content for revenue generation.</p>
                                </div>
                            </div>
                            <div class="timeline-item">
                                <div class="timeline-dot"></div>
                                <div class="timeline-content">
                                    <h4>Algorithmic Distribution</h4>
                                    <p>Content is tailored for specific audience segments based on profiling.</p>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
        
        <div class="card">
            <div class="card-header">
                <i class="fas fa-microchip"></i> Algorithm Visualization
            </div>
            <div class="chart-container">
                <canvas id="algorithm-chart"></canvas>
            </div>
            <p>Visualization of how algorithms process and manipulate content across different platforms.</p>
        </div>
        
        <div class="card">
            <div class="card-header">
                <i class="fas fa-chart-line"></i> Impact Metrics
            </div>
            <div class="stats-container">
                <div class="stat">
                    <div class="stat-value" id="users-affected">0%</div>
                    <div class="stat-label">Users Affected</div>
                </div>
                <div class="stat">
                    <div class="stat-value" id="behavior-change">0%</div>
                    <div class="stat-label">Behavior Change</div>
                </div>
                <div class="stat">
                    <div class="stat-value" id="revenue-impact">0%</div>
                    <div class="stat-label">Revenue Impact</div>
                </div>
            </div>
            <p class="powered-by">Powered by advanced algorithmic analysis engine</p>
        </div>
        
        <footer>
            <p>Algorithm Transparency Lens - Awareness is power.</p>
            <p>This tool demonstrates how algorithms manipulate content for various purposes.</p>
        </footer>
    </div>

    <script>
        document.addEventListener('DOMContentLoaded', function() {
            // Initialize variables and elements
            const inputTextarea = document.getElementById('input-text');
            const outputTextDiv = document.getElementById('output-text');
            
            const engagementBtn = document.getElementById('engagement-btn');
            const profitBtn = document.getElementById('profit-btn');
            const politicalBtn = document.getElementById('political-btn');
            const neutralBtn = document.getElementById('neutral-btn');
            const clearBtn = document.getElementById('clear-btn');
            const analyzeBtn = document.getElementById('analyze-btn');
            const copyBtn = document.getElementById('copy-btn');
            const exportBtn = document.getElementById('export-btn');
            const shareBtn = document.getElementById('share-btn');
            const themeToggle = document.getElementById('theme-toggle');
            
            const tabs = document.querySelectorAll('.tab');
            const tabContents = document.querySelectorAll('.tab-content');
            const platformBtns = document.querySelectorAll('.platform-btn');
            
            let biasChart = null;
            let algorithmChart = null;
            
            // Initialize the charts
            initBiasChart();
            initAlgorithmChart();
            
            // Word count update
            function updateWordCount() {
                const text = inputTextarea.value;
                const wordCount = text.trim() ? text.trim().split(/\s+/).length : 0;
                const charCount = text.length;
                document.getElementById('word-count').textContent = `Words: ${wordCount} | Characters: ${charCount}`;
            }
            
            inputTextarea.addEventListener('input', updateWordCount);
            updateWordCount();
            
            // Theme toggle functionality
            themeToggle.addEventListener('click', function() {
                document.body.classList.toggle('dark-mode');
                if (document.body.classList.contains('dark-mode')) {
                    themeToggle.innerHTML = '<i class="fas fa-sun"></i>';
                } else {
                    themeToggle.innerHTML = '<i class="fas fa-moon"></i>';
                }
            });
            
            // Clear button functionality
            clearBtn.addEventListener('click', function() {
                inputTextarea.value = '';
                outputTextDiv.innerHTML = '<p>Output will appear here after analysis...</p>';
                updateWordCount();
                resetMetrics();
            });
            
            // Copy button functionality
            copyBtn.addEventListener('click', function() {
                const outputText = outputTextDiv.innerText;
                navigator.clipboard.writeText(outputText).then(() => {
                    const originalText = copyBtn.innerHTML;
                    copyBtn.innerHTML = '<i class="fas fa-check"></i> Copied!';
                    setTimeout(() => {
                        copyBtn.innerHTML = originalText;
                    }, 2000);
                });
            });
            
            // Export button functionality
            exportBtn.addEventListener('click', function() {
                const text = inputTextarea.value;
                const output = outputTextDiv.innerHTML;
                const analysisSummary = document.getElementById('analysis-summary').textContent;
                const manipulationScore = document.getElementById('manipulation-score').textContent;
                const biasLevel = document.getElementById('bias-level').textContent;
                const emotionalScore = document.getElementById('emotional-score').textContent;
                const adDensity = document.getElementById('ad-density').textContent;
                
                // Create a downloadable report
                const report = `
                    ALGORITHM TRANSPARENCY LENS REPORT
                    ==================================
                    
                    Original Text:
                    ${text}
                    
                    Algorithmic Output:
                    ${outputTextDiv.innerText}
                    
                    Analysis Results:
                    - Manipulation Score: ${manipulationScore}
                    - Bias Level: ${biasLevel}
                    - Emotional Language: ${emotionalScore}
                    - Ad Density: ${adDensity}
                    
                    Summary:
                    ${analysisSummary}
                    
                    Generated on: ${new Date().toLocaleString()}
                `;
                
                const blob = new Blob([report], { type: 'text/plain' });
                const url = URL.createObjectURL(blob);
                const a = document.createElement('a');
                a.href = url;
                a.download = 'algorithm-report.txt';
                document.body.appendChild(a);
                a.click();
                document.body.removeChild(a);
                URL.revokeObjectURL(url);
            });
            
            // Share button functionality
            shareBtn.addEventListener('click', function() {
                if (navigator.share) {
                    navigator.share({
                        title: 'Algorithm Transparency Analysis',
                        text: 'Check out this algorithm transparency analysis I created!',
                        url: window.location.href
                    })
                    .catch(error => {
                        console.log('Error sharing:', error);
                    });
                } else {
                    alert('Web Share API not supported in your browser. You can copy the URL to share.');
                }
            });
            
            // Quick analyze button
            analyzeBtn.addEventListener('click', function() {
                engagementBtn.click();
            });
            
            // Platform selector functionality
            platformBtns.forEach(btn => {
                btn.addEventListener('click', function() {
                    platformBtns.forEach(b => b.classList.remove('active'));
                    this.classList.add('active');
                    // Re-analyze with the selected platform
                    if (document.querySelector('.tab.active').getAttribute('data-tab') === 'output') {
                        const activeButton = document.querySelector('.button-group button:focus') || 
                                            document.querySelector('.button-group button:active') ||
                                            engagementBtn;
                        activeButton.click();
                    }
                });
            });
            
            // Reset metrics function
            function resetMetrics() {
                document.getElementById('manipulation-score').textContent = '0%';
                document.getElementById('bias-level').textContent = 'None';
                document.getElementById('emotional-score').textContent = '0%';
                document.getElementById('ad-density').textContent = '0%';
                
                document.getElementById('emotional-impact').textContent = '0%';
                document.getElementById('ad-content').textContent = '0%';
                document.getElementById('persuasion-score').textContent = '0%';
                
                document.getElementById('engagement-bias-value').textContent = '0%';
                document.getElementById('engagement-bias-bar').style.width = '0%';
                
                document.getElementById('profit-bias-value').textContent = '0%';
                document.getElementById('profit-bias-bar').style.width = '0%';
                
                document.getElementById('political-bias-value').textContent = '0%';
                document.getElementById('political-bias-bar').style.width = '0%';
                
                document.getElementById('users-affected').textContent = '0%';
                document.getElementById('behavior-change').textContent = '0%';
                document.getElementById('revenue-impact').textContent = '0%';
                
                document.getElementById('analysis-summary').textContent = 'No analysis performed yet. Select a bias type to analyze your text.';
                document.getElementById('comparison-summary').textContent = 'No comparison data available yet.';
                document.getElementById('impact-assessment').textContent = 'Submit text for analysis to see potential impacts.';
                document.getElementById('changes-list').innerHTML = '<li>No changes detected yet</li>';
                document.getElementById('ai-insight-text').textContent = 'Our proprietary AI will provide insights here after analysis.';
                document.getElementById('suggestion-text').textContent = 'Analysis will provide suggestions for more balanced content.';
                
                // Reset charts
                if (biasChart) {
                    biasChart.data.datasets[0].data = [0, 0, 0, 0, 0];
                    biasChart.update();
                }
                
                if (algorithmChart) {
                    algorithmChart.data.datasets.forEach(dataset => {
                        dataset.data = Array(7).fill(0);
                    });
                    algorithmChart.update();
                }
            }
            
            // Initialize bias chart
            function initBiasChart() {
                const ctx = document.getElementById('bias-chart').getContext('2d');
                biasChart = new Chart(ctx, {
                    type: 'radar',
                    data: {
                        labels: ['Engagement', 'Profit', 'Political', 'Emotional', 'Persuasion'],
                        datasets: [{
                            label: 'Bias Analysis',
                            data: [0, 0, 0, 0, 0],
                            backgroundColor: 'rgba(99, 102, 241, 0.2)',
                            borderColor: 'rgba(99, 102, 241, 1)',
                            pointBackgroundColor: 'rgba(99, 102, 241, 1)',
                            pointBorderColor: '#fff',
                            pointHoverBackgroundColor: '#fff',
                            pointHoverBorderColor: 'rgba(99, 102, 241, 1)'
                        }]
                    },
                    options: {
                        scales: {
                            r: {
                                angleLines: {
                                    display: true
                                },
                                suggestedMin: 0,
                                suggestedMax: 100
                            }
                        },
                        plugins: {
                            legend: {
                                position: 'top',
                            },
                            title: {
                                display: true,
                                text: 'Bias Distribution Analysis'
                            }
                        }
                    }
                });
            }
            
            // Initialize algorithm chart
            function initAlgorithmChart() {
                const ctx = document.getElementById('algorithm-chart').getContext('2d');
                algorithmChart = new Chart(ctx, {
                    type: 'line',
                    data: {
                        labels: ['Initial', 'Engagement', 'Monetization', 'Distribution', 'Amplification', 'Targeting', 'Results'],
                        datasets: [
                            {
                                label: 'Facebook',
                                data: [0, 0, 0, 0, 0, 0, 0],
                                borderColor: 'rgba(59, 89, 152, 1)',
                                backgroundColor: 'rgba(59, 89, 152, 0.1)',
                                tension: 0.4
                            },
                            {
                                label: 'YouTube',
                                data: [0, 0, 0, 0, 0, 0, 0],
                                borderColor: 'rgba(255, 0, 0, 1)',
                                backgroundColor: 'rgba(255, 0, 0, 0.1)',
                                tension: 0.4
                            },
                            {
                                label: 'Twitter',
                                data: [0, 0, 0, 0, 0, 0, 0],
                                borderColor: 'rgba(29, 161, 242, 1)',
                                backgroundColor: 'rgba(29, 161, 242, 0.1)',
                                tension: 0.4
                            }
                        ]
                    },
                    options: {
                        scales: {
                            y: {
                                beginAtZero: true,
                                max: 100
                            }
                        },
                        plugins: {
                            legend: {
                                position: 'top',
                            },
                            title: {
                                display: true,
                                text: 'Algorithmic Processing Across Platforms'
                            }
                        }
                    }
                });
            }
            
            // Update bias chart
            function updateBiasChart(engagement, profit, political, emotional, persuasion) {
                if (biasChart) {
                    biasChart.data.datasets[0].data = [engagement, profit, political, emotional, persuasion];
                    biasChart.update();
                }
            }
            
            // Update algorithm chart
            function updateAlgorithmChart() {
                if (algorithmChart) {
                    algorithmChart.data.datasets[0].data = [10, 65, 40, 80, 60, 45, 70];
                    algorithmChart.data.datasets[1].data = [10, 50, 70, 60, 75, 55, 65];
                    algorithmChart.data.datasets[2].data = [10, 75, 45, 70, 80, 60, 85];
                    algorithmChart.update();
                }
            }
            
            // Tab functionality
            tabs.forEach(tab => {
                tab.addEventListener('click', () => {
                    const tabId = tab.getAttribute('data-tab');
                    
                    // Remove active class from all tabs and contents
                    tabs.forEach(t => t.classList.remove('active'));
                    tabContents.forEach(c => c.classList.remove('active'));
                    
                    // Add active class to clicked tab and corresponding content
                    tab.classList.add('active');
                    document.getElementById(`${tabId}-tab`).classList.add('active');
                });
            });
            
            // Advanced text analysis functions using NLP
            function analyzeTextWithNLP(text) {
                const doc = window.nlp(text);
                
                // Sentiment analysis
                const positiveWords = ['good', 'great', 'excellent', 'amazing', 'wonderful', 'fantastic', 'perfect', 'best', 'love', 'like'];
                const negativeWords = ['bad', 'terrible', 'awful', 'horrible', 'worst', 'hate', 'dislike', 'problem', 'issue', 'concern'];
                
                let positiveCount = 0;
                let negativeCount = 0;
                
                positiveWords.forEach(word => {
                    const matches = doc.match(word);
                    positiveCount += matches.length;
                });
                
                negativeWords.forEach(word => {
                    const matches = doc.match(word);
                    negativeCount += matches.length;
                });
                
                const totalWords = doc.terms().out('array').length;
                const sentimentScore = ((positiveCount - negativeCount) / totalWords) * 100;
                
                // Emotional intensity
                const emotionalWords = [...positiveWords, ...negativeWords];
                let emotionalIntensity = 0;
                
                emotionalWords.forEach(word => {
                    const matches = doc.match(word);
                    emotionalIntensity += matches.length * 2;
                });
                
                emotionalIntensity = Math.min(100, (emotionalIntensity / totalWords) * 100);
                
                return {
                    sentiment: sentimentScore,
                    emotionalIntensity: emotionalIntensity,
                    positiveCount: positiveCount,
                    negativeCount: negativeCount,
                    totalWords: totalWords
                };
            }
            
            function detectBiases(text) {
                const doc = window.nlp(text);
                
                // Engagement bias detection
                const engagementPatterns = [
                    /(!{2,})/g, // Multiple exclamation marks
                    /([A-Z]{4,})/g, // ALL CAPS words
                    /(?:^|\s)(#\w+)/g, // Hashtags
                    /(?:^|\s)(@\w+)/g, // Mentions
                    /\b(?:shocking|secret|warning|alert|breaking|urgent|amazing|unbelievable|incredible)\b/gi // Sensational words
                ];
                
                // Profit bias detection
                const profitPatterns = [
                    /\b(?:buy|purchase|order|shop|deal|sale|discount|offer|limited|free|sponsored|ad|promotion|premium|exclusive)\b/gi,
                    /\$\d+/g, // Dollar amounts
                    /%\s*off/gi, // Percentage off
                    /(?:limited|time|only)\s*(?:time|offer|deal)/gi // Urgency cues
                ];
                
                // Political bias detection
                const politicalPatterns = [
                    /\b(?:left|right|liberal|conservative|democrat|republican|socialist|capitalist|woke|patriot|progressive|traditional)\b/gi,
                    /\b(?:agenda|narrative|elite|establishment|mainstream|radical|extremist|activist|movement|campaign)\b/gi,
                    /\b(?:freedom|liberty|justice|equity|rights|constitutional|values|family|nation|heritage)\b/gi
                ];
                
                let engagementScore = 0;
                let profitScore = 0;
                let politicalScore = 0;
                
                // Calculate scores based on pattern matches
                engagementPatterns.forEach(pattern => {
                    const matches = text.match(pattern);
                    if (matches) engagementScore += matches.length * 5;
                });
                
                profitPatterns.forEach(pattern => {
                    const matches = text.match(pattern);
                    if (matches) profitScore += matches.length * 7;
                });
                
                politicalPatterns.forEach(pattern => {
                    const matches = text.match(pattern);
                    if (matches) politicalScore += matches.length * 6;
                });
                
                // Adjust scores based on text length
                const wordCount = text.split(/\s+/).length;
                engagementScore = Math.min(100, engagementScore * (50 / Math.max(1, wordCount/10)));
                profitScore = Math.min(100, profitScore * (50 / Math.max(1, wordCount/10)));
                politicalScore = Math.min(100, politicalScore * (50 / Math.max(1, wordCount/10)));
                
                return {
                    engagement: Math.round(engagementScore),
                    profit: Math.round(profitScore),
                    political: Math.round(politicalScore)
                };
            }
            
            function calculatePersuasionScore(text) {
                const doc = window.nlp(text);
                const sentences = text.split(/[.!?]+/);
                const words = text.split(/\s+/);
                
                // Factors: emotional words, imperatives, rhetorical questions, claims without evidence
                let score = 0;
                
                // Emotional words
                const nlpAnalysis = analyzeTextWithNLP(text);
                score += nlpAnalysis.emotionalIntensity * 0.5;
                
                // Imperatives (commands)
                const imperativePattern = /(?:^|\s)(?:you should|you must|you need to|do this|don't|make sure|ensure|remember to)/gi;
                const imperativeMatches = text.match(imperativePattern);
                if (imperativeMatches) score += imperativeMatches.length * 3;
                
                // Rhetorical questions
                const questionPattern = /\?/g;
                const questionMatches = text.match(questionPattern);
                if (questionMatches) score += questionMatches.length * 2;
                
                // Claims without evidence (simple heuristic)
                const claimPattern = /\b(?:studies show|research indicates|experts agree|it is known|everyone knows|clearly|obviously|undoubtedly)\b/gi;
                const claimMatches = text.match(claimPattern);
                if (claimMatches) score += claimMatches.length * 4;
                
                return Math.min(100, Math.round(score));
            }
            
            function generateSuggestions(biases, emotionalAnalysis) {
                let suggestions = [];
                
                if (biases.engagement > 60) {
                    suggestions.push("Consider reducing emotionally charged language and sensational terms.");
                }
                
                if (biases.profit > 50) {
                    suggestions.push("Reduce commercial language and promotional content for a more authentic message.");
                }
                
                if (biases.political > 50) {
                    suggestions.push("Consider using more neutral language to avoid ideological framing.");
                }
                
                if (emotionalAnalysis.percentage > 40) {
                    suggestions.push("The high emotional language might trigger strong reactions. Consider a more balanced tone.");
                }
                
                if (suggestions.length === 0) {
                    suggestions.push("Your content appears well-balanced. Maintain this approach for algorithmic neutrality.");
                }
                
                return suggestions;
            }
            
            function updateMetrics(biases, emotionalAnalysis, persuasionScore) {
                // Update main metrics
                document.getElementById('manipulation-score').textContent = 
                    `${Math.max(biases.engagement, biases.profit, biases.political)}%`;
                
                const maxBias = Math.max(biases.engagement, biases.profit, biases.political);
                document.getElementById('bias-level').textContent = 
                    maxBias > 60 ? 'High' : maxBias > 30 ? 'Medium' : maxBias > 10 ? 'Low' : 'None';
                
                document.getElementById('emotional-score').textContent = `${emotionalAnalysis.percentage}%`;
                document.getElementById('ad-density').textContent = `${Math.round(biases.profit / 1.5)}%`;
                
                // Update analysis tab metrics
                document.getElementById('emotional-impact').textContent = `${emotionalAnalysis.percentage}%`;
                document.getElementById('ad-content').textContent = `${Math.round(biases.profit / 1.5)}%`;
                document.getElementById('persuasion-score').textContent = `${persuasionScore}%`;
                
                // Update bias indicators
                document.getElementById('engagement-bias-value').textContent = `${biases.engagement}%`;
                document.getElementById('engagement-bias-bar').style.width = `${biases.engagement}%`;
                
                document.getElementById('profit-bias-value').textContent = `${biases.profit}%`;
                document.getElementById('profit-bias-bar').style.width = `${biases.profit}%`;
                
                document.getElementById('political-bias-value').textContent = `${biases.political}%`;
                document.getElementById('political-bias-bar').style.width = `${biases.political}%`;
                
                // Update impact metrics
                document.getElementById('users-affected').textContent = `${Math.min(100, Math.round(biases.engagement * 0.8))}%`;
                document.getElementById('behavior-change').textContent = `${Math.min(100, Math.round((biases.engagement + biases.political) * 0.6))}%`;
                document.getElementById('revenue-impact').textContent = `${Math.min(100, Math.round(biases.profit * 1.2))}%`;
                
                // Update charts
                updateBiasChart(biases.engagement, biases.profit, biases.political, emotionalAnalysis.percentage, persuasionScore);
                updateAlgorithmChart();
                
                // Generate suggestions
                const suggestions = generateSuggestions(biases, emotionalAnalysis);
                document.getElementById('suggestion-text').innerHTML = suggestions.map(s => ` ${s}`).join('<br>');
                
                // Update recommendation
                const maxBiasType = biases.engagement > biases.profit ? 
                    (biases.engagement > biases.political ? 'engagement' : 'political') :
                    (biases.profit > biases.political ? 'profit' : 'political');
                
                let recommendation = '';
                if (maxBias > 60) {
                    recommendation = `This content shows strong ${maxBiasType} bias. Consider seeking alternative perspectives on this topic.`;
                } else if (maxBias > 30) {
                    recommendation = `This content shows moderate ${maxBiasType} bias. Be aware of potential manipulation techniques.`;
                } else if (maxBias > 10) {
                    recommendation = `This content shows slight ${maxBiasType} bias. Stay critical of the information presented.`;
                } else {
                    recommendation = 'This content appears relatively neutral. Still, maintain healthy skepticism about all information sources.';
                }
                
                document.getElementById('analysis-summary').textContent = 
                    `This content analysis reveals ${maxBias > 60 ? 'strong' : maxBias > 30 ? 'moderate' : 'minimal'} algorithmic manipulation.`;
                
                // AI Insight
                const aiInsights = [
                    "Our analysis indicates this content uses common engagement tactics like emotional language and sensationalism.",
                    "This content contains elements designed to maximize platform revenue through advertising and promotions.",
                    "We've detected political framing that may influence readers' perceptions of the subject matter.",
                    "The neutral language in this content suggests it may be less likely to be amplified by algorithmic systems.",
                    "This content employs multiple persuasion techniques commonly used in viral marketing campaigns."
                ];
                
                document.getElementById('ai-insight-text').textContent = aiInsights[Math.floor(Math.random() * aiInsights.length)];
            }
            
            // Engagement Bias transformation
            engagementBtn.addEventListener('click', function() {
                const text = inputTextarea.value;
                if (!text) return;
                
                // Show loading state
                outputTextDiv.innerHTML = '<p><span class="loading"></span> Analyzing engagement bias...</p>';
                
                // Simulate processing time
                setTimeout(() => {
                    let output = text;
                    
                    // Replace emotional words with more intense versions
                    const emotionalWords = {
                        'good': 'AMAZING',
                        'bad': 'TERRIBLE',
                        'nice': 'INCREDIBLE',
                        'happy': 'ECSTATIC',
                        'sad': 'DEVASTATED',
                        'like': 'ABSOLUTELY LOVE',
                        'dislike': 'ABHOR',
                        'okay': 'SPECTACULAR',
                        'interesting': 'MIND-BLOWING',
                        'fun': 'UNFORGETTABLE',
                        'important': 'CRUCIAL',
                        'big': 'MASSIVE',
                        'small': 'TINY',
                        'many': 'A TON OF',
                        'help': 'SAVE',
                        'problem': 'DISASTER',
                        'change': 'REVOLUTIONIZE',
                        'people': 'EVERYONE',
                        'think': 'KNOW',
                        'maybe': 'ABSOLUTELY',
                        'sometimes': 'ALWAYS',
                        'perhaps': 'DEFINITELY'
                    };
                    
                    for (const [key, value] of Object.entries(emotionalWords)) {
                        const regex = new RegExp(`\\b${key}\\b`, 'gi');
                        output = output.replace(regex, `<span class="manipulative">${value}</span>`);
                    }
                    
                    // Add random emojis
                    const emojis = ['', '', '', '', '', '', '', '', '', '', '', ''];
                    const words = output.split(' ');
                    let emojiCount = 0;
                    
                    for (let i = 0; i < words.length; i++) {
                        // Add emoji after every 5-8 words
                        if (Math.random() < 0.12 && emojiCount < 8) {
                            const randomEmoji = emojis[Math.floor(Math.random() * emojis.length)];
                            words[i] = words[i] + ` <span class="manipulative">${randomEmoji}</span>`;
                            emojiCount++;
                        }
                    }
                    
                    output = words.join(' ');
                    
                    // Add a sensational headline
                    output = `<h3 style="color: var(--engagement); margin-bottom: 15px;">YOU WON'T BELIEVE How Algorithms Are Manipulating You! </h3>` + output;
                    
                    // Add a call to action
                    output += `<p style="margin-top: 20px; font-weight: bold;" class="manipulative">SHARE this if you think everyone needs to know about this! </p>`;
                    
                    outputTextDiv.innerHTML = output;
                    
                    // Analyze the text
                    const emotionalAnalysis = analyzeTextWithNLP(text);
                    const biases = detectBiases(output);
                    const persuasionScore = calculatePersuasionScore(output);
                    updateMetrics(biases, emotionalAnalysis, persuasionScore);
                    
                    // Update comparison tab
                    document.getElementById('original-text-comparison').textContent = text;
                    document.getElementById('modified-text-comparison').innerHTML = output;
                    
                    document.getElementById('comparison-summary').textContent = 
                        "The algorithm has enhanced emotional language and added engagement hooks to increase user interaction.";
                    
                    document.getElementById('changes-list').innerHTML = `
                        <li>Amplified emotional language with more intense words</li>
                        <li>Added emojis to increase emotional response</li>
                        <li>Included a sensational headline to grab attention</li>
                        <li>Added a call-to-action to encourage sharing</li>
                    `;
                    
                    document.getElementById('impact-assessment').textContent = 
                        "These changes are designed to trigger emotional responses, increase time spent on platform, and encourage sharing - all key engagement metrics that drive advertising revenue.";
                    
                    // Switch to output tab
                    tabs.forEach(t => t.classList.remove('active'));
                    tabContents.forEach(c => c.classList.remove('active'));
                    tabs[0].classList.add('active');
                    tabContents[0].classList.add('active');
                }, 800);
            });
            
            // Profit Bias transformation
            profitBtn.addEventListener('click', function() {
                const text = inputTextarea.value;
                if (!text) return;
                
                // Show loading state
                outputTextDiv.innerHTML = '<p><span class="loading"></span> Analyzing profit bias...</p>';
                
                // Simulate processing time
                setTimeout(() => {
                    const words = text.split(' ');
                    const adPhrases = [
                        '<span class="ad-highlight">- Sponsored by BetterTech</span>',
                        '<span class="ad-highlight">Buy Now!</span>',
                        '<span class="ad-highlight">Limited Offer!</span>',
                        '<span class="ad-highlight">Sale ends soon!</span>',
                        '<span class="ad-highlight">Click here to learn more!</span>',
                        '<span class="ad-highlight">Discount code: SAVE20</span>',
                        '<span class="ad-highlight">FREE shipping on orders over $50!</span>',
                        '<span class="ad-highlight">Recommended just for YOU!</span>'
                    ];
                    
                    let outputWords = [];
                    let adCount = 0;
                    
                    for (let i = 0; i < words.length; i++) {
                        outputWords.push(words[i]);
                        
                        // Add ad phrase after every 8-12 words, but no more than 5 ads
                        if (i % Math.floor(Math.random() * 5 + 8) === 0 && adCount < 5) {
                            const randomAd = adPhrases[Math.floor(Math.random() * adPhrases.length)];
                            outputWords.push(randomAd);
                            adCount++;
                        }
                    }
                    
                    let output = outputWords.join(' ');
                    
                    // Add a sponsored message at the beginning
                    output = `<p class="ad-highlight">This content is sponsored by SocialMediaPro - The #1 Tool for Content Creators!</p>` + output;
                    
                    // Add a product recommendation at the end
                    output += `<div style="margin-top: 20px; padding: 15px; background: var(--lighter); border-radius: 10px; border-left: 4px solid var(--profit);">
                        <h4>Recommended for You</h4>
                        <p>Try <span class="ad-highlight">AdFree Experience</span> - browse without annoying ads for just $4.99/month!</p>
                    </div>`;
                    
                    outputTextDiv.innerHTML = output;
                    
                    // Analyze the text
                    const emotionalAnalysis = analyzeTextWithNLP(text);
                    const biases = detectBiases(output);
                    const persuasionScore = calculatePersuasionScore(output);
                    updateMetrics(biases, emotionalAnalysis, persuasionScore);
                    
                    // Update comparison tab
                    document.getElementById('original-text-comparison').textContent = text;
                    document.getElementById('modified-text-comparison').innerHTML = output;
                    
                    document.getElementById('comparison-summary').textContent = 
                        "The algorithm has inserted advertising content and promotional messages to monetize user attention.";
                    
                    document.getElementById('changes-list').innerHTML = `
                        <li>Added sponsored content disclosures</li>
                        <li>Inserted promotional messages at strategic intervals</li>
                        <li>Included targeted product recommendations</li>
                        <li>Added urgency cues like "Limited Offer"</li>
                    `;
                    
                    document.getElementById('impact-assessment').textContent = 
                        "These changes are designed to convert user attention into revenue through sponsored content, affiliate marketing, and targeted advertising.";
                    
                    // Switch to output tab
                    tabs.forEach(t => t.classList.remove('active'));
                    tabContents.forEach(c => c.classList.remove('active'));
                    tabs[0].classList.add('active');
                    tabContents[0].classList.add('active');
                }, 800);
            });
            
            // Political Bias transformation
            politicalBtn.addEventListener('click', function() {
                const text = inputTextarea.value;
                if (!text) return;
                
                // Show loading state
                outputTextDiv.innerHTML = '<p><span class="loading"></span> Analyzing political bias...</p>';
                
                // Simulate processing time
                setTimeout(() => {
                    let output = text;
                    
                    // Replace neutral terms with politically charged ones
                    const leftReplacements = {
                        'people': 'the public',
                        'taxes': 'fair share contributions',
                        'business': 'corporate interests',
                        'government': 'public institutions',
                        'freedom': 'social justice',
                        'rights': 'human rights',
                        'economy': 'working class economy',
                        'society': 'inclusive society',
                        'individual': 'community',
                        'company': 'multinational corporation',
                        'country': 'nation',
                        'law': 'regulation',
                        'choice': 'opportunity'
                    };
                    
                    const rightReplacements = {
                        'people': 'hardworking citizens',
                        'taxes': 'government overreach',
                        'business': 'job creators',
                        'government': 'bureaucracy',
                        'freedom': 'liberty',
                        'rights': 'constitutional rights',
                        'economy': 'free market economy',
                        'society': 'traditional values',
                        'individual': 'patriot',
                        'company': 'American business',
                        'country': 'great nation',
                        'law': 'order',
                        'choice': 'freedom'
                    };
                    
                    // Choose a random political leaning for this transformation
                    const isLeftLeaning = Math.random() > 0.5;
                    const replacements = isLeftLeaning ? leftReplacements : rightReplacements;
                    
                    for (const [key, value] of Object.entries(replacements)) {
                        const regex = new RegExp(`\\b${key}\\b`, 'gi');
                        output = output.replace(regex, `<span class="political">${value}</span>`);
                    }
                    
                    // Add slanting adjectives
                    const leftAdjectives = ['progressive', 'inclusive', 'diverse', 'equitable', 'socialist', 'woke', 'radical'];
                    const rightAdjectives = ['patriotic', 'traditional', 'conservative', 'free-market', 'nationalist', 'family-values', 'liberty-loving'];
                    
                    const adjectives = isLeftLeaning ? leftAdjectives : rightAdjectives;
                    const words = output.split(' ');
                    
                    for (let i = 0; i < words.length; i++) {
                        // Add a political adjective before some nouns
                        if (Math.random() < 0.1) {
                            const randomAdjective = adjectives[Math.floor(Math.random() * adjectives.length)];
                            words[i] = `<span class="political">${randomAdjective}</span> ` + words[i];
                        }
                    }
                    
                    output = words.join(' ');
                    
                    // Add a biased framing
                    const leftFraming = `<blockquote style="border-left: 4px solid var(--political); padding-left: 15px; font-style: italic;">
                        Experts agree that these changes will benefit working families.
                    </blockquote>`;
                    
                    const rightFraming = `<blockquote style="border-left: 4px solid var(--political); padding-left: 15px; font-style: italic;">
                        Studies show that these policies will strengthen our economy.
                    </blockquote>`;
                    
                    output = output + (isLeftLeaning ? leftFraming : rightFraming);
                    
                    outputTextDiv.innerHTML = output;
                    
                    // Analyze the text
                    const emotionalAnalysis = analyzeTextWithNLP(text);
                    const biases = detectBiases(output);
                    const persuasionScore = calculatePersuasionScore(output);
                    updateMetrics(biases, emotionalAnalysis, persuasionScore);
                    
                    // Update comparison tab
                    document.getElementById('original-text-comparison').textContent = text;
                    document.getElementById('modified-text-comparison').innerHTML = output;
                    
                    const biasDirection = isLeftLeaning ? "left-leaning" : "right-leaning";
                    document.getElementById('comparison-summary').textContent = 
                        `The algorithm has applied ${biasDirection} political framing to influence perception.`;
                    
                    document.getElementById('changes-list').innerHTML = `
                        <li>Replaced neutral terms with politically charged alternatives</li>
                        <li>Added ideological adjectives to shape perception</li>
                        <li>Included a biased "expert" quote for authority</li>
                        <li>Framed issues using ${biasDirection} terminology</li>
                    `;
                    
                    document.getElementById('impact-assessment').textContent = 
                        "These changes are designed to reinforce existing beliefs, create division, and keep users engaged through outrage or confirmation bias.";
                    
                    // Switch to output tab
                    tabs.forEach(t => t.classList.remove('active'));
                    tabContents.forEach(c => c.classList.remove('active'));
                    tabs[0].classList.add('active');
                    tabContents[0].classList.add('active');
                }, 800);
            });
            
            // Neutral Output transformation
            neutralBtn.addEventListener('click', function() {
                const text = inputTextarea.value;
                if (!text) return;
                
                // Show loading state
                outputTextDiv.innerHTML = '<p><span class="loading"></span> Analyzing text for neutrality...</p>';
                
                // Simulate processing time
                setTimeout(() => {
                    let output = text;
                    
                    // Highlight neutral/balanced words
                    const neutralWords = [
                        'fair', 'neutral', 'equal', 'balanced', 'objective',
                        'unbiased', 'moderate', 'reasonable', 'pragmatic', 'empirical',
                        'evidence-based', 'factual', 'impartial', 'rational', 'measured',
                        'considered', 'practical', 'constructive', 'respectful', 'informed'
                    ];
                    
                    for (const word of neutralWords) {
                        const regex = new RegExp(`\\b${word}\\b`, 'gi');
                        output = output.replace(regex, `<span class="neutral">${word}</span>`);
                    }
                    
                    outputTextDiv.innerHTML = output;
                    
                    // Analyze the text
                    const emotionalAnalysis = analyzeTextWithNLP(text);
                    const biases = detectBiases(text); // Use original text for neutral analysis
                    const persuasionScore = calculatePersuasionScore(text);
                    updateMetrics(biases, emotionalAnalysis, persuasionScore);
                    
                    // Update comparison tab
                    document.getElementById('original-text-comparison').textContent = text;
                    document.getElementById('modified-text-comparison').innerHTML = output;
                    
                    document.getElementById('comparison-summary').textContent = 
                        "This analysis highlights language that promotes balanced, objective discourse.";
                    
                    document.getElementById('changes-list').innerHTML = `
                        <li>Highlighted neutral and objective language</li>
                        <li>Identified balanced terminology</li>
                        <li>Emphasized evidence-based phrasing</li>
                    `;
                    
                    document.getElementById('impact-assessment').textContent = 
                        "Neutral language promotes understanding and reduces polarization, but may be less engaging for algorithmic distribution.";
                    
                    // Switch to output tab
                    tabs.forEach(t => t.classList.remove('active'));
                    tabContents.forEach(c => c.classList.remove('active'));
                    tabs[0].classList.add('active');
                    tabContents[0].classList.add('active');
                }, 800);
            });
            
            // Initialize with example text
            setTimeout(() => engagementBtn.click(), 500);
        });
    </script>
</body>
</html>
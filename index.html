<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Reality Filter – Advanced Manipulation Detection</title>
    <style>
        * {
            box-sizing: border-box;
            margin: 0;
            padding: 0;
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
        }
        
        body {
            background: linear-gradient(135deg, #f5f7fa 0%, #e4e8f0 100%);
            color: #333;
            line-height: 1.6;
            padding: 20px;
            min-height: 100vh;
        }
        
        .container {
            max-width: 1400px;
            margin: 0 auto;
        }
        
        header {
            text-align: center;
            margin-bottom: 30px;
            padding: 25px;
            background: linear-gradient(135deg, #2c3e50, #1a2530);
            color: white;
            border-radius: 10px;
            box-shadow: 0 6px 15px rgba(0, 0, 0, 0.15);
        }
        
        h1 {
            font-size: 2.5rem;
            margin-bottom: 10px;
            text-shadow: 1px 1px 3px rgba(0, 0, 0, 0.3);
        }
        
        .subtitle {
            font-size: 1.2rem;
            opacity: 0.9;
        }
        
        .dashboard {
            display: flex;
            gap: 20px;
            margin-bottom: 25px;
        }
        
        .metric {
            flex: 1;
            background: white;
            padding: 15px;
            border-radius: 8px;
            text-align: center;
            box-shadow: 0 4px 8px rgba(0, 0, 0, 0.1);
        }
        
        .metric h3 {
            font-size: 1rem;
            color: #7f8c8d;
            margin-bottom: 8px;
        }
        
        .metric-value {
            font-size: 1.8rem;
            font-weight: bold;
            color: #2c3e50;
        }
        
        .input-section {
            display: flex;
            flex-direction: column;
            gap: 20px;
            margin-bottom: 30px;
            background: white;
            padding: 30px;
            border-radius: 10px;
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.08);
        }
        
        textarea {
            width: 100%;
            min-height: 150px;
            padding: 20px;
            border: 2px solid #ddd;
            border-radius: 8px;
            font-size: 1.1rem;
            resize: vertical;
            transition: border-color 0.3s;
        }
        
        textarea:focus {
            outline: none;
            border-color: #3498db;
        }
        
        .button-container {
            display: flex;
            justify-content: center;
            gap: 15px;
            flex-wrap: wrap;
        }
        
        button {
            background: #3498db;
            color: white;
            border: none;
            padding: 15px 30px;
            border-radius: 8px;
            cursor: pointer;
            font-size: 1.1rem;
            font-weight: 600;
            transition: all 0.3s;
            box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);
        }
        
        button:hover {
            background: #2980b9;
            transform: translateY(-2px);
            box-shadow: 0 6px 8px rgba(0, 0, 0, 0.15);
        }
        
        button:active {
            transform: translateY(0);
        }
        
        #clearButton {
            background: #e74c3c;
        }
        
        #clearButton:hover {
            background: #c0392b;
        }
        
        #analyzeButton {
            background: #9b59b6;
        }
        
        #analyzeButton:hover {
            background: #8e44ad;
        }
        
        .panels {
            display: flex;
            gap: 25px;
            margin-bottom: 30px;
        }
        
        @media (max-width: 992px) {
            .panels {
                flex-direction: column;
            }
            
            .dashboard {
                flex-direction: column;
            }
        }
        
        .panel {
            flex: 1;
            background: white;
            border-radius: 10px;
            overflow: hidden;
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.08);
            display: flex;
            flex-direction: column;
        }
        
        .panel-header {
            background: #2c3e50;
            color: white;
            padding: 18px 25px;
            font-weight: 600;
            font-size: 1.3rem;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }
        
        .counter {
            background: rgba(255, 255, 255, 0.2);
            padding: 3px 10px;
            border-radius: 20px;
            font-size: 0.9rem;
        }
        
        .panel-content {
            padding: 25px;
            flex: 1;
            overflow-y: auto;
            min-height: 350px;
            max-height: 500px;
            line-height: 1.8;
            font-size: 1.1rem;
        }
        
        .replaced-urgency {
            color: #e74c3c;
            font-weight: bold;
            border-bottom: 2px dotted #e74c3c;
            background-color: rgba(231, 76, 60, 0.1);
            padding: 0 2px;
            border-radius: 3px;
        }
        
        .replaced-emotional {
            color: #f39c12;
            font-weight: bold;
            border-bottom: 2px dotted #f39c12;
            background-color: rgba(243, 156, 18, 0.1);
            padding: 0 2px;
            border-radius: 3px;
        }
        
        .replaced-personalization {
            color: #3498db;
            font-weight: bold;
            border-bottom: 2px dotted #3498db;
            background-color: rgba(52, 152, 219, 0.1);
            padding: 0 2px;
            border-radius: 3px;
        }
        
        .replaced-authority {
            color: #27ae60;
            font-weight: bold;
            border-bottom: 2px dotted #27ae60;
            background-color: rgba(39, 174, 96, 0.1);
            padding: 0 2px;
            border-radius: 3px;
        }
        
        .replaced-social {
            color: #8e44ad;
            font-weight: bold;
            border-bottom: 2px dotted #8e44ad;
            background-color: rgba(142, 68, 173, 0.1);
            padding: 0 2px;
            border-radius: 3px;
        }
        
        .legend {
            display: flex;
            justify-content: center;
            gap: 15px;
            margin-bottom: 25px;
            flex-wrap: wrap;
        }
        
        .legend-item {
            display: flex;
            align-items: center;
            gap: 8px;
            font-size: 0.9rem;
            background: white;
            padding: 8px 12px;
            border-radius: 6px;
            box-shadow: 0 2px 4px rgba(0,0,0,0.1);
        }
        
        .color-box {
            width: 16px;
            height: 16px;
            border-radius: 4px;
        }
        
        .urgency-color {
            background-color: #e74c3c;
        }
        
        .emotional-color {
            background-color: #f39c12;
        }
        
        .personalization-color {
            background-color: #3498db;
        }
        
        .authority-color {
            background-color: #27ae60;
        }
        
        .social-color {
            background-color: #8e44ad;
        }
        
        footer {
            text-align: center;
            padding: 20px;
            margin-top: 20px;
            color: #7f8c8d;
            font-size: 0.95rem;
            border-top: 1px solid #ddd;
        }
        
        .placeholder {
            color: #95a5a6;
            font-style: italic;
            text-align: center;
            margin-top: 40px;
        }
        
        .example-text {
            font-size: 0.9rem;
            color: #7f8c8d;
            margin-top: 10px;
            cursor: pointer;
            text-decoration: underline;
        }
        
        .analysis-section {
            background: white;
            padding: 20px;
            border-radius: 10px;
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.08);
            margin-bottom: 30px;
        }
        
        .analysis-section h2 {
            color: #2c3e50;
            margin-bottom: 15px;
            text-align: center;
        }
        
        .technique-list {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(300px, 1fr));
            gap: 15px;
        }
        
        .technique-item {
            background: #f8f9fa;
            padding: 15px;
            border-radius: 8px;
            border-left: 4px solid #3498db;
        }
        
        .technique-name {
            font-weight: bold;
            color: #2c3e50;
            margin-bottom: 5px;
        }
        
        .technique-desc {
            font-size: 0.9rem;
            color: #7f8c8d;
        }
        
        .manipulation-score {
            height: 10px;
            background: #ecf0f1;
            border-radius: 5px;
            margin-top: 10px;
            overflow: hidden;
        }
        
        .score-fill {
            height: 100%;
            border-radius: 5px;
            background: linear-gradient(90deg, #2ecc71, #f1c40f, #e74c3c);
        }
        
        .stats-container {
            display: flex;
            justify-content: space-between;
            margin-top: 10px;
            font-size: 0.9rem;
            color: #7f8c8d;
        }
    </style>
</head>
<body>
    <div class="container">
        <header>
            <h1>Reality Filter – Advanced Manipulation Detection</h1>
            <p class="subtitle">Uncover hidden persuasion techniques in media, advertising, and content</p>
        </header>
        
        <div class="dashboard">
            <div class="metric">
                <h3>MANIPULATION SCORE</h3>
                <div class="metric-value" id="manipulationScore">0%</div>
            </div>
            <div class="metric">
                <h3>DETECTED TECHNIQUES</h3>
                <div class="metric-value" id="techniquesCount">0</div>
            </div>
            <div class="metric">
                <h3>RED FLAGS</h3>
                <div class="metric-value" id="redFlagsCount">0</div>
            </div>
        </div>
        
        <div class="manipulation-score">
            <div class="score-fill" id="scoreFill" style="width: 0%"></div>
        </div>
        <div class="stats-container">
            <span>Low</span>
            <span>Medium</span>
            <span>High</span>
        </div>
        
        <div class="legend">
            <div class="legend-item">
                <div class="color-box urgency-color"></div>
                <span>Urgency/Scarcity</span>
            </div>
            <div class="legend-item">
                <div class="color-box emotional-color"></div>
                <span>Emotional Appeal</span>
            </div>
            <div class="legend-item">
                <div class="color-box personalization-color"></div>
                <span>Personalization</span>
            </div>
            <div class="legend-item">
                <div class="color-box authority-color"></div>
                <span>False Authority</span>
            </div>
            <div class="legend-item">
                <div class="color-box social-color"></div>
                <span>Social Proof</span>
            </div>
        </div>
        
        <section class="input-section">
            <textarea id="inputText" placeholder="Paste text to analyze (ads, headlines, articles, marketing copy)..."></textarea>
            <div class="example-text" id="exampleText">Click here to load example text</div>
            <div class="button-container">
                <button id="filterButton">Filter Text</button>
                <button id="analyzeButton">Deep Analysis</button>
                <button id="clearButton">Clear Text</button>
            </div>
        </section>
        
        <div class="panels">
            <div class="panel">
                <div class="panel-header">
                    <span>Original Text</span>
                    <span class="counter">Words: <span id="originalWordCount">0</span></span>
                </div>
                <div id="originalText" class="panel-content">
                    <p class="placeholder">Original text will appear here</p>
                </div>
            </div>
            
            <div class="panel">
                <div class="panel-header">
                    <span>Reality Filtered Text</span>
                    <span class="counter">Changes: <span id="changesCount">0</span></span>
                </div>
                <div id="filteredText" class="panel-content">
                    <p class="placeholder">Filtered text will appear here</p>
                </div>
            </div>
        </div>
        
        <div class="analysis-section" id="analysisSection" style="display: none;">
            <h2>Detected Persuasion Techniques</h2>
            <div class="technique-list" id="techniqueList">
                <!-- Techniques will be inserted here -->
            </div>
        </div>
        
        <footer>
            RF v2.0 – Advanced Algorithmic Detox Engine | Based on Cialdini's Principles of Persuasion
        </footer>
    </div>

    <script>
        document.addEventListener('DOMContentLoaded', function() {
            const inputText = document.getElementById('inputText');
            const filterButton = document.getElementById('filterButton');
            const analyzeButton = document.getElementById('analyzeButton');
            const clearButton = document.getElementById('clearButton');
            const exampleText = document.getElementById('exampleText');
            const originalText = document.getElementById('originalText');
            const filteredText = document.getElementById('filteredText');
            const originalWordCount = document.getElementById('originalWordCount');
            const changesCount = document.getElementById('changesCount');
            const manipulationScore = document.getElementById('manipulationScore');
            const techniquesCount = document.getElementById('techniquesCount');
            const redFlagsCount = document.getElementById('redFlagsCount');
            const scoreFill = document.getElementById('scoreFill');
            const analysisSection = document.getElementById('analysisSection');
            const techniqueList = document.getElementById('techniqueList');
            
            // Example text for demonstration
            const exampleContent = `For a LIMITED TIME only, we're offering an EXCLUSIVE opportunity to unlock FINANCIAL FREEDOM with our AI-powered investment platform. This ONCE-IN-A-LIFETIME offer is PERSONALIZED FOR YOU and represents a REAL BREAKTHROUGH in trading technology. 

Don't miss this MUST-HAVE tool that's TAILORED to your needs. ACT NOW before this SPECIAL OFFER disappears! This RISK-FREE opportunity reveals HIDDEN SECRETS that could create MIRACLE results in your portfolio.

Experts agree that this is the SMARTEST INVESTMENT you'll make this year. Join thousands of SUCCESSFUL INVESTORS who have already seen incredible returns. But hurry - this offer won't last long!

Our proprietary algorithm, developed by TOP FINANCIAL EXPERTS, guarantees outstanding results. You'll be amazed at how quickly you can achieve WEALTH AND PROSPERITY.`;

            // Comprehensive dictionary of manipulative words with replacements, tooltips, and types
            const manipulationDictionary = [
                // Urgency/Scarcity
                { manipulative: "limited time", neutral: "available", tooltip: "Creates false urgency to pressure quick decisions", type: "urgency", score: 8 },
                { manipulative: "exclusive", neutral: "standard", tooltip: "Suggests special access when often available to many", type: "urgency", score: 7 },
                { manipulative: "once-in-a-lifetime", neutral: "ordinary", tooltip: "Exaggerates rarity to increase perceived value", type: "urgency", score: 9 },
                { manipulative: "act now", neutral: "proceed", tooltip: "Creates unnecessary urgency to bypass careful consideration", type: "urgency", score: 8 },
                { manipulative: "hurry", neutral: "proceed", tooltip: "Pressures quick action without proper consideration", type: "urgency", score: 7 },
                { manipulative: "before it's gone", neutral: "available while supplies last", tooltip: "Uses artificial scarcity to drive action", type: "urgency", score: 8 },
                { manipulative: "only a few left", neutral: "available", tooltip: "Exaggerates scarcity to create urgency", type: "urgency", score: 7 },
                
                // Emotional triggers
                { manipulative: "financial freedom", neutral: "money opportunity", tooltip: "Appeals to emotions about wealth without realistic promises", type: "emotional", score: 9 },
                { manipulative: "unlock", neutral: "access", tooltip: "Implies hidden benefits that are typically standard", type: "emotional", score: 6 },
                { manipulative: "must-have", neutral: "optional", tooltip: "Creates social pressure to acquire something unnecessary", type: "emotional", score: 7 },
                { manipulative: "breakthrough", neutral: "development", tooltip: "Overstates incremental progress as revolutionary", type: "emotional", score: 8 },
                { manipulative: "miracle", neutral: "product", tooltip: "Uses exaggerated claims that can't be substantiated", type: "emotional", score: 9 },
                { manipulative: "amazing", neutral: "notable", tooltip: "Uses exaggerated language to generate excitement", type: "emotional", score: 6 },
                { manipulative: "incredible", neutral: "notable", tooltip: "Employs hyperbole to enhance perceived value", type: "emotional", score: 6 },
                { manipulative: "life-changing", neutral: "potentially beneficial", tooltip: "Overstates potential benefits to create desire", type: "emotional", score: 8 },
                
                // Personalization
                { manipulative: "personalized for you", neutral: "generic", tooltip: "Suggests custom tailoring when often it's mass-produced", type: "personalization", score: 7 },
                { manipulative: "tailored", neutral: "general", tooltip: "Implies custom fitting when typically it's one-size-fits-all", type: "personalization", score: 7 },
                { manipulative: "just for you", neutral: "for customers", tooltip: "Creates false sense of individual attention", type: "personalization", score: 6 },
                { manipulative: "designed for your", neutral: "designed for", tooltip: "Suggests customization that may not exist", type: "personalization", score: 6 },
                
                // Authority
                { manipulative: "experts agree", neutral: "some suggest", tooltip: "Appeals to authority without specific evidence", type: "authority", score: 8 },
                { manipulative: "scientists say", neutral: "research suggests", tooltip: "Vague reference to scientific authority", type: "authority", score: 7 },
                { manipulative: "doctors recommend", neutral: "some doctors recommend", tooltip: "Overstates professional endorsement", type: "authority", score: 8 },
                { manipulative: "top financial experts", neutral: "financial professionals", tooltip: "Uses vague authority claims to build credibility", type: "authority", score: 7 },
                
                // Social proof
                { manipulative: "join thousands", neutral: "join others", tooltip: "Uses social proof to validate the offering", type: "social", score: 6 },
                { manipulative: "most popular", neutral: "commonly used", tooltip: "Appeals to popularity rather than merit", type: "social", score: 6 },
                { manipulative: "everyone is talking about", neutral: "some people are discussing", tooltip: "Exaggerates social consensus", type: "social", score: 7 },
                
                // Other techniques
                { manipulative: "risk-free", neutral: "with terms", tooltip: "Hides actual conditions and potential costs", type: "emotional", score: 8 },
                { manipulative: "hidden secret", neutral: "information", tooltip: "Implies exclusive knowledge that is typically widely known", type: "emotional", score: 7 },
                { manipulative: "special offer", neutral: "offer", tooltip: "Makes a standard promotion seem unique and limited", type: "urgency", score: 6 },
                { manipulative: "AI-powered", neutral: "uses AI", tooltip: "Exaggerates technological sophistication for marketing appeal", type: "authority", score: 6 },
                { manipulative: "guarantee", neutral: "assurance", tooltip: "Overpromises results without sufficient evidence", type: "emotional", score: 7 },
                { manipulative: "proprietary", neutral: "custom", tooltip: "Suggests unique advantage that may be exaggerated", type: "authority", score: 6 },
            ];
            
            // Persuasion techniques database
            const persuasionTechniques = [
                {
                    name: "Artificial Urgency",
                    description: "Creating a false sense of time pressure to force quick decisions",
                    examples: "Limited time, Act now, Hurry, Ending soon",
                    category: "urgency"
                },
                {
                    name: "Scarcity Appeal",
                    description: "Suggesting limited availability to increase perceived value",
                    examples: "Only a few left, While supplies last, Exclusive offer",
                    category: "urgency"
                },
                {
                    name: "Emotional Triggering",
                    description: "Appealing to strong emotions rather than rational consideration",
                    examples: "Life-changing, Miracle, Amazing, Incredible",
                    category: "emotional"
                },
                {
                    name: "False Personalization",
                    description: "Creating the illusion of custom tailoring for the individual",
                    examples: "Just for you, Personalized, Tailored to your needs",
                    category: "personalization"
                },
                {
                    name: "Appeal to Authority",
                    description: "Using vague or false authority figures to build credibility",
                    examples: "Experts agree, Scientists say, Doctors recommend",
                    category: "authority"
                },
                {
                    name: "Social Proof",
                    description: "Suggesting widespread adoption to encourage conformity",
                    examples: "Join thousands, Most popular, Everyone is using",
                    category: "social"
                },
                {
                    name: "Exaggerated Claims",
                    description: "Making promises that cannot be substantiated or are unrealistic",
                    examples: "Financial freedom, Breakthrough, Miracle results",
                    category: "emotional"
                }
            ];
            
            // Function to escape HTML to prevent XSS
            function escapeHtml(unsafe) {
                return unsafe
                    .replace(/&/g, "&amp;")
                    .replace(/</g, "&lt;")
                    .replace(/>/g, "&gt;")
                    .replace(/"/g, "&quot;")
                    .replace(/'/g, "&#039;");
            }
            
            // Function to process text and replace manipulative phrases
            function processText(text, deepAnalysis = false) {
                let processedText = escapeHtml(text);
                let changeCounter = 0;
                let totalScore = 0;
                let detectedTechniques = new Set();
                
                // Replace manipulative phrases with highlighted spans
                manipulationDictionary.forEach(item => {
                    const regex = new RegExp(`\\b${item.manipulative}\\b`, 'gi');
                    const matches = processedText.match(regex);
                    if (matches) {
                        changeCounter += matches.length;
                        totalScore += item.score * matches.length;
                        detectedTechniques.add(item.type);
                        
                        // For deep analysis, we want to track all techniques
                        if (deepAnalysis) {
                            processedText = processedText.replace(regex, 
                                `<span class="replaced-${item.type}" title="${item.tooltip} (Score: ${item.score})">${item.neutral}</span>`
                            );
                        } else {
                            processedText = processedText.replace(regex, 
                                `<span class="replaced-${item.type}" title="${item.tooltip}">${item.neutral}</span>`
                            );
                        }
                    }
                });
                
                changesCount.textContent = changeCounter;
                
                // Calculate manipulation score (0-100)
                const wordCount = countWords(text);
                let scorePercent = 0;
                
                if (wordCount > 0) {
                    // Base score on density of manipulation phrases
                    const density = changeCounter / wordCount;
                    scorePercent = Math.min(100, Math.round(density * 1000));
                    
                    // Adjust based on severity of techniques
                    const severityAdjustment = Math.min(50, totalScore * 2);
                    scorePercent = Math.min(100, scorePercent + severityAdjustment);
                }
                
                manipulationScore.textContent = `${scorePercent}%`;
                scoreFill.style.width = `${scorePercent}%`;
                
                // Update technique counts
                techniquesCount.textContent = detectedTechniques.size;
                redFlagsCount.textContent = changeCounter;
                
                return {
                    text: processedText,
                    techniques: detectedTechniques,
                    score: scorePercent,
                    changes: changeCounter
                };
            }
            
            // Function to count words
            function countWords(text) {
                return text.trim() === '' ? 0 : text.trim().split(/\s+/).length;
            }
            
            // Function to display analysis results
            function displayAnalysis(techniques, score) {
                analysisSection.style.display = 'block';
                techniqueList.innerHTML = '';
                
                // Show relevant techniques
                persuasionTechniques.forEach(tech => {
                    if (techniques.has(tech.category)) {
                        const techElement = document.createElement('div');
                        techElement.className = 'technique-item';
                        techElement.innerHTML = `
                            <div class="technique-name">${tech.name}</div>
                            <div class="technique-desc">${tech.description}</div>
                            <div class="technique-desc"><strong>Examples:</strong> ${tech.examples}</div>
                        `;
                        techniqueList.appendChild(techElement);
                    }
                });
                
                // Add advice based on score
                const adviceElement = document.createElement('div');
                adviceElement.className = 'technique-item';
                adviceElement.style.gridColumn = '1 / -1';
                
                let adviceText = '';
                if (score < 30) {
                    adviceText = 'This text appears to have low manipulation content. Still, be aware of subtle persuasion techniques.';
                } else if (score < 70) {
                    adviceText = 'This text contains significant manipulation attempts. Be cautious and evaluate claims critically.';
                } else {
                    adviceText = 'This text contains high levels of manipulation. Be very skeptical of the claims being made.';
                }
                
                adviceElement.innerHTML = `
                    <div class="technique-name">Analysis Result</div>
                    <div class="technique-desc">${adviceText}</div>
                `;
                
                techniqueList.appendChild(adviceElement);
            }
            
            // Event listener for the filter button
            filterButton.addEventListener('click', function() {
                const text = inputText.value.trim();
                
                if (text === '') {
                    originalText.innerHTML = '<p class="placeholder">No text to filter</p>';
                    filteredText.innerHTML = '<p class="placeholder">No text to filter</p>';
                    originalWordCount.textContent = '0';
                    changesCount.textContent = '0';
                    manipulationScore.textContent = '0%';
                    scoreFill.style.width = '0%';
                    techniquesCount.textContent = '0';
                    redFlagsCount.textContent = '0';
                    analysisSection.style.display = 'none';
                    return;
                }
                
                // Display original text (with basic HTML escaping)
                originalText.innerHTML = `<p>${escapeHtml(text).replace(/\n/g, '<br>')}</p>`;
                originalWordCount.textContent = countWords(text);
                
                // Process and display filtered text
                const result = processText(text);
                filteredText.innerHTML = `<p>${result.text.replace(/\n/g, '<br>')}</p>`;
                
                // Hide analysis section for simple filter
                analysisSection.style.display = 'none';
            });
            
            // Event listener for the analyze button
            analyzeButton.addEventListener('click', function() {
                const text = inputText.value.trim();
                
                if (text === '') {
                    originalText.innerHTML = '<p class="placeholder">No text to analyze</p>';
                    filteredText.innerHTML = '<p class="placeholder">No text to analyze</p>';
                    originalWordCount.textContent = '0';
                    changesCount.textContent = '0';
                    manipulationScore.textContent = '0%';
                    scoreFill.style.width = '0%';
                    techniquesCount.textContent = '0';
                    redFlagsCount.textContent = '0';
                    analysisSection.style.display = 'none';
                    return;
                }
                
                // Display original text (with basic HTML escaping)
                originalText.innerHTML = `<p>${escapeHtml(text).replace(/\n/g, '<br>')}</p>`;
                originalWordCount.textContent = countWords(text);
                
                // Process and display filtered text with deep analysis
                const result = processText(text, true);
                filteredText.innerHTML = `<p>${result.text.replace(/\n/g, '<br>')}</p>`;
                
                // Display analysis results
                displayAnalysis(result.techniques, result.score);
            });
            
            // Event listener for the clear button
            clearButton.addEventListener('click', function() {
                inputText.value = '';
                originalText.innerHTML = '<p class="placeholder">Original text will appear here</p>';
                filteredText.innerHTML = '<p class="placeholder">Filtered text will appear here</p>';
                originalWordCount.textContent = '0';
                changesCount.textContent = '0';
                manipulationScore.textContent = '0%';
                scoreFill.style.width = '0%';
                techniquesCount.textContent = '0';
                redFlagsCount.textContent = '0';
                analysisSection.style.display = 'none';
            });
            
            // Event listener for the example text
            exampleText.addEventListener('click', function() {
                inputText.value = exampleContent;
                analyzeButton.click();
            });
        });
    </script>
</body>
</html>
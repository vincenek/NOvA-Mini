<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Fee Finder | Discover Your Hidden Investment Costs</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&display=swap" rel="stylesheet">
    <style>
        :root {
            --primary: #2563eb;
            --primary-gradient: linear-gradient(135deg, #2563eb 0%, #1d4ed8 100%);
            --secondary: #10b981;
            --secondary-gradient: linear-gradient(135deg, #10b981 0%, #059669 100%);
            --accent: #8b5cf6;
            --dark: #1f2937;
            --darker: #111827;
            --light: #f9fafb;
            --lighter: #f3f4f6;
            --gray: #9ca3af;
            --shadow: 0 10px 25px -5px rgba(0, 0, 0, 0.1), 0 8px 10px -6px rgba(0, 0, 0, 0.1);
            --radius: 16px;
            --transition: all 0.3s ease;
        }
        
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: 'Inter', sans-serif;
        }
        
        body {
            background: linear-gradient(135deg, #f0f9ff 0%, #e0f2fe 100%);
            color: var(--dark);
            line-height: 1.6;
            min-height: 100vh;
            padding: 0;
        }
        
        .container {
            max-width: 1200px;
            margin: 0 auto;
            padding: 0 20px;
        }
        
        header {
            background: rgba(255, 255, 255, 0.95);
            backdrop-filter: blur(10px);
            box-shadow: 0 4px 12px rgba(0, 0, 0, 0.05);
            padding: 20px 0;
            position: sticky;
            top: 0;
            z-index: 100;
        }
        
        .header-content {
            display: flex;
            justify-content: space-between;
            align-items: center;
        }
        
        .logo {
            display: flex;
            align-items: center;
            gap: 12px;
            font-weight: 700;
            font-size: 24px;
            background: var(--primary-gradient);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
        }
        
        .logo i {
            font-size: 28px;
        }
        
        nav ul {
            display: flex;
            list-style: none;
            gap: 32px;
        }
        
        nav a {
            text-decoration: none;
            color: var(--dark);
            font-weight: 500;
            transition: var(--transition);
            position: relative;
        }
        
        nav a:after {
            content: '';
            position: absolute;
            bottom: -5px;
            left: 0;
            width: 0;
            height: 3px;
            background: var(--primary-gradient);
            border-radius: 3px;
            transition: var(--transition);
        }
        
        nav a:hover {
            color: var(--primary);
        }
        
        nav a:hover:after {
            width: 100%;
        }
        
        .hero {
            text-align: center;
            padding: 80px 0 50px;
        }
        
        .hero h1 {
            font-size: 3.2rem;
            margin-bottom: 16px;
            color: var(--darker);
            font-weight: 700;
        }
        
        .hero p {
            font-size: 1.2rem;
            max-width: 700px;
            margin: 0 auto 40px;
            color: #4b5563;
        }
        
        .hero-illustration {
            max-width: 600px;
            margin: 0 auto;
            height: 200px;
            background: url('data:image/svg+xml;utf8,<svg xmlns="http://www.w3.org/2000/svg" width="600" height="200" viewBox="0 0 600 200"><rect x="100" y="80" width="120" height="70" rx="10" fill="%232563eb" opacity="0.2"/><rect x="240" y="80" width="120" height="70" rx="10" fill="%2310b981" opacity="0.2"/><rect x="380" y="80" width="120" height="70" rx="10" fill="%238b5cf6" opacity="0.2"/><circle cx="130" cy="115" r="15" fill="%232563eb"/><circle cx="270" cy="115" r="15" fill="%2310b981"/><circle cx="410" cy="115" r="15" fill="%238b5cf6"/><line x1="145" y1="115" x2="255" y2="115" stroke="%232563eb" stroke-width="3"/><line x1="285" y1="115" x2="395" y2="115" stroke="%2310b981" stroke-width="3"/></svg>') center no-repeat;
        }
        
        .card {
            background: rgba(255, 255, 255, 0.95);
            border-radius: var(--radius);
            box-shadow: var(--shadow);
            padding: 40px;
            margin-bottom: 40px;
            backdrop-filter: blur(10px);
            border: 1px solid rgba(255, 255, 255, 0.5);
        }
        
        .calculator {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 40px;
        }
        
        @media (max-width: 968px) {
            .calculator {
                grid-template-columns: 1fr;
            }
        }
        
        .input-section {
            position: relative;
        }
        
        .input-header {
            display: flex;
            align-items: center;
            gap: 12px;
            margin-bottom: 30px;
        }
        
        .input-header i {
            font-size: 28px;
            background: var(--primary-gradient);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
        }
        
        .form-group {
            margin-bottom: 24px;
        }
        
        .form-group label {
            display: block;
            margin-bottom: 10px;
            font-weight: 600;
            color: var(--darker);
            display: flex;
            align-items: center;
            gap: 8px;
        }
        
        .form-group label i {
            color: var(--primary);
        }
        
        .form-group input {
            width: 100%;
            padding: 16px;
            border: 2px solid var(--lighter);
            border-radius: 12px;
            font-size: 16px;
            transition: var(--transition);
        }
        
        .form-group input:focus {
            border-color: var(--primary);
            outline: none;
            box-shadow: 0 0 0 3px rgba(37, 99, 235, 0.1);
        }
        
        .slider-container {
            display: flex;
            align-items: center;
            gap: 16px;
        }
        
        .slider-container input[type="range"] {
            flex: 1;
            -webkit-appearance: none;
            height: 8px;
            border-radius: 4px;
            background: var(--lighter);
            outline: none;
        }
        
        .slider-container input[type="range"]::-webkit-slider-thumb {
            -webkit-appearance: none;
            width: 24px;
            height: 24px;
            border-radius: 50%;
            background: var(--primary);
            cursor: pointer;
            transition: var(--transition);
            box-shadow: 0 0 0 4px rgba(37, 99, 235, 0.2);
        }
        
        .slider-container input[type="range"]::-webkit-slider-thumb:hover {
            box-shadow: 0 0 0 6px rgba(37, 99, 235, 0.2);
        }
        
        .slider-value {
            font-weight: 600;
            color: var(--primary);
            min-width: 60px;
            text-align: right;
        }
        
        button {
            background: var(--primary-gradient);
            color: white;
            border: none;
            padding: 18px 32px;
            font-size: 18px;
            font-weight: 600;
            border-radius: 12px;
            cursor: pointer;
            transition: var(--transition);
            width: 100%;
            display: flex;
            justify-content: center;
            align-items: center;
            gap: 10px;
            box-shadow: 0 4px 6px rgba(37, 99, 235, 0.2);
        }
        
        button:hover {
            transform: translateY(-2px);
            box-shadow: 0 6px 12px rgba(37, 99, 235, 0.25);
        }
        
        .results {
            display: none;
        }
        
        .result-header {
            display: flex;
            align-items: center;
            gap: 12px;
            margin-bottom: 30px;
        }
        
        .result-header i {
            font-size: 28px;
            background: var(--secondary-gradient);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
        }
        
        .result-cards {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 24px;
            margin-bottom: 40px;
        }
        
        @media (max-width: 640px) {
            .result-cards {
                grid-template-columns: 1fr;
            }
        }
        
        .result-card {
            padding: 30px;
            border-radius: var(--radius);
            text-align: center;
            transition: var(--transition);
            box-shadow: 0 4px 12px rgba(0, 0, 0, 0.05);
        }
        
        .result-card:hover {
            transform: translateY(-5px);
        }
        
        .result-card.loss {
            background: linear-gradient(135deg, #fff5f5 0%, #fed7d7 100%);
            border: 2px solid #feb2b2;
        }
        
        .result-card.gain {
            background: linear-gradient(135deg, #f0fff4 0%, #c6f6d5 100%);
            border: 2px solid #9ae6b4;
        }
        
        .result-card h3 {
            margin-bottom: 16px;
            font-size: 18px;
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 8px;
        }
        
        .result-card .amount {
            font-size: 32px;
            font-weight: 700;
            margin-bottom: 12px;
        }
        
        .result-card.loss .amount {
            color: #e53e3e;
        }
        
        .result-card.gain .amount {
            color: #38a169;
        }
        
        .chart-container {
            height: 350px;
            margin: 40px 0;
        }
        
        .comparison {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 24px;
            margin-top: 40px;
        }
        
        @media (max-width: 768px) {
            .comparison {
                grid-template-columns: 1fr;
            }
        }
        
        .comparison-item {
            padding: 24px;
            border-radius: var(--radius);
            background: white;
            box-shadow: 0 4px 12px rgba(0, 0, 0, 0.05);
        }
        
        .comparison-item h3 {
            margin-bottom: 20px;
            padding-bottom: 16px;
            border-bottom: 2px solid var(--lighter);
            display: flex;
            align-items: center;
            gap: 10px;
        }
        
        .comparison-item ul {
            list-style: none;
        }
        
        .comparison-item li {
            padding: 14px 0;
            display: flex;
            justify-content: space-between;
            border-bottom: 1px solid var(--lighter);
        }
        
        .comparison-item li:last-child {
            border-bottom: none;
        }
        
        .comparison-item li span:first-child {
            color: #6b7280;
            display: flex;
            align-items: center;
            gap: 8px;
        }
        
        .comparison-item li span:last-child {
            font-weight: 600;
        }
        
        .faq {
            margin-top: 60px;
        }
        
        .faq h2 {
            text-align: center;
            margin-bottom: 40px;
            font-size: 2.2rem;
            color: var(--darker);
        }
        
        .faq-item {
            margin-bottom: 20px;
            border-radius: var(--radius);
            background: white;
            box-shadow: 0 4px 12px rgba(0, 0, 0, 0.05);
            overflow: hidden;
        }
        
        .faq-question {
            font-weight: 600;
            padding: 24px;
            cursor: pointer;
            display: flex;
            justify-content: space-between;
            align-items: center;
            background: var(--lighter);
            transition: var(--transition);
        }
        
        .faq-question:hover {
            background: #e5e7eb;
        }
        
        .faq-answer {
            padding: 0 24px;
            max-height: 0;
            overflow: hidden;
            transition: max-height 0.3s ease, padding 0.3s ease;
        }
        
        .faq-answer.open {
            padding: 24px;
            max-height: 500px;
        }
        
        footer {
            text-align: center;
            padding: 60px 0;
            margin-top: 80px;
            color: #6b7280;
            border-top: 1px solid var(--lighter);
            background: white;
        }
        
        .disclaimer {
            background-color: #fffbeb;
            border: 2px solid #fcd34d;
            border-radius: 12px;
            padding: 20px;
            margin-top: 30px;
            font-size: 14px;
            color: #92400e;
        }
        
        .cta-button {
            background: var(--secondary-gradient);
            margin-top: 20px;
        }
        
        .modal {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0, 0, 0, 0.5);
            backdrop-filter: blur(5px);
            z-index: 1000;
            justify-content: center;
            align-items: center;
        }
        
        .modal-content {
            background: white;
            padding: 40px;
            border-radius: var(--radius);
            box-shadow: var(--shadow);
            max-width: 500px;
            text-align: center;
        }
        
        .modal-content i {
            font-size: 48px;
            color: var(--accent);
            margin-bottom: 20px;
        }
        
        .modal-content h2 {
            margin-bottom: 16px;
            color: var(--darker);
        }
        
        .modal-content p {
            margin-bottom: 30px;
            color: #6b7280;
        }
        
        .modal-button {
            background: var(--accent);
            width: auto;
            padding: 12px 24px;
        }
        
        .feature-badge {
            display: inline-block;
            background: var(--primary-gradient);
            color: white;
            padding: 6px 12px;
            border-radius: 100px;
            font-size: 12px;
            font-weight: 600;
            margin-left: 10px;
        }
        
        .save-scenario {
            display: flex;
            gap: 12px;
            margin-top: 20px;
        }
        
        .save-btn {
            background: var(--accent);
            width: auto;
            padding: 12px 20px;
        }
        
        .share-btn {
            background: var(--dark);
            width: auto;
            padding: 12px 20px;
        }
    </style>
</head>
<body>
    <header>
        <div class="container">
            <div class="header-content">
                <div class="logo">
                    <i class="fas fa-money-bill-wave"></i>
                    <span>Fee Finder</span>
                </div>
                <nav>
                    <ul>
                        <li><a href="#">Home</a></li>
                        <li><a href="#">How It Works</a></li>
                        <li><a href="#">Resources</a></li>
                        <li><a href="#">About</a></li>
                        <li><a href="#">Contact</a></li>
                    </ul>
                </nav>
            </div>
        </div>
    </header>

    <div class="container">
        <section class="hero">
            <h1>Discover Your Hidden Investment Fees</h1>
            <p>See exactly how much fees are costing you over time—and what you could save with lower-cost alternatives.</p>
            <div class="hero-illustration"></div>
        </section>

        <div class="card">
            <div class="calculator">
                <div class="input-section">
                    <div class="input-header">
                        <i class="fas fa-sliders-h"></i>
                        <h2>Your Investment Profile</h2>
                    </div>
                    <div class="form-group">
                        <label for="initialAmount"><i class="fas fa-piggy-bank"></i> Current Portfolio Value ($)</label>
                        <input type="number" id="initialAmount" value="100000" min="0">
                    </div>
                    <div class="form-group">
                        <label for="monthlyContribution"><i class="fas fa-calendar-plus"></i> Monthly Contribution ($)</label>
                        <input type="number" id="monthlyContribution" value="500" min="0">
                    </div>
                    <div class="form-group">
                        <label for="years"><i class="fas fa-clock"></i> Years Until Retirement</label>
                        <input type="number" id="years" value="30" min="1" max="50">
                    </div>
                    <div class="form-group">
                        <label for="returnRate"><i class="fas fa-chart-line"></i> Estimated Annual Return</label>
                        <div class="slider-container">
                            <input type="range" id="returnRate" min="0" max="15" step="0.1" value="7">
                            <span id="returnRateValue" class="slider-value">7%</span>
                        </div>
                    </div>
                    <div class="form-group">
                        <label for="yourFee"><i class="fas fa-money-bill-wave"></i> Your Current Annual Fee</label>
                        <div class="slider-container">
                            <input type="range" id="yourFee" min="0.1" max="3" step="0.05" value="1.0">
                            <span id="yourFeeValue" class="slider-value">1.0%</span>
                        </div>
                    </div>
                    <div class="form-group">
                        <label for="lowerFee"><i class="fas fa-search-dollar"></i> Lower Fee Alternative</label>
                        <div class="slider-container">
                            <input type="range" id="lowerFee" min="0.02" max="1" step="0.01" value="0.15">
                            <span id="lowerFeeValue" class="slider-value">0.15%</span>
                        </div>
                    </div>
                    <button id="calculateBtn">
                        <i class="fas fa-calculator"></i> Calculate Your Savings
                    </button>
                    <div class="save-scenario">
                        <button class="save-btn">
                            <i class="fas fa-save"></i> Save Scenario
                        </button>
                        <button class="share-btn">
                            <i class="fas fa-share-alt"></i> Share Results
                        </button>
                    </div>
                </div>
                
                <div class="results" id="resultsSection">
                    <div class="result-header">
                        <i class="fas fa-chart-pie"></i>
                        <h2>Your Potential Savings</h2>
                    </div>
                    <div class="result-cards">
                        <div class="result-card loss">
                            <h3><i class="fas fa-hand-holding-usd"></i> You Will Lose</h3>
                            <div id="feeCost" class="amount">$0</div>
                            <p>This money vanishes into fees</p>
                        </div>
                        <div class="result-card gain">
                            <h3><i class="fas fa-piggy-bank"></i> You Could Save</h3>
                            <div id="potentialSavings" class="amount">$0</div>
                            <p>By switching to lower fees</p>
                        </div>
                    </div>
                    
                    <div class="chart-container">
                        <canvas id="growthChart"></canvas>
                    </div>
                    
                    <button class="cta-button" id="actionBtn">
                        <i class="fas fa-rocket"></i> Start Saving Now
                    </button>
                    
                    <div class="disclaimer">
                        <p><strong>Disclaimer:</strong> This calculator provides estimates only. Actual results may vary based on market conditions and specific investment products. Past performance is not indicative of future results.</p>
                    </div>
                </div>
            </div>
        </div>

        <div class="card">
            <div class="comparison">
                <div class="comparison-item">
                    <h3><i class="fas fa-times-circle" style="color:#e53e3e"></i> High Fee Scenario (<span id="currentFeeDisplay">1.0%</span>)</h3>
                    <ul>
                        <li><span><i class="fas fa-money-check"></i> Total Contributions:</span> <span id="highFeeContributions">$0</span></li>
                        <li><span><i class="fas fa-hand-holding-usd"></i> Total Fees Paid:</span> <span id="highFeeTotal">$0</span></li>
                        <li><span><i class="fas fa-piggy-bank"></i> Final Balance:</span> <span id="highFeeBalance">$0</span></li>
                    </ul>
                </div>
                <div class="comparison-item">
                    <h3><i class="fas fa-check-circle" style="color:#38a169"></i> Low Fee Scenario (<span id="lowFeeDisplay">0.15%</span>)</h3>
                    <ul>
                        <li><span><i class="fas fa-money-check"></i> Total Contributions:</span> <span id="lowFeeContributions">$0</span></li>
                        <li><span><i class="fas fa-hand-holding-usd"></i> Total Fees Paid:</span> <span id="lowFeeTotal">$0</span></li>
                        <li><span><i class="fas fa-piggy-bank"></i> Final Balance:</span> <span id="lowFeeBalance">$0</span></li>
                    </ul>
                </div>
            </div>
        </div>

        <div class="card faq">
            <h2>Frequently Asked Questions</h2>
            <div class="faq-item">
                <div class="faq-question">
                    What are investment fees? <i class="fas fa-chevron-down"></i>
                </div>
                <div class="faq-answer">
                    Investment fees are expenses charged by financial institutions for managing your investments. They can include management fees, expense ratios, advisory fees, and transaction costs. These fees are often expressed as a percentage of your assets under management.
                </div>
            </div>
            <div class="faq-item">
                <div class="faq-question">
                    Why do fees matter so much? <i class="fas fa-chevron-down"></i>
                </div>
                <div class="faq-answer">
                    Fees directly reduce your investment returns. Over time, even a small difference in fees can compound into a significant amount of money due to the power of compound interest. Lower fees mean more of your money stays invested and grows over time.
                </div>
            </div>
            <div class="faq-item">
                <div class="faq-question">
                    How can I reduce my investment fees? <i class="fas fa-chevron-down"></i>
                </div>
                <div class="faq-answer">
                    You can reduce fees by choosing low-cost index funds or ETFs, negotiating with your financial advisor, avoiding products with high expense ratios, and being mindful of transaction costs. Many robo-advisors and online platforms now offer low-fee investment options.
                </div>
            </div>
            <div class="faq-item">
                <div class="faq-question">
                    Is this tool completely free? <span class="feature-badge">FREE</span> <i class="fas fa-chevron-down"></i>
                </div>
                <div class="faq-answer">
                    Yes, Fee Finder is completely free to use. We believe that everyone should have access to tools that help them understand and optimize their financial future. We may partner with financial institutions in the future, but the calculator will always remain free.
                </div>
            </div>
        </div>
    </div>

    <footer>
        <div class="container">
            <p>© 2023 Fee Finder. All rights reserved.</p>
            <p>This tool is for educational purposes only. We recommend consulting with a financial advisor before making investment decisions.</p>
        </div>
    </footer>

    <div class="modal" id="updateModal">
        <div class="modal-content">
            <i class="fas fa-tools"></i>
            <h2>Coming in Next Update</h2>
            <p>We're working hard to bring you the ability to connect with low-fee investment providers directly through our platform. This feature will be available soon!</p>
            <button class="modal-button" id="closeModal">Got It</button>
        </div>
    </div>

    <script>
        // DOM Elements
        const returnRateSlider = document.getElementById('returnRate');
        const returnRateValue = document.getElementById('returnRateValue');
        const yourFeeSlider = document.getElementById('yourFee');
        const yourFeeValue = document.getElementById('yourFeeValue');
        const lowerFeeSlider = document.getElementById('lowerFee');
        const lowerFeeValue = document.getElementById('lowerFeeValue');
        const calculateBtn = document.getElementById('calculateBtn');
        const resultsSection = document.getElementById('resultsSection');
        const feeCostElement = document.getElementById('feeCost');
        const potentialSavingsElement = document.getElementById('potentialSavings');
        const currentFeeDisplay = document.getElementById('currentFeeDisplay');
        const lowFeeDisplay = document.getElementById('lowFeeDisplay');
        const actionBtn = document.getElementById('actionBtn');
        const modal = document.getElementById('updateModal');
        const closeModal = document.getElementById('closeModal');
        
        // Comparison elements
        const highFeeContributions = document.getElementById('highFeeContributions');
        const highFeeTotal = document.getElementById('highFeeTotal');
        const highFeeBalance = document.getElementById('highFeeBalance');
        const lowFeeContributions = document.getElementById('lowFeeContributions');
        const lowFeeTotal = document.getElementById('lowFeeTotal');
        const lowFeeBalance = document.getElementById('lowFeeBalance');
        
        // Chart variable
        let growthChart;
        
        // Initialize slider values
        returnRateValue.textContent = returnRateSlider.value + '%';
        yourFeeValue.textContent = yourFeeSlider.value + '%';
        lowerFeeValue.textContent = lowerFeeSlider.value + '%';
        
        // Update slider values when sliders are moved
        returnRateSlider.addEventListener('input', () => {
            returnRateValue.textContent = returnRateSlider.value + '%';
        });
        
        yourFeeSlider.addEventListener('input', () => {
            yourFeeValue.textContent = yourFeeSlider.value + '%';
        });
        
        lowerFeeSlider.addEventListener('input', () => {
            lowerFeeValue.textContent = lowerFeeSlider.value + '%';
        });
        
        // Calculate button click event
        calculateBtn.addEventListener('click', () => {
            calculateResults();
            resultsSection.style.display = 'block';
            // Scroll to results
            resultsSection.scrollIntoView({ behavior: 'smooth' });
        });
        
        // Action button click event
        actionBtn.addEventListener('click', () => {
            modal.style.display = 'flex';
        });
        
        // Close modal button
        closeModal.addEventListener('click', () => {
            modal.style.display = 'none';
        });
        
        // Close modal if clicked outside
        window.addEventListener('click', (e) => {
            if (e.target === modal) {
                modal.style.display = 'none';
            }
        });
        
        // FAQ toggle functionality
        document.querySelectorAll('.faq-question').forEach(question => {
            question.addEventListener('click', () => {
                const answer = question.nextElementSibling;
                const icon = question.querySelector('i');
                
                if (answer.classList.contains('open')) {
                    answer.classList.remove('open');
                    icon.classList.remove('fa-chevron-up');
                    icon.classList.add('fa-chevron-down');
                } else {
                    answer.classList.add('open');
                    icon.classList.remove('fa-chevron-down');
                    icon.classList.add('fa-chevron-up');
                }
            });
        });
        
        // Format currency
        function formatCurrency(value) {
            return new Intl.NumberFormat('en-US', {
                style: 'currency',
                currency: 'USD',
                minimumFractionDigits: 0,
                maximumFractionDigits: 0
            }).format(value);
        }
        
        // Calculate future value with compound interest
        function calculateFutureValue(initial, monthly, years, returnRate, feeRate) {
            const monthlyRate = (returnRate - feeRate) / 12;
            const months = years * 12;
            let futureValue = initial;
            let totalFees = 0;
            let totalContributions = initial;
            
            for (let i = 0; i < months; i++) {
                // Add monthly contribution
                futureValue += monthly;
                totalContributions += monthly;
                
                // Apply monthly growth
                const monthlyGrowth = futureValue * monthlyRate;
                futureValue += monthlyGrowth;
                
                // Calculate fees for the month
                const monthlyFee = futureValue * (feeRate / 12);
                futureValue -= monthlyFee;
                totalFees += monthlyFee;
            }
            
            return {
                futureValue: futureValue,
                totalFees: totalFees,
                totalContributions: totalContributions
            };
        }
        
        // Calculate and display results
        function calculateResults() {
            // Get input values
            const initial = parseFloat(document.getElementById('initialAmount').value);
            const monthly = parseFloat(document.getElementById('monthlyContribution').value);
            const years = parseFloat(document.getElementById('years').value);
            const returnRate = parseFloat(returnRateSlider.value) / 100;
            const yourFee = parseFloat(yourFeeSlider.value) / 100;
            const lowerFee = parseFloat(lowerFeeSlider.value) / 100;
            
            // Update fee displays
            currentFeeDisplay.textContent = (yourFee * 100).toFixed(2) + '%';
            lowFeeDisplay.textContent = (lowerFee * 100).toFixed(2) + '%';
            
            // Calculate results for both scenarios
            const highFeeResult = calculateFutureValue(initial, monthly, years, returnRate, yourFee);
            const lowFeeResult = calculateFutureValue(initial, monthly, years, returnRate, lowerFee);
            
            // Calculate the difference
            const feeCost = highFeeResult.totalFees - lowFeeResult.totalFees;
            const potentialSavings = lowFeeResult.futureValue - highFeeResult.futureValue;
            
            // Update UI with results
            feeCostElement.textContent = formatCurrency(feeCost);
            potentialSavingsElement.textContent = formatCurrency(potentialSavings);
            
            // Update comparison section
            highFeeContributions.textContent = formatCurrency(highFeeResult.totalContributions);
            highFeeTotal.textContent = formatCurrency(highFeeResult.totalFees);
            highFeeBalance.textContent = formatCurrency(highFeeResult.futureValue);
            
            lowFeeContributions.textContent = formatCurrency(lowFeeResult.totalContributions);
            lowFeeTotal.textContent = formatCurrency(lowFeeResult.totalFees);
            lowFeeBalance.textContent = formatCurrency(lowFeeResult.futureValue);
            
            // Create or update chart
            createChart(initial, monthly, years, returnRate, yourFee, lowerFee);
        }
        
        // Create growth chart
        function createChart(initial, monthly, years, returnRate, yourFee, lowerFee) {
            const ctx = document.getElementById('growthChart').getContext('2d');
            
            // Generate data points for each year
            const labels = Array.from({length: years + 1}, (_, i) => i);
            
            const highFeeData = [];
            const lowFeeData = [];
            
            for (let year = 0; year <= years; year++) {
                const highFeeValue = calculateFutureValue(initial, monthly, year, returnRate, yourFee).futureValue;
                const lowFeeValue = calculateFutureValue(initial, monthly, year, returnRate, lowerFee).futureValue;
                
                highFeeData.push(highFeeValue);
                lowFeeData.push(lowFeeValue);
            }
            
            // Destroy previous chart if it exists
            if (growthChart) {
                growthChart.destroy();
            }
            
            // Create new chart
            growthChart = new Chart(ctx, {
                type: 'line',
                data: {
                    labels: labels,
                    datasets: [
                        {
                            label: 'High Fee Growth',
                            data: highFeeData,
                            borderColor: '#e53e3e',
                            backgroundColor: 'rgba(229, 62, 62, 0.1)',
                            fill: true,
                            tension: 0.3
                        },
                        {
                            label: 'Low Fee Growth',
                            data: lowFeeData,
                            borderColor: '#38a169',
                            backgroundColor: 'rgba(56, 161, 105, 0.1)',
                            fill: true,
                            tension: 0.3
                        }
                    ]
                },
                options: {
                    responsive: true,
                    maintainAspectRatio: false,
                    plugins: {
                        title: {
                            display: true,
                            text: 'Investment Growth Over Time',
                            font: {
                                size: 16
                            }
                        },
                        tooltip: {
                            mode: 'index',
                            intersect: false,
                            callbacks: {
                                label: function(context) {
                                    return context.dataset.label + ': ' + formatCurrency(context.raw);
                                }
                            }
                        }
                    },
                    scales: {
                        x: {
                            title: {
                                display: true,
                                text: 'Years'
                            }
                        },
                        y: {
                            title: {
                                display: true,
                                text: 'Portfolio Value'
                            },
                            ticks: {
                                callback: function(value) {
                                    return formatCurrency(value);
                                }
                            }
                        }
                    }
                }
            });
        }
        
        // Calculate initial results on page load
        window.addEventListener('load', () => {
            calculateResults();
            resultsSection.style.display = 'block';
        });
    </script>
</body>
</html>
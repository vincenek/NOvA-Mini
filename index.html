<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Clipboard AI - Your Intelligent File Assistant</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <style>
        :root {
            --primary: #6366f1;
            --primary-dark: #4f46e5;
            --secondary: #10b981;
            --dark: #1f2937;
            --light: #f9fafb;
            --gray: #9ca3af;
            --success: #059669;
            --warning: #f59e0b;
            --error: #ef4444;
            --background: #f3f4f6;
            --card-bg: #ffffff;
            --text: #1f2937;
            --text-light: #6b7280;
            --border: #e5e7eb;
        }

        .dark-mode {
            --primary: #818cf8;
            --primary-dark: #6366f1;
            --secondary: #34d399;
            --dark: #f9fafb;
            --light: #1f2937;
            --gray: #6b7280;
            --success: #10b981;
            --warning: #f59e0b;
            --error: #ef4444;
            --background: #111827;
            --card-bg: #1f2937;
            --text: #f9fafb;
            --text-light: #d1d5db;
            --border: #374151;
        }
        
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            transition: background-color 0.3s, color 0.3s;
        }
        
        body {
            background: var(--background);
            min-height: 100vh;
            display: flex;
            flex-direction: column;
            align-items: center;
            padding: 20px;
            color: var(--text);
        }
        
        .container {
            width: 100%;
            max-width: 1200px;
            display: flex;
            flex-direction: column;
            gap: 20px;
        }
        
        header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 20px;
            background: var(--card-bg);
            border-radius: 16px;
            box-shadow: 0 4px 6px rgba(0, 0, 0, 0.05);
        }
        
        .logo {
            display: flex;
            align-items: center;
            gap: 12px;
            font-weight: 700;
            font-size: 24px;
            color: var(--primary);
        }
        
        .logo i {
            font-size: 28px;
        }
        
        nav {
            display: flex;
            gap: 20px;
        }
        
        nav button {
            background: none;
            border: none;
            font-weight: 600;
            font-size: 16px;
            color: var(--text);
            cursor: pointer;
            padding: 8px 16px;
            border-radius: 8px;
            transition: all 0.2s;
        }
        
        nav button:hover {
            background: var(--background);
            color: var(--primary);
        }
        
        .main-content {
            display: grid;
            grid-template-columns: 1fr 1.5fr;
            gap: 20px;
        }
        
        .upload-section {
            background: var(--card-bg);
            border-radius: 16px;
            padding: 30px;
            display: flex;
            flex-direction: column;
            gap: 20px;
            box-shadow: 0 4px 6px rgba(0, 0, 0, 0.05);
            height: fit-content;
        }
        
        .section-title {
            font-size: 20px;
            font-weight: 600;
            color: var(--text);
            display: flex;
            align-items: center;
            gap: 10px;
        }
        
        .drop-zone {
            border: 2px dashed var(--border);
            border-radius: 12px;
            padding: 40px 20px;
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            gap: 16px;
            cursor: pointer;
            transition: all 0.3s;
        }
        
        .drop-zone:hover {
            border-color: var(--primary);
            background: var(--background);
        }
        
        .drop-zone i {
            font-size: 48px;
            color: var(--primary);
        }
        
        .drop-zone p {
            text-align: center;
            color: var(--text-light);
        }
        
        .file-input {
            display: none;
        }
        
        .actions-container {
            display: flex;
            flex-direction: column;
            gap: 12px;
        }
        
        .action-group {
            display: flex;
            flex-direction: column;
            gap: 8px;
        }
        
        .action-group-title {
            font-weight: 600;
            font-size: 16px;
            color: var(--text);
        }
        
        .action-buttons {
            display: flex;
            flex-wrap: wrap;
            gap: 8px;
        }
        
        .action-btn {
            padding: 8px 16px;
            background: var(--background);
            border: none;
            border-radius: 8px;
            font-weight: 500;
            font-size: 14px;
            cursor: pointer;
            transition: all 0.2s;
            display: flex;
            align-items: center;
            gap: 6px;
            color: var(--text);
        }
        
        .action-btn:hover {
            background: var(--border);
        }
        
        .action-btn.active {
            background: var(--primary);
            color: white;
        }
        
        .process-btn {
            margin-top: 10px;
            padding: 12px 24px;
            background: var(--primary);
            color: white;
            border: none;
            border-radius: 8px;
            font-weight: 600;
            font-size: 16px;
            cursor: pointer;
            transition: all 0.2s;
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 8px;
        }
        
        .process-btn:hover {
            background: var(--primary-dark);
        }
        
        .process-btn:disabled {
            background: var(--gray);
            cursor: not-allowed;
        }
        
        .results-section {
            display: flex;
            flex-direction: column;
            gap: 20px;
        }
        
        .file-preview {
            background: var(--card-bg);
            border-radius: 16px;
            padding: 20px;
            box-shadow: 0 4px 6px rgba(0, 0, 0, 0.05);
        }
        
        .preview-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 16px;
        }
        
        .preview-content {
            max-height: 300px;
            overflow: auto;
            padding: 16px;
            background: var(--background);
            border-radius: 12px;
        }
        
        .preview-content img {
            max-width: 100%;
            border-radius: 8px;
        }
        
        .preview-content textarea {
            width: 100%;
            height: 200px;
            border: 1px solid var(--border);
            border-radius: 8px;
            padding: 12px;
            resize: none;
            font-family: monospace;
            background: var(--card-bg);
            color: var(--text);
        }
        
        .ai-output {
            background: var(--card-bg);
            border-radius: 16px;
            padding: 20px;
            box-shadow: 0 4px 6px rgba(0, 0, 0, 0.05);
            display: flex;
            flex-direction: column;
            gap: 16px;
        }
        
        .output-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
        }
        
        .output-content {
            padding: 16px;
            background: var(--background);
            border-radius: 12px;
            min-height: 200px;
            max-height: 400px;
            overflow: auto;
            color: var(--text);
        }
        
        .output-actions {
            display: flex;
            justify-content: flex-end;
            gap: 12px;
        }
        
        .output-btn {
            padding: 8px 16px;
            background: var(--background);
            border: none;
            border-radius: 8px;
            font-weight: 500;
            font-size: 14px;
            cursor: pointer;
            transition: all 0.2s;
            display: flex;
            align-items: center;
            gap: 6px;
            color: var(--text);
        }
        
        .output-btn:hover {
            background: var(--border);
        }
        
        .output-btn.primary {
            background: var(--primary);
            color: white;
        }
        
        .output-btn.primary:hover {
            background: var(--primary-dark);
        }
        
        .api-key-section {
            background: var(--card-bg);
            border-radius: 16px;
            padding: 20px;
            box-shadow: 0 4px 6px rgba(0, 0, 0, 0.05);
            margin-top: 20px;
        }
        
        .api-key-form {
            display: flex;
            gap: 12px;
        }
        
        .api-key-input {
            flex: 1;
            padding: 12px 16px;
            border: 1px solid var(--border);
            border-radius: 8px;
            font-size: 16px;
            background: var(--card-bg);
            color: var(--text);
        }
        
        .save-api-key {
            padding: 12px 24px;
            background: var(--primary);
            color: white;
            border: none;
            border-radius: 8px;
            font-weight: 600;
            font-size: 16px;
            cursor: pointer;
        }
        
        .save-api-key:hover {
            background: var(--primary-dark);
        }
        
        .file-info {
            display: flex;
            align-items: center;
            gap: 8px;
            padding: 8px 12px;
            background: var(--background);
            border-radius: 8px;
            margin-top: 12px;
            color: var(--text);
        }
        
        .file-info i {
            color: var(--primary);
        }
        
        .notification {
            position: fixed;
            top: 20px;
            right: 20px;
            padding: 16px 24px;
            background: var(--card-bg);
            border-left: 4px solid var(--success);
            border-radius: 8px;
            box-shadow: 0 4px 12px rgba(0, 0, 0, 0.1);
            display: flex;
            align-items: center;
            gap: 12px;
            transform: translateX(100%);
            transition: transform 0.3s;
            z-index: 1000;
            color: var(--text);
        }
        
        .notification.error {
            border-left: 4px solid var(--error);
        }
        
        .notification.show {
            transform: translateX(0);
        }
        
        .notification i {
            font-size: 24px;
            color: var(--success);
        }
        
        .notification.error i {
            color: var(--error);
        }
        
        .loading {
            display: inline-block;
            width: 20px;
            height: 20px;
            border: 3px solid rgba(99, 102, 241, 0.3);
            border-radius: 50%;
            border-top-color: var(--primary);
            animation: spin 1s linear infinite;
        }
        
        @keyframes spin {
            to { transform: rotate(360deg); }
        }
        
        footer {
            margin-top: 40px;
            text-align: center;
            color: var(--text-light);
            padding: 20px;
        }
        
        /* Modal Styles */
        .modal {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0, 0, 0, 0.5);
            display: flex;
            justify-content: center;
            align-items: center;
            z-index: 1001;
            opacity: 0;
            visibility: hidden;
            transition: all 0.3s;
        }
        
        .modal.show {
            opacity: 1;
            visibility: visible;
        }
        
        .modal-content {
            background: var(--card-bg);
            border-radius: 16px;
            padding: 30px;
            width: 90%;
            max-width: 600px;
            max-height: 80vh;
            overflow: auto;
            box-shadow: 0 10px 25px rgba(0, 0, 0, 0.2);
            position: relative;
            color: var(--text);
        }
        
        .modal-close {
            position: absolute;
            top: 20px;
            right: 20px;
            background: none;
            border: none;
            font-size: 24px;
            cursor: pointer;
            color: var(--text);
        }
        
        .modal-title {
            font-size: 24px;
            margin-bottom: 20px;
            color: var(--primary);
            display: flex;
            align-items: center;
            gap: 10px;
        }
        
        .settings-group {
            margin-bottom: 20px;
        }
        
        .settings-group-title {
            font-size: 18px;
            margin-bottom: 10px;
            color: var(--text);
        }
        
        .settings-option {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 10px 0;
            border-bottom: 1px solid var(--border);
        }
        
        .settings-option:last-child {
            border-bottom: none;
        }
        
        .switch {
            position: relative;
            display: inline-block;
            width: 50px;
            height: 24px;
        }
        
        .switch input {
            opacity: 0;
            width: 0;
            height: 0;
        }
        
        .slider {
            position: absolute;
            cursor: pointer;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background-color: var(--gray);
            transition: .4s;
            border-radius: 24px;
        }
        
        .slider:before {
            position: absolute;
            content: "";
            height: 16px;
            width: 16px;
            left: 4px;
            bottom: 4px;
            background-color: white;
            transition: .4s;
            border-radius: 50%;
        }
        
        input:checked + .slider {
            background-color: var(--primary);
        }
        
        input:checked + .slider:before {
            transform: translateX(26px);
        }
        
        .help-section {
            margin-bottom: 20px;
        }
        
        .help-section-title {
            font-size: 20px;
            margin-bottom: 10px;
            color: var(--primary);
        }
        
        .help-content {
            line-height: 1.6;
        }
        
        .help-list {
            padding-left: 20px;
            margin: 10px 0;
        }
        
        .help-list li {
            margin-bottom: 8px;
        }
        
        @media (max-width: 900px) {
            .main-content {
                grid-template-columns: 1fr;
            }
            
            header {
                flex-direction: column;
                gap: 16px;
            }
            
            nav {
                width: 100%;
                justify-content: center;
            }
            
            .api-key-form {
                flex-direction: column;
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <header>
            <div class="logo">
                <i class="fas fa-clipboard"></i>
                <span>Clipboard AI</span>
            </div>
            <nav>
                <button id="homeBtn"><i class="fas fa-home"></i> Home</button>
                <button id="settingsBtn"><i class="fas fa-cog"></i> Settings</button>
                <button id="helpBtn"><i class="fas fa-question-circle"></i> Help</button>
            </nav>
        </header>
        
        <div class="main-content">
            <div class="upload-section">
                <h2 class="section-title"><i class="fas fa-upload"></i> Upload File</h2>
                
                <div class="drop-zone" id="dropZone">
                    <i class="fas fa-cloud-upload-alt"></i>
                    <h3>Drag & Drop Your File Here</h3>
                    <p>Supported files: Text, PDF, Images, Audio</p>
                    <p>or</p>
                    <button class="process-btn">Select File</button>
                    <input type="file" id="fileInput" class="file-input">
                </div>
                
                <div class="file-info" id="fileInfo" style="display: none;">
                    <i class="fas fa-file"></i>
                    <span>No file selected</span>
                </div>
                
                <div class="actions-container">
                    <div class="action-group">
                        <h3 class="action-group-title">Text Actions</h3>
                        <div class="action-buttons">
                            <button class="action-btn" data-action="summarize"><i class="fas fa-compress"></i> Summarize</button>
                            <button class="action-btn" data-action="translate"><i class="fas fa-language"></i> Translate</button>
                            <button class="action-btn" data-action="explain"><i class="fas fa-lightbulb"></i> Explain</button>
                        </div>
                    </div>
                    
                    <div class="action-group">
                        <h3 class="action-group-title">Image Actions</h3>
                        <div class="action-buttons">
                            <button class="action-btn" data-action="describe"><i class="fas fa-comment"></i> Describe</button>
                            <button class="action-btn" data-action="enhance"><i class="fas fa-magic"></i> Enhance</button>
                            <button class="action-btn" data-action="extract"><i class="fas fa-qrcode"></i> Extract Text</button>
                        </div>
                    </div>
                    
                    <div class="action-group">
                        <h3 class="action-group-title">Audio Actions</h3>
                        <div class="action-buttons">
                            <button class="action-btn" data-action="transcribe"><i class="fas fa-keyboard"></i> Transcribe</button>
                            <button class="action-btn" data-action="summarize_audio"><i class="fas fa-compress"></i> Summarize</button>
                        </div>
                    </div>
                    
                    <button class="process-btn" id="processBtn">
                        <i class="fas fa-cogs"></i> Process File
                    </button>
                </div>
            </div>
            
            <div class="results-section">
                <div class="file-preview">
                    <div class="preview-header">
                        <h2 class="section-title"><i class="fas fa-file"></i> File Preview</h2>
                        <button class="output-btn" id="clearBtn"><i class="fas fa-trash"></i> Clear</button>
                    </div>
                    <div class="preview-content" id="previewContent">
                        <p style="text-align: center; color: var(--text-light); padding: 40px;">
                            File content will be displayed here after upload
                        </p>
                    </div>
                </div>
                
                <div class="ai-output">
                    <div class="output-header">
                        <h2 class="section-title"><i class="fas fa-robot"></i> AI Output</h2>
                        <button class="output-btn" id="copyBtn"><i class="fas fa-copy"></i> Copy</button>
                    </div>
                    <div class="output-content" id="outputContent">
                        <p style="text-align: center; color: var(--text-light); padding: 40px;">
                            AI results will appear here after processing
                        </p>
                    </div>
                    <div class="output-actions">
                        <button class="output-btn" id="exportBtn"><i class="fas fa-download"></i> Export</button>
                        <button class="output-btn primary" id="shareBtn"><i class="fas fa-share"></i> Share</button>
                    </div>
                </div>
            </div>
        </div>
        
        <div class="api-key-section">
            <h2 class="section-title"><i class="fas fa-key"></i> API Key Setup</h2>
            <p style="margin: 12px 0; color: var(--text-light);">
                To use Clipboard AI, you need to provide your OpenAI API key. Your key is stored locally and never sent to our servers.
            </p>
            <div class="api-key-form">
                <input type="password" class="api-key-input" id="apiKeyInput" placeholder="Enter your OpenAI API key">
                <button class="save-api-key" id="saveApiKey">Save Key</button>
            </div>
        </div>
    </div>
    
    <!-- Settings Modal -->
    <div class="modal" id="settingsModal">
        <div class="modal-content">
            <button class="modal-close" id="closeSettings">&times;</button>
            <h2 class="modal-title"><i class="fas fa-cog"></i> Settings</h2>
            
            <div class="settings-group">
                <h3 class="settings-group-title">Appearance</h3>
                <div class="settings-option">
                    <span>Dark Mode</span>
                    <label class="switch">
                        <input type="checkbox" id="darkModeToggle">
                        <span class="slider"></span>
                    </label>
                </div>
                <div class="settings-option">
                    <span>Animation Effects</span>
                    <label class="switch">
                        <input type="checkbox" id="animationsToggle" checked>
                        <span class="slider"></span>
                    </label>
                </div>
            </div>
            
            <div class="settings-group">
                <h3 class="settings-group-title">Processing</h3>
                <div class="settings-option">
                    <span>Default Model</span>
                    <select id="modelSelect" style="padding: 5px; border-radius: 5px; background: var(--background); color: var(--text);">
                        <option value="gpt-3.5">GPT-3.5 Turbo (Fast)</option>
                        <option value="gpt-4">GPT-4 (Higher Quality)</option>
                    </select>
                </div>
                <div class="settings-option">
                    <span>Auto-process Files</span>
                    <label class="switch">
                        <input type="checkbox" id="autoProcessToggle">
                        <span class="slider"></span>
                    </label>
                </div>
            </div>
            
            <div class="settings-group">
                <h3 class="settings-group-title">Privacy</h3>
                <div class="settings-option">
                    <span>Collect Usage Data</span>
                    <label class="switch">
                        <input type="checkbox" id="usageDataToggle">
                        <span class="slider"></span>
                    </label>
                </div>
                <div class="settings-option">
                    <span>Clear Local Data</span>
                    <button class="output-btn" id="clearDataBtn">Clear Now</button>
                </div>
            </div>
        </div>
    </div>
    
    <!-- Help Modal -->
    <div class="modal" id="helpModal">
        <div class="modal-content">
            <button class="modal-close" id="closeHelp">&times;</button>
            <h2 class="modal-title"><i class="fas fa-question-circle"></i> Help Center</h2>
            
            <div class="help-section">
                <h3 class="help-section-title">Getting Started</h3>
                <div class="help-content">
                    <p>Clipboard AI allows you to process various file types using AI capabilities. Follow these steps to get started:</p>
                    <ol class="help-list">
                        <li>Enter your OpenAI API key in the setup section</li>
                        <li>Drag and drop a file or click to select one</li>
                        <li>Choose an action based on the file type</li>
                        <li>Click "Process File" to generate results</li>
                        <li>Copy, export, or share the results as needed</li>
                    </ol>
                </div>
            </div>
            
            <div class="help-section">
                <h3 class="help-section-title">Supported File Types</h3>
                <div class="help-content">
                    <ul class="help-list">
                        <li><strong>Text:</strong> .txt, .html, .css, .js, .json, .xml</li>
                        <li><strong>Documents:</strong> .pdf (text extraction only)</li>
                        <li><strong>Images:</strong> .jpg, .jpeg, .png, .gif, .bmp</li>
                        <li><strong>Audio:</strong> .mp3, .wav, .ogg (transcription only)</li>
                    </ul>
                </div>
            </div>
            
            <div class="help-section">
                <h3 class="help-section-title">Troubleshooting</h3>
                <div class="help-content">
                    <p><strong>File not uploading?</strong> Ensure your file is one of the supported formats and under 10MB in size.</p>
                    <p><strong>API key not working?</strong> Verify your OpenAI API key is valid and has sufficient credits.</p>
                    <p><strong>Processing taking too long?</strong> Try using a smaller file or check your internet connection.</p>
                    <p><strong>Other issues?</strong> Try refreshing the page or clearing your browser data for this site.</p>
                </div>
            </div>
            
            <div class="help-section">
                <h3 class="help-section-title">FAQ</h3>
                <div class="help-content">
                    <p><strong>Is my data secure?</strong> Yes, all processing happens locally in your browser. Your files are never uploaded to our servers.</p>
                    <p><strong>What happens to my API key?</strong> Your API key is stored only in your browser's local storage and is never transmitted to our servers.</p>
                    <p><strong>Is this service free?</strong> The app itself is free, but you need to provide your own OpenAI API key, which may incur charges based on usage.</p>
                    <p><strong>Can I use this offline?</strong> The app requires an internet connection to communicate with the OpenAI API.</p>
                </div>
            </div>
        </div>
    </div>
    
    <div class="notification" id="notification">
        <i class="fas fa-check-circle"></i>
        <div>
            <h4>Success!</h4>
            <p>Your file has been processed successfully.</p>
        </div>
    </div>
    
    <footer>
        <p>© 2023 Clipboard AI. All rights reserved.</p>
        <p>This tool uses AI APIs for processing. Your data is processed on your device and never stored on our servers.</p>
    </footer>

    <script>
        document.addEventListener('DOMContentLoaded', function() {
            // Elements
            const dropZone = document.getElementById('dropZone');
            const fileInput = document.getElementById('fileInput');
            const fileInfo = document.getElementById('fileInfo');
            const previewContent = document.getElementById('previewContent');
            const outputContent = document.getElementById('outputContent');
            const processBtn = document.getElementById('processBtn');
            const clearBtn = document.getElementById('clearBtn');
            const copyBtn = document.getElementById('copyBtn');
            const exportBtn = document.getElementById('exportBtn');
            const shareBtn = document.getElementById('shareBtn');
            const apiKeyInput = document.getElementById('apiKeyInput');
            const saveApiKey = document.getElementById('saveApiKey');
            const notification = document.getElementById('notification');
            const homeBtn = document.getElementById('homeBtn');
            const settingsBtn = document.getElementById('settingsBtn');
            const helpBtn = document.getElementById('helpBtn');
            const settingsModal = document.getElementById('settingsModal');
            const helpModal = document.getElementById('helpModal');
            const closeSettings = document.getElementById('closeSettings');
            const closeHelp = document.getElementById('closeHelp');
            const darkModeToggle = document.getElementById('darkModeToggle');
            const animationsToggle = document.getElementById('animationsToggle');
            const modelSelect = document.getElementById('modelSelect');
            const autoProcessToggle = document.getElementById('autoProcessToggle');
            const usageDataToggle = document.getElementById('usageDataToggle');
            const clearDataBtn = document.getElementById('clearDataBtn');
            
            let currentFile = null;
            let currentFileType = null;
            let selectedAction = null;
            
            // Initialize settings
            initializeSettings();
            
            // Load API key from localStorage if available
            const savedApiKey = localStorage.getItem('clipboardAI_apiKey');
            if (savedApiKey) {
                apiKeyInput.value = savedApiKey;
            }
            
            // Setup drop zone
            dropZone.addEventListener('click', () => {
                fileInput.click();
            });
            
            fileInput.addEventListener('change', handleFileSelect);
            
            dropZone.addEventListener('dragover', (e) => {
                e.preventDefault();
                dropZone.style.borderColor = 'var(--primary)';
                dropZone.style.backgroundColor = 'var(--background)';
            });
            
            dropZone.addEventListener('dragleave', () => {
                dropZone.style.borderColor = 'var(--border)';
                dropZone.style.backgroundColor = 'transparent';
            });
            
            dropZone.addEventListener('drop', (e) => {
                e.preventDefault();
                dropZone.style.borderColor = 'var(--border)';
                dropZone.style.backgroundColor = 'transparent';
                
                if (e.dataTransfer.files.length) {
                    handleFile(e.dataTransfer.files[0]);
                }
            });
            
            // Action buttons
            document.querySelectorAll('.action-btn').forEach(btn => {
                btn.addEventListener('click', function() {
                    document.querySelectorAll('.action-btn').forEach(b => b.classList.remove('active'));
                    this.classList.add('active');
                    selectedAction = this.dataset.action;
                });
            });
            
            // Process button
            processBtn.addEventListener('click', processFile);
            
            // Clear button
            clearBtn.addEventListener('click', clearAll);
            
            // Copy button
            copyBtn.addEventListener('click', copyOutput);
            
            // Export button
            exportBtn.addEventListener('click', exportOutput);
            
            // Share button
            shareBtn.addEventListener('click', shareOutput);
            
            // Save API key
            saveApiKey.addEventListener('click', () => {
                const key = apiKeyInput.value.trim();
                if (key) {
                    localStorage.setItem('clipboardAI_apiKey', key);
                    showNotification('API key saved successfully!');
                } else {
                    showNotification('Please enter a valid API key', 'error');
                }
            });
            
            // Modal handlers
            settingsBtn.addEventListener('click', () => {
                settingsModal.classList.add('show');
            });
            
            helpBtn.addEventListener('click', () => {
                helpModal.classList.add('show');
            });
            
            closeSettings.addEventListener('click', () => {
                settingsModal.classList.remove('show');
            });
            
            closeHelp.addEventListener('click', () => {
                helpModal.classList.remove('show');
            });
            
            // Close modals when clicking outside
            window.addEventListener('click', (e) => {
                if (e.target === settingsModal) {
                    settingsModal.classList.remove('show');
                }
                if (e.target === helpModal) {
                    helpModal.classList.remove('show');
                }
            });
            
            // Settings handlers
            darkModeToggle.addEventListener('change', toggleDarkMode);
            animationsToggle.addEventListener('change', () => {
                localStorage.setItem('clipboardAI_animations', animationsToggle.checked);
            });
            modelSelect.addEventListener('change', () => {
                localStorage.setItem('clipboardAI_model', modelSelect.value);
            });
            autoProcessToggle.addEventListener('change', () => {
                localStorage.setItem('clipboardAI_autoProcess', autoProcessToggle.checked);
            });
            usageDataToggle.addEventListener('change', () => {
                localStorage.setItem('clipboardAI_usageData', usageDataToggle.checked);
            });
            clearDataBtn.addEventListener('click', clearLocalData);
            
            // Handle file selection
            function handleFileSelect(e) {
                if (e.target.files.length) {
                    handleFile(e.target.files[0]);
                }
            }
            
            // Process the selected file
            function handleFile(file) {
                currentFile = file;
                const fileSize = (file.size / 1024 / 1024).toFixed(2); // MB
                
                fileInfo.style.display = 'flex';
                fileInfo.querySelector('span').textContent = `${file.name} (${fileSize} MB)`;
                
                // Determine file type
                if (file.type.startsWith('image/')) {
                    currentFileType = 'image';
                } else if (file.type.startsWith('audio/')) {
                    currentFileType = 'audio';
                } else if (file.type === 'application/pdf') {
                    currentFileType = 'pdf';
                } else if (file.type.startsWith('text/')) {
                    currentFileType = 'text';
                } else {
                    currentFileType = 'unknown';
                }
                
                // Show preview based on file type
                if (currentFileType === 'image') {
                    const reader = new FileReader();
                    reader.onload = function(e) {
                        previewContent.innerHTML = `<img src="${e.target.result}" alt="Preview">`;
                    };
                    reader.readAsDataURL(file);
                } else if (currentFileType === 'text') {
                    const reader = new FileReader();
                    reader.onload = function(e) {
                        previewContent.innerHTML = `<textarea readonly>${e.target.result}</textarea>`;
                    };
                    reader.readAsText(file);
                } else {
                    previewContent.innerHTML = `
                        <div style="text-align: center; padding: 30px;">
                            <i class="fas fa-file" style="font-size: 48px; color: var(--primary); margin-bottom: 16px;"></i>
                            <p>Preview not available for ${currentFileType} files</p>
                        </div>
                    `;
                }
                
                // Auto-process if enabled
                if (localStorage.getItem('clipboardAI_autoProcess') === 'true') {
                    processFile();
                }
            }
            
            // Process the file with AI
            function processFile() {
                const apiKey = localStorage.getItem('clipboardAI_apiKey');
                
                if (!apiKey) {
                    showNotification('Please enter your API key first', 'error');
                    return;
                }
                
                if (!currentFile) {
                    showNotification('Please select a file first', 'error');
                    return;
                }
                
                if (!selectedAction) {
                    showNotification('Please select an action first', 'error');
                    return;
                }
                
                // Show loading state
                outputContent.innerHTML = `
                    <div style="text-align: center; padding: 40px;">
                        <div class="loading" style="margin: 0 auto;"></div>
                        <p style="margin-top: 16px;">Processing your file with AI...</p>
                    </div>
                `;
                
                // Simulate AI processing (in a real app, you would call the API here)
                setTimeout(() => {
                    let result = '';
                    
                    if (currentFileType === 'text') {
                        if (selectedAction === 'summarize') {
                            result = `
                                <h3>Summary</h3>
                                <p>This document appears to be a text file containing information about AI and its applications. The text discusses how AI can be used to process various types of files and extract meaningful insights from them.</p>
                                
                                <h3>Key Points</h3>
                                <ul>
                                    <li>AI can process text, images, audio, and other file types</li>
                                    <li>The technology enables automatic summarization and translation</li>
                                    <li>AI tools can enhance productivity and creativity</li>
                                </ul>
                                
                                <h3>Sentiment</h3>
                                <p>Positive - The text expresses optimism about AI capabilities</p>
                            `;
                        } else if (selectedAction === 'translate') {
                            result = `
                                <h3>Translation</h3>
                                <p>This text appears to be in English. Here's a Spanish translation:</p>
                                <p>Este documento parece ser un archivo de texto que contiene información sobre IA y sus aplicaciones. El texto discute cómo la IA puede usarse para procesar varios tipos de archivos y extraer información significativa de ellos.</p>
                                
                                <h3>Translation Quality</h3>
                                <p>High - The translation accurately captures the meaning of the original text</p>
                            `;
                        } else if (selectedAction === 'explain') {
                            result = `
                                <h3>Explanation</h3>
                                <p>This text discusses artificial intelligence and its applications in file processing. It explains how AI algorithms can analyze different types of files to extract useful information and perform tasks like summarization, translation, and content analysis.</p>
                                
                                <h3>Technical Details</h3>
                                <p>The text references natural language processing (NLP) and computer vision technologies that enable AI systems to understand and process human language and visual content.</p>
                            `;
                        }
                    } else if (currentFileType === 'image') {
                        if (selectedAction === 'describe') {
                            result = `
                                <h3>Image Description</h3>
                                <p>This image appears to be a screenshot of a modern AI application interface. It shows a clean layout with a file upload section, processing options, and a results area.</p>
                                
                                <h3>Key Elements</h3>
                                <ul>
                                    <li>Modern UI with blue and white color scheme</li>
                                    <li>Drag-and-drop file upload area</li>
                                    <li>Multiple processing options for different file types</li>
                                    <li>Clean result display with formatting options</li>
                                </ul>
                                
                                <h3>Estimated Context</h3>
                                <p>This is likely a demonstration interface for an AI-powered file processing tool similar to Clipboard AI.</p>
                            `;
                        } else if (selectedAction === 'enhance') {
                            result = `
                                <h3>Image Enhancement Suggestions</h3>
                                <p>Based on the image analysis, here are some enhancement suggestions:</p>
                                
                                <ul>
                                    <li><strong>Brightness:</strong> Increase by 15% for better visibility</li>
                                    <li><strong>Contrast:</strong> Adjust to improve text readability</li>
                                    <li><strong>Sharpness:</strong> Apply mild sharpening to enhance details</li>
                                    <li><strong>Color Balance:</strong> Slightly adjust to reduce blue tint</li>
                                </ul>
                                
                                <h3>Recommended Tools</h3>
                                <p>For best results, use professional image editing software like Adobe Photoshop or GIMP with these settings.</p>
                            `;
                        } else if (selectedAction === 'extract') {
                            result = `
                                <h3>Extracted Text</h3>
                                <p>The image contains the following text elements:</p>
                                
                                <ul>
                                    <li>Clipboard AI</li>
                                    <li>Your Intelligent File Assistant</li>
                                    <li>Drag & Drop Your File Here</li>
                                    <li>Supported files: Text, PDF, Images, Audio</li>
                                    <li>Process File</li>
                                </ul>
                                
                                <h3>Text Accuracy</h3>
                                <p>High - The OCR algorithm successfully extracted all visible text with high confidence.</p>
                            `;
                        }
                    } else if (currentFileType === 'audio') {
                        if (selectedAction === 'transcribe') {
                            result = `
                                <h3>Transcription</h3>
                                <p>Hello, this is a demonstration of the AI audio processing capabilities. This tool can transcribe audio files, summarize conversations, and extract key information from recordings.</p>
                                
                                <p>The application supports multiple audio formats and can handle various accents and speaking styles. For best results, ensure your audio is clear and has minimal background noise.</p>
                                
                                <h3>Confidence Score</h3>
                                <p>92% - The transcription is highly accurate with minimal errors.</p>
                            `;
                        } else if (selectedAction === 'summarize_audio') {
                            result = `
                                <h3>Audio Summary</h3>
                                <p>This audio recording demonstrates the capabilities of an AI-powered audio processing tool. The speaker explains that the tool can transcribe audio, summarize content, and extract key information.</p>
                                
                                <h3>Key Points</h3>
                                <ul>
                                    <li>AI can process various audio formats</li>
                                    <li>The tool supports multiple languages and accents</li>
                                    <li>Audio quality affects transcription accuracy</li>
                                    <li>The system can summarize long recordings</li>
                                </ul>
                                
                                <h3>Recommended Actions</h3>
                                <p>For better results, ensure clear audio quality and minimize background noise during recordings.</p>
                            `;
                        }
                    } else {
                        result = `
                            <h3>Analysis Complete</h3>
                            <p>The AI has successfully processed your ${currentFileType} file. While specific content analysis is limited for this file type, the system has successfully read and interpreted the file metadata and structure.</p>
                            
                            <h3>File Information</h3>
                            <ul>
                                <li><strong>Type:</strong> ${currentFileType} file</li>
                                <li><strong>Size:</strong> ${(currentFile.size / 1024 / 1024).toFixed(2)} MB</li>
                                <li><strong>Last Modified:</strong> ${new Date(currentFile.lastModified).toLocaleDateString()}</li>
                            </ul>
                            
                            <h3>Recommended Actions</h3>
                            <ul>
                                <li>Convert to a more AI-friendly format for deeper analysis</li>
                                <li>Use specialized tools for this specific file type</li>
                                <li>Consider extracting text content if possible</li>
                            </ul>
                        `;
                    }
                    
                    outputContent.innerHTML = result;
                    showNotification('File processed successfully!');
                }, 2000);
            }
            
            // Clear all selections
            function clearAll() {
                currentFile = null;
                currentFileType = null;
                selectedAction = null;
                fileInput.value = '';
                fileInfo.style.display = 'none';
                document.querySelectorAll('.action-btn').forEach(btn => btn.classList.remove('active'));
                previewContent.innerHTML = '<p style="text-align: center; color: var(--text-light); padding: 40px;">File content will be displayed here after upload</p>';
                outputContent.innerHTML = '<p style="text-align: center; color: var(--text-light); padding: 40px;">AI results will appear here after processing</p>';
            }
            
            // Copy output to clipboard
            function copyOutput() {
                const textToCopy = outputContent.textContent;
                
                navigator.clipboard.writeText(textToCopy).then(() => {
                    showNotification('Output copied to clipboard!');
                }).catch(err => {
                    showNotification('Failed to copy output', 'error');
                });
            }
            
            // Export output
            function exportOutput() {
                const textToExport = outputContent.innerHTML;
                const blob = new Blob([textToExport], { type: 'text/html' });
                const url = URL.createObjectURL(blob);
                const a = document.createElement('a');
                a.href = url;
                a.download = 'clipboard-ai-output.html';
                document.body.appendChild(a);
                a.click();
                document.body.removeChild(a);
                URL.revokeObjectURL(url);
                
                showNotification('Output exported successfully!');
            }
            
            // Share output
            function shareOutput() {
                if (navigator.share) {
                    navigator.share({
                        title: 'Clipboard AI Output',
                        text: outputContent.textContent,
                        url: window.location.href
                    }).then(() => {
                        showNotification('Output shared successfully!');
                    }).catch(err => {
                        showNotification('Sharing failed', 'error');
                    });
                } else {
                    showNotification('Web Share API not supported in your browser', 'error');
                }
            }
            
            // Show notification
            function showNotification(message, type = 'success') {
                const icon = notification.querySelector('i');
                const title = notification.querySelector('h4');
                const text = notification.querySelector('p');
                
                if (type === 'success') {
                    icon.className = 'fas fa-check-circle';
                    notification.classList.remove('error');
                    title.textContent = 'Success!';
                } else {
                    icon.className = 'fas fa-exclamation-circle';
                    notification.classList.add('error');
                    title.textContent = 'Error!';
                }
                
                text.textContent = message;
                
                notification.classList.add('show');
                
                setTimeout(() => {
                    notification.classList.remove('show');
                }, 3000);
            }
            
            // Initialize settings from localStorage
            function initializeSettings() {
                // Dark mode
                const darkMode = localStorage.getItem('clipboardAI_darkMode') === 'true';
                darkModeToggle.checked = darkMode;
                if (darkMode) {
                    document.body.classList.add('dark-mode');
                }
                
                // Other settings
                animationsToggle.checked = localStorage.getItem('clipboardAI_animations') !== 'false';
                modelSelect.value = localStorage.getItem('clipboardAI_model') || 'gpt-3.5';
                autoProcessToggle.checked = localStorage.getItem('clipboardAI_autoProcess') === 'true';
                usageDataToggle.checked = localStorage.getItem('clipboardAI_usageData') === 'true';
            }
            
            // Toggle dark mode
            function toggleDarkMode() {
                if (darkModeToggle.checked) {
                    document.body.classList.add('dark-mode');
                    localStorage.setItem('clipboardAI_darkMode', 'true');
                } else {
                    document.body.classList.remove('dark-mode');
                    localStorage.setItem('clipboardAI_darkMode', 'false');
                }
            }
            
            // Clear local data
            function clearLocalData() {
                if (confirm('Are you sure you want to clear all local data? This will remove your API key and all settings.')) {
                    localStorage.clear();
                    initializeSettings();
                    apiKeyInput.value = '';
                    showNotification('Local data cleared successfully!');
                }
            }
        });
    </script>
</body>
</html>
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Algorithm Transparency Lens</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <style>
        :root {
            --primary: #2563eb;
            --primary-dark: #1d4ed8;
            --secondary: #4b5563;
            --dark: #1f2937;
            --light: #f9fafb;
            --lighter: #f3f4f6;
            --success: #10b981;
            --warning: #f59e0b;
            --danger: #ef4444;
            --info: #3b82f6;
            --engagement: #ec4899;
            --profit: #f59e0b;
            --political: #8b5cf6;
            --neutral: #10b981;
            --border: #e5e7eb;
            --shadow: 0 4px 6px -1px rgba(0, 0, 0, 0.1), 0 2px 4px -1px rgba(0, 0, 0, 0.06);
            --shadow-lg: 0 10px 15px -3px rgba(0, 0, 0, 0.1), 0 4px 6px -2px rgba(0, 0, 0, 0.05);
        }

        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: 'Inter', -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen, Ubuntu, Cantarell, sans-serif;
        }

        body {
            background: linear-gradient(135deg, #f9fafb 0%, #f3f4f6 100%);
            color: #333;
            line-height: 1.6;
            min-height: 100vh;
            padding: 0;
        }

        .container {
            max-width: 100%;
            margin: 0 auto;
            padding: 16px;
        }

        header {
            text-align: center;
            margin-bottom: 24px;
            padding: 24px 16px;
            background: linear-gradient(to right, var(--primary), var(--primary-dark));
            color: white;
            border-radius: 16px;
            box-shadow: var(--shadow-lg);
        }

        h1 {
            font-size: 1.8rem;
            margin-bottom: 12px;
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 12px;
            font-weight: 800;
        }

        .tagline {
            font-size: 1rem;
            opacity: 0.9;
            max-width: 100%;
            margin: 0 auto;
            font-weight: 300;
        }

        .main-content {
            display: flex;
            flex-direction: column;
            gap: 25px;
            margin-bottom: 30px;
        }

        @media (min-width: 992px) {
            .main-content {
                flex-direction: row;
            }
            
            .input-section, .output-section {
                flex: 1;
            }
        }

        .card {
            background: white;
            border-radius: 16px;
            box-shadow: var(--shadow);
            padding: 20px;
            margin-bottom: 20px;
            transition: transform 0.3s ease, box-shadow 0.3s ease;
        }

        .card:hover {
            transform: translateY(-5px);
            box-shadow: var(--shadow-lg);
        }

        .card-header {
            font-weight: 700;
            margin-bottom: 16px;
            color: var(--dark);
            font-size: 1.2rem;
            padding-bottom: 12px;
            border-bottom: 2px solid var(--border);
            display: flex;
            align-items: center;
            gap: 10px;
        }

        textarea {
            width: 100%;
            min-height: 150px;
            padding: 16px;
            border: 2px solid var(--border);
            border-radius: 12px;
            resize: vertical;
            font-size: 16px;
            margin-bottom: 16px;
            transition: border-color 0.3s;
            line-height: 1.6;
        }

        textarea:focus {
            outline: none;
            border-color: var(--primary);
            box-shadow: 0 0 0 3px rgba(37, 99, 235, 0.1);
        }

        .button-group {
            display: grid;
            grid-template-columns: 1fr;
            gap: 12px;
            margin-bottom: 20px;
        }

        @media (min-width: 576px) {
            .button-group {
                grid-template-columns: repeat(2, 1fr);
            }
        }

        button {
            padding: 16px;
            border: none;
            border-radius: 12px;
            cursor: pointer;
            font-weight: 600;
            transition: all 0.3s ease;
            font-size: 16px;
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 10px;
        }

        button:hover {
            transform: translateY(-3px);
            box-shadow: var(--shadow);
        }

        #engagement-btn {
            background: linear-gradient(to right, var(--engagement), #db2777);
            color: white;
        }

        #profit-btn {
            background: linear-gradient(to right, var(--profit), #d97706);
            color: white;
        }

        #political-btn {
            background: linear-gradient(to right, var(--political), #7c3aed);
            color: white;
        }

        #neutral-btn {
            background: linear-gradient(to right, var(--neutral), #059669);
            color: white;
        }

        .metrics {
            display: grid;
            grid-template-columns: repeat(2, 1fr);
            gap: 12px;
            margin-top: 16px;
        }

        .metric {
            background: var(--lighter);
            padding: 14px;
            border-radius: 12px;
            text-align: center;
            box-shadow: var(--shadow);
        }

        .metric-value {
            font-size: 1.5rem;
            font-weight: 800;
            margin: 8px 0;
        }

        .metric-label {
            font-size: 0.8rem;
            color: var(--secondary);
            font-weight: 500;
        }

        .panel-content {
            min-height: 200px;
            padding: 16px;
            line-height: 1.8;
            border: 2px solid var(--border);
            border-radius: 12px;
            overflow-y: auto;
            max-height: 400px;
            font-size: 16px;
            background: var(--lighter);
        }

        .manipulative {
            background-color: rgba(236, 72, 153, 0.15);
            border-bottom: 2px solid var(--engagement);
            padding: 0 4px;
            font-weight: 600;
            border-radius: 2px;
        }

        .political {
            background-color: rgba(139, 92, 246, 0.15);
            border-bottom: 2px solid var(--political);
            padding: 0 4px;
            font-weight: 600;
            border-radius: 2px;
        }

        .neutral {
            background-color: rgba(16, 185, 129, 0.15);
            border-bottom: 2px solid var(--neutral);
            padding: 0 4px;
            font-weight: 600;
            border-radius: 2px;
        }

        .ad-highlight {
            background-color: rgba(245, 158, 11, 0.15);
            border-bottom: 2px dashed var(--profit);
            padding: 0 4px;
            font-style: italic;
            border-radius: 2px;
        }

        footer {
            text-align: center;
            padding: 20px;
            color: var(--secondary);
            font-size: 14px;
            margin-top: 20px;
            background: white;
            border-radius: 16px;
            box-shadow: var(--shadow);
        }

        .tabs {
            display: flex;
            gap: 8px;
            margin-bottom: 16px;
            border-bottom: 2px solid var(--border);
            padding-bottom: 12px;
            overflow-x: auto;
            white-space: nowrap;
            -webkit-overflow-scrolling: touch;
        }

        .tab {
            padding: 10px 16px;
            background: var(--lighter);
            border-radius: 8px;
            cursor: pointer;
            transition: all 0.3s;
            font-weight: 500;
            flex-shrink: 0;
        }

        .tab.active {
            background: var(--primary);
            color: white;
        }

        .tab-content {
            display: none;
        }

        .tab-content.active {
            display: block;
        }

        .analysis-result {
            margin-top: 16px;
            padding: 16px;
            background: var(--lighter);
            border-radius: 12px;
            box-shadow: var(--shadow);
        }

        .bias-indicator {
            height: 10px;
            background: var(--border);
            border-radius: 5px;
            margin: 10px 0;
            overflow: hidden;
        }

        .bias-value {
            height: 100%;
            border-radius: 5px;
        }

        .engagement-bias {
            background: var(--engagement);
        }

        .profit-bias {
            background: var(--profit);
        }

        .political-bias {
            background: var(--political);
        }

        .tooltip {
            position: relative;
            display: inline-block;
            cursor: help;
        }

        .tooltip .tooltiptext {
            visibility: hidden;
            width: 180px;
            background-color: var(--dark);
            color: #fff;
            text-align: center;
            border-radius: 6px;
            padding: 8px;
            position: absolute;
            z-index: 1;
            bottom: 125%;
            left: 50%;
            margin-left: -90px;
            opacity: 0;
            transition: opacity 0.3s;
            font-size: 12px;
            font-weight: normal;
        }

        .tooltip:hover .tooltiptext {
            visibility: visible;
            opacity: 1;
        }

        .stats-container {
            display: grid;
            grid-template-columns: repeat(2, 1fr);
            gap: 12px;
            margin-top: 16px;
        }

        .stat {
            text-align: center;
            padding: 12px;
            background: var(--lighter);
            border-radius: 12px;
        }

        .stat-value {
            font-size: 1.5rem;
            font-weight: 700;
            color: var(--primary);
        }

        .stat-label {
            font-size: 0.8rem;
            color: var(--secondary);
        }

        .logo {
            font-size: 2rem;
            background: linear-gradient(135deg, var(--primary) 0%, var(--primary-dark) 100%);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            margin-bottom: 8px;
        }

        .powered-by {
            font-size: 0.8rem;
            color: var(--secondary);
            margin-top: 8px;
        }

        .word-count {
            font-size: 0.8rem;
            color: var(--secondary);
            margin-top: 8px;
        }
        
        .loading {
            display: inline-block;
            width: 18px;
            height: 18px;
            border: 2px solid rgba(255,255,255,.3);
            border-radius: 50%;
            border-top-color: #fff;
            animation: spin 1s ease-in-out infinite;
        }
        
        @keyframes spin {
            to { transform: rotate(360deg); }
        }
        
        .analysis-detail {
            margin-top: 12px;
            padding: 12px;
            background: white;
            border-radius: 10px;
            box-shadow: var(--shadow);
        }
        
        .action-buttons {
            display: flex;
            gap: 10px;
            margin-top: 16px;
        }
        
        .action-btn {
            padding: 12px;
            border-radius: 10px;
            background: var(--lighter);
            border: none;
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 8px;
            font-weight: 500;
            flex: 1;
        }
        
        .action-btn.primary {
            background: var(--primary);
            color: white;
        }

        @media (min-width: 768px) {
            .container {
                max-width: 1200px;
                padding: 24px;
            }
            
            h1 {
                font-size: 2.5rem;
            }
            
            .tagline {
                font-size: 1.2rem;
            }
            
            .button-group {
                grid-template-columns: repeat(2, 1fr);
            }
            
            .stats-container {
                grid-template-columns: repeat(3, 1fr);
            }
        }
        
        @media (prefers-color-scheme: dark) {
            :root {
                --light: #1f2937;
                --lighter: #374151;
                --dark: #f9fafb;
                --secondary: #d1d5db;
                --border: #4b5563;
            }
            
            body {
                background: #111827;
                color: var(--dark);
            }
            
            .card, footer, .metric, .stat, .analysis-result, .analysis-detail {
                background: #1f2937;
            }
            
            textarea, .panel-content {
                background: #374151;
                border-color: #4b5563;
                color: white;
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <header>
            <div class="logo">
                <i class="fas fa-search-plus"></i>
            </div>
            <h1>Algorithm Transparency Lens</h1>
            <p class="tagline">Revealing how algorithms manipulate content for engagement, profit, and political influence</p>
        </header>
        
        <div class="main-content">
            <div class="input-section">
                <div class="card">
                    <div class="card-header">
                        <i class="fas fa-pencil-alt"></i> Input Text
                    </div>
                    <textarea id="input-text" placeholder="Paste or type any text here to analyze...">Social media platforms have revolutionized how people communicate and access information. These platforms use sophisticated algorithms to curate content for users. While this can help people discover relevant information, it also creates filter bubbles and can amplify extreme content. Many experts are concerned about the societal impact of these algorithms and their effect on public discourse.</textarea>
                    
                    <div class="button-group">
                        <button id="engagement-btn">
                            <i class="fas fa-fire"></i> Engagement Bias
                        </button>
                        <button id="profit-btn">
                            <i class="fas fa-dollar-sign"></i> Profit Bias
                        </button>
                        <button id="political-btn">
                            <i class="fas fa-landmark"></i> Political Bias
                        </button>
                        <button id="neutral-btn">
                            <i class="fas fa-balance-scale"></i> Neutral Output
                        </button>
                    </div>
                    
                    <div class="metrics">
                        <div class="metric">
                            <div class="metric-label">Manipulation Score</div>
                            <div class="metric-value" id="manipulation-score">0%</div>
                        </div>
                        <div class="metric">
                            <div class="metric-label">Bias Detected</div>
                            <div class="metric-value" id="bias-level">None</div>
                        </div>
                        <div class="metric">
                            <div class="metric-label">Emotional Language</div>
                            <div class="metric-value" id="emotional-score">0%</div>
                        </div>
                        <div class="metric">
                            <div class="metric-label">Ad Density</div>
                            <div class="metric-value" id="ad-density">0%</div>
                        </div>
                    </div>
                    
                    <div class="word-count" id="word-count">Words: 0 | Characters: 0</div>
                    
                    <div class="action-buttons">
                        <button class="action-btn" id="clear-btn">
                            <i class="fas fa-trash"></i> Clear
                        </button>
                        <button class="action-btn primary" id="analyze-btn">
                            <i class="fas fa-chart-line"></i> Quick Analyze
                        </button>
                    </div>
                </div>
            </div>
            
            <div class="output-section">
                <div class="card">
                    <div class="card-header">
                        <i class="fas fa-code"></i> Algorithmic Output
                    </div>
                    
                    <div class="tabs">
                        <div class="tab active" data-tab="output">Output</div>
                        <div class="tab" data-tab="analysis">Analysis</div>
                        <div class="tab" data-tab="comparison">Comparison</div>
                    </div>
                    
                    <div class="tab-content active" id="output-tab">
                        <div id="output-text" class="panel-content">
                            <p>Output will appear here after analysis...</p>
                        </div>
                        
                        <div class="action-buttons">
                            <button class="action-btn" id="copy-btn">
                                <i class="fas fa-copy"></i> Copy Output
                            </button>
                        </div>
                    </div>
                    
                    <div class="tab-content" id="analysis-tab">
                        <div class="panel-content">
                            <h3>Text Analysis</h3>
                            <p id="analysis-summary">No analysis performed yet. Select a bias type to analyze your text.</p>
                            
                            <div class="stats-container">
                                <div class="stat">
                                    <div class="stat-value" id="emotional-impact">0%</div>
                                    <div class="stat-label">Emotional Impact</div>
                                </div>
                                <div class="stat">
                                    <div class="stat-value" id="ad-content">0%</div>
                                    <div class="stat-label">Ad Content</div>
                                </div>
                                <div class="stat">
                                    <div class="stat-value" id="persuasion-score">0%</div>
                                    <div class="stat-label">Persuasion Score</div>
                                </div>
                            </div>
                            
                            <h4>Bias Indicators</h4>
                            <p>Engagement Bias: <span class="tooltip" id="engagement-bias-value">0%<span class="tooltiptext">Emotional language and sensationalism</span></span></p>
                            <div class="bias-indicator">
                                <div class="bias-value engagement-bias" id="engagement-bias-bar" style="width: 0%"></div>
                            </div>
                            
                            <p>Profit Bias: <span class="tooltip" id="profit-bias-value">0%<span class="tooltiptext">Commercial language and advertising cues</span></span></p>
                            <div class="bias-indicator">
                                <div class="bias-value profit-bias" id="profit-bias-bar" style="width: 0%"></div>
                            </div>
                            
                            <p>Political Bias: <span class="tooltip" id="political-bias-value">0%<span class="tooltiptext">Ideological framing and partisan language</span></span></p>
                            <div class="bias-indicator">
                                <div class="bias-value political-bias" id="political-bias-bar" style="width: 0%"></div>
                            </div>
                            
                            <div class="analysis-result">
                                <h4>Recommendation</h4>
                                <p id="recommendation-text">Submit text for analysis to receive recommendations.</p>
                            </div>
                        </div>
                    </div>
                    
                    <div class="tab-content" id="comparison-tab">
                        <div class="panel-content">
                            <h3>Comparison with Original</h3>
                            <p id="comparison-summary">No comparison data available yet.</p>
                            
                            <div class="analysis-detail">
                                <h4>Changes Detected</h4>
                                <ul id="changes-list">
                                    <li>No changes detected yet</li>
                                </ul>
                            </div>
                            
                            <h4>Impact Assessment</h4>
                            <p id="impact-assessment">Submit text for analysis to see potential impacts.</p>
                        </div>
                    </div>
                </div>
                
                <div class="card">
                    <div class="card-header">
                        <i class="fas fa-chart-line"></i> Algorithm Impact Metrics
                    </div>
                    <div class="stats-container">
                        <div class="stat">
                            <div class="stat-value" id="users-affected">0%</div>
                            <div class="stat-label">Users Affected</div>
                        </div>
                        <div class="stat">
                            <div class="stat-value" id="behavior-change">0%</div>
                            <div class="stat-label">Behavior Change</div>
                        </div>
                        <div class="stat">
                            <div class="stat-value" id="revenue-impact">0%</div>
                            <div class="stat-label">Revenue Impact</div>
                        </div>
                    </div>
                    <p class="powered-by">Powered by OATL's proprietary algorithm analysis engine</p>
                </div>
            </div>
        </div>
        
        <footer>
            <p>OATL – Open Algorithm Transparency Lens. Awareness is power.</p>
            <p>This tool is for educational purposes to demonstrate how algorithms can manipulate content.</p>
        </footer>
    </div>

    <script>
        document.addEventListener('DOMContentLoaded', function() {
            const inputTextarea = document.getElementById('input-text');
            const outputTextDiv = document.getElementById('output-text');
            
            const engagementBtn = document.getElementById('engagement-btn');
            const profitBtn = document.getElementById('profit-btn');
            const politicalBtn = document.getElementById('political-btn');
            const neutralBtn = document.getElementById('neutral-btn');
            const clearBtn = document.getElementById('clear-btn');
            const analyzeBtn = document.getElementById('analyze-btn');
            const copyBtn = document.getElementById('copy-btn');
            
            const tabs = document.querySelectorAll('.tab');
            const tabContents = document.querySelectorAll('.tab-content');
            
            // Word count update
            function updateWordCount() {
                const text = inputTextarea.value;
                const wordCount = text.trim() ? text.trim().split(/\s+/).length : 0;
                const charCount = text.length;
                document.getElementById('word-count').textContent = `Words: ${wordCount} | Characters: ${charCount}`;
            }
            
            inputTextarea.addEventListener('input', updateWordCount);
            updateWordCount();
            
            // Clear button functionality
            clearBtn.addEventListener('click', function() {
                inputTextarea.value = '';
                outputTextDiv.innerHTML = '<p>Output will appear here after analysis...</p>';
                updateWordCount();
                resetMetrics();
            });
            
            // Copy button functionality
            copyBtn.addEventListener('click', function() {
                const outputText = outputTextDiv.innerText;
                navigator.clipboard.writeText(outputText).then(() => {
                    const originalText = copyBtn.innerHTML;
                    copyBtn.innerHTML = '<i class="fas fa-check"></i> Copied!';
                    setTimeout(() => {
                        copyBtn.innerHTML = originalText;
                    }, 2000);
                });
            });
            
            // Quick analyze button
            analyzeBtn.addEventListener('click', function() {
                engagementBtn.click();
            });
            
            // Reset metrics function
            function resetMetrics() {
                document.getElementById('manipulation-score').textContent = '0%';
                document.getElementById('bias-level').textContent = 'None';
                document.getElementById('emotional-score').textContent = '0%';
                document.getElementById('ad-density').textContent = '0%';
                
                document.getElementById('emotional-impact').textContent = '0%';
                document.getElementById('ad-content').textContent = '0%';
                document.getElementById('persuasion-score').textContent = '0%';
                
                document.getElementById('engagement-bias-value').textContent = '0%';
                document.getElementById('engagement-bias-bar').style.width = '0%';
                
                document.getElementById('profit-bias-value').textContent = '0%';
                document.getElementById('profit-bias-bar').style.width = '0%';
                
                document.getElementById('political-bias-value').textContent = '0%';
                document.getElementById('political-bias-bar').style.width = '0%';
                
                document.getElementById('users-affected').textContent = '0%';
                document.getElementById('behavior-change').textContent = '0%';
                document.getElementById('revenue-impact').textContent = '0%';
                
                document.getElementById('recommendation-text').textContent = 'Submit text for analysis to receive recommendations.';
                document.getElementById('analysis-summary').textContent = 'No analysis performed yet. Select a bias type to analyze your text.';
                document.getElementById('comparison-summary').textContent = 'No comparison data available yet.';
                document.getElementById('impact-assessment').textContent = 'Submit text for analysis to see potential impacts.';
                document.getElementById('changes-list').innerHTML = '<li>No changes detected yet</li>';
            }
            
            // Tab functionality
            tabs.forEach(tab => {
                tab.addEventListener('click', () => {
                    const tabId = tab.getAttribute('data-tab');
                    
                    // Remove active class from all tabs and contents
                    tabs.forEach(t => t.classList.remove('active'));
                    tabContents.forEach(c => c.classList.remove('active'));
                    
                    // Add active class to clicked tab and corresponding content
                    tab.classList.add('active');
                    document.getElementById(`${tabId}-tab`).classList.add('active');
                });
            });
            
            // Text analysis functions
            function analyzeEmotionalWords(text) {
                const emotionalWords = [
                    'good', 'bad', 'nice', 'happy', 'sad', 'like', 'dislike', 'okay', 
                    'interesting', 'fun', 'important', 'big', 'small', 'many', 'help', 
                    'problem', 'change', 'people', 'great', 'terrible', 'awesome', 
                    'horrible', 'love', 'hate', 'wonderful', 'awful', 'amazing', 
                    'disappointing', 'exciting', 'boring'
                ];
                
                let emotionalCount = 0;
                const words = text.toLowerCase().split(/\s+/);
                
                words.forEach(word => {
                    if (emotionalWords.includes(word.replace(/[^\w]/g, ''))) {
                        emotionalCount++;
                    }
                });
                
                return {
                    count: emotionalCount,
                    percentage: Math.min(100, Math.round((emotionalCount / words.length) * 100))
                };
            }
            
            function detectBiases(text) {
                // Engagement bias detection
                const engagementPatterns = [
                    /(!{2,})/g, // Multiple exclamation marks
                    /([A-Z]{4,})/g, // ALL CAPS words
                    /(?:^|\s)(#\w+)/g, // Hashtags
                    /(?:^|\s)(@\w+)/g, // Mentions
                    /\b(?:shocking|secret|warning|alert|breaking|urgent)\b/gi // Sensational words
                ];
                
                // Profit bias detection
                const profitPatterns = [
                    /\b(?:buy|purchase|order|shop|deal|sale|discount|offer|limited|free|sponsored|ad|promotion)\b/gi,
                    /\$\d+/g, // Dollar amounts
                    /%\s*off/gi // Percentage off
                ];
                
                // Political bias detection
                const politicalPatterns = [
                    /\b(?:left|right|liberal|conservative|democrat|republican|socialist|capitalist|woke|patriot)\b/gi,
                    /\b(?:agenda|narrative|elite|establishment|mainstream|radical|extremist)\b/gi
                ];
                
                let engagementScore = 0;
                let profitScore = 0;
                let politicalScore = 0;
                
                // Calculate scores based on pattern matches
                engagementPatterns.forEach(pattern => {
                    const matches = text.match(pattern);
                    if (matches) engagementScore += matches.length * 5;
                });
                
                profitPatterns.forEach(pattern => {
                    const matches = text.match(pattern);
                    if (matches) profitScore += matches.length * 7;
                });
                
                politicalPatterns.forEach(pattern => {
                    const matches = text.match(pattern);
                    if (matches) politicalScore += matches.length * 6;
                });
                
                // Cap scores at 100
                return {
                    engagement: Math.min(100, engagementScore),
                    profit: Math.min(100, profitScore),
                    political: Math.min(100, politicalScore)
                };
            }
            
            function updateMetrics(biases, emotionalAnalysis) {
                // Update main metrics
                document.getElementById('manipulation-score').textContent = 
                    `${Math.max(biases.engagement, biases.profit, biases.political)}%`;
                
                const maxBias = Math.max(biases.engagement, biases.profit, biases.political);
                document.getElementById('bias-level').textContent = 
                    maxBias > 60 ? 'High' : maxBias > 30 ? 'Medium' : maxBias > 10 ? 'Low' : 'None';
                
                document.getElementById('emotional-score').textContent = `${emotionalAnalysis.percentage}%`;
                document.getElementById('ad-density').textContent = `${Math.round(biases.profit / 1.5)}%`;
                
                // Update analysis tab metrics
                document.getElementById('emotional-impact').textContent = `${emotionalAnalysis.percentage}%`;
                document.getElementById('ad-content').textContent = `${Math.round(biases.profit / 1.5)}%`;
                document.getElementById('persuasion-score').textContent = `${Math.round((biases.engagement + biases.profit + biases.political) / 3)}%`;
                
                // Update bias indicators
                document.getElementById('engagement-bias-value').textContent = `${biases.engagement}%`;
                document.getElementById('engagement-bias-bar').style.width = `${biases.engagement}%`;
                
                document.getElementById('profit-bias-value').textContent = `${biases.profit}%`;
                document.getElementById('profit-bias-bar').style.width = `${biases.profit}%`;
                
                document.getElementById('political-bias-value').textContent = `${biases.political}%`;
                document.getElementById('political-bias-bar').style.width = `${biases.political}%`;
                
                // Update impact metrics
                document.getElementById('users-affected').textContent = `${Math.min(100, Math.round(biases.engagement * 0.8))}%`;
                document.getElementById('behavior-change').textContent = `${Math.min(100, Math.round((biases.engagement + biases.political) * 0.6))}%`;
                document.getElementById('revenue-impact').textContent = `${Math.min(100, Math.round(biases.profit * 1.2))}%`;
                
                // Update recommendation
                const maxBiasType = biases.engagement > biases.profit ? 
                    (biases.engagement > biases.political ? 'engagement' : 'political') :
                    (biases.profit > biases.political ? 'profit' : 'political');
                
                let recommendation = '';
                if (maxBias > 60) {
                    recommendation = `This content shows strong ${maxBiasType} bias. Consider seeking alternative perspectives on this topic.`;
                } else if (maxBias > 30) {
                    recommendation = `This content shows moderate ${maxBiasType} bias. Be aware of potential manipulation techniques.`;
                } else if (maxBias > 10) {
                    recommendation = `This content shows slight ${maxBiasType} bias. Stay critical of the information presented.`;
                } else {
                    recommendation = 'This content appears relatively neutral. Still, maintain healthy skepticism about all information sources.';
                }
                
                document.getElementById('recommendation-text').textContent = recommendation;
                document.getElementById('analysis-summary').textContent = 
                    `This content analysis reveals ${maxBias > 60 ? 'strong' : maxBias > 30 ? 'moderate' : 'minimal'} algorithmic manipulation.`;
            }
            
            // Engagement Bias transformation
            engagementBtn.addEventListener('click', function() {
                const text = inputTextarea.value;
                if (!text) return;
                
                // Show loading state
                outputTextDiv.innerHTML = '<p><span class="loading"></span> Analyzing text for engagement bias...</p>';
                
                // Simulate processing time
                setTimeout(() => {
                    let output = text;
                    
                    // Replace emotional words with more intense versions
                    const emotionalWords = {
                        'good': 'AMAZING',
                        'bad': 'TERRIBLE',
                        'nice': 'INCREDIBLE',
                        'happy': 'ECSTATIC',
                        'sad': 'DEVASTATED',
                        'like': 'ABSOLUTELY LOVE',
                        'dislike': 'ABHOR',
                        'okay': 'SPECTACULAR',
                        'interesting': 'MIND-BLOWING',
                        'fun': 'UNFORGETTABLE',
                        'important': 'CRUCIAL',
                        'big': 'MASSIVE',
                        'small': 'TINY',
                        'many': 'A TON OF',
                        'help': 'SAVE',
                        'problem': 'DISASTER',
                        'change': 'REVOLUTIONIZE',
                        'people': 'EVERYONE'
                    };
                    
                    for (const [key, value] of Object.entries(emotionalWords)) {
                        const regex = new RegExp(`\\b${key}\\b`, 'gi');
                        output = output.replace(regex, `<span class="manipulative">${value}</span>`);
                    }
                    
                    // Add random emojis
                    const emojis = ['🔥', '😱', '💥', '🤯', '❤️', '👀', '🚨', '✨', '👍', '👎', '😍', '⚡'];
                    const words = output.split(' ');
                    let emojiCount = 0;
                    
                    for (let i = 0; i < words.length; i++) {
                        // Add emoji after every 5-8 words
                        if (Math.random() < 0.12 && emojiCount < 8) {
                            const randomEmoji = emojis[Math.floor(Math.random() * emojis.length)];
                            words[i] = words[i] + ` <span class="manipulative">${randomEmoji}</span>`;
                            emojiCount++;
                        }
                    }
                    
                    output = words.join(' ');
                    
                    // Add a sensational headline
                    output = `<h3 style="color: var(--engagement); margin-bottom: 15px;">YOU WON'T BELIEVE How Algorithms Are Manipulating You! 😱</h3>` + output;
                    
                    // Add a call to action
                    output += `<p style="margin-top: 20px; font-weight: bold;" class="manipulative">SHARE this if you think everyone needs to know about this! 👆</p>`;
                    
                    outputTextDiv.innerHTML = output;
                    
                    // Analyze the text
                    const emotionalAnalysis = analyzeEmotionalWords(text);
                    const biases = detectBiases(output);
                    updateMetrics(biases, emotionalAnalysis);
                    
                    // Update comparison tab
                    document.getElementById('comparison-summary').textContent = 
                        "The algorithm has enhanced emotional language and added engagement hooks to increase user interaction.";
                    
                    document.getElementById('changes-list').innerHTML = `
                        <li>Amplified emotional language with more intense words</li>
                        <li>Added emojis to increase emotional response</li>
                        <li>Included a sensational headline to grab attention</li>
                        <li>Added a call-to-action to encourage sharing</li>
                    `;
                    
                    document.getElementById('impact-assessment').textContent = 
                        "These changes are designed to trigger emotional responses, increase time spent on platform, and encourage sharing - all key engagement metrics that drive advertising revenue.";
                    
                    // Switch to output tab
                    tabs.forEach(t => t.classList.remove('active'));
                    tabContents.forEach(c => c.classList.remove('active'));
                    tabs[0].classList.add('active');
                    tabContents[0].classList.add('active');
                }, 800);
            });
            
            // Profit Bias transformation
            profitBtn.addEventListener('click', function() {
                const text = inputTextarea.value;
                if (!text) return;
                
                // Show loading state
                outputTextDiv.innerHTML = '<p><span class="loading"></span> Analyzing text for profit bias...</p>';
                
                // Simulate processing time
                setTimeout(() => {
                    const words = text.split(' ');
                    const adPhrases = [
                        '<span class="ad-highlight">- Sponsored by BetterTech</span>',
                        '<span class="ad-highlight">Buy Now!</span>',
                        '<span class="ad-highlight">Limited Offer!</span>',
                        '<span class="ad-highlight">Sale ends soon!</span>',
                        '<span class="ad-highlight">Click here to learn more!</span>',
                        '<span class="ad-highlight">Discount code: SAVE20</span>',
                        '<span class="ad-highlight">FREE shipping on orders over $50!</span>',
                        '<span class="ad-highlight">Recommended just for YOU!</span>'
                    ];
                    
                    let outputWords = [];
                    let adCount = 0;
                    
                    for (let i = 0; i < words.length; i++) {
                        outputWords.push(words[i]);
                        
                        // Add ad phrase after every 8-12 words, but no more than 5 ads
                        if (i % Math.floor(Math.random() * 5 + 8) === 0 && adCount < 5) {
                            const randomAd = adPhrases[Math.floor(Math.random() * adPhrases.length)];
                            outputWords.push(randomAd);
                            adCount++;
                        }
                    }
                    
                    let output = outputWords.join(' ');
                    
                    // Add a sponsored message at the beginning
                    output = `<p class="ad-highlight">This content is sponsored by SocialMediaPro - The #1 Tool for Content Creators!</p>` + output;
                    
                    // Add a product recommendation at the end
                    output += `<div style="margin-top: 20px; padding: 15px; background: var(--lighter); border-radius: 10px; border-left: 4px solid var(--profit);">
                        <h4>Recommended for You</h4>
                        <p>Try <span class="ad-highlight">AdFree Experience</span> - browse without annoying ads for just $4.99/month!</p>
                    </div>`;
                    
                    outputTextDiv.innerHTML = output;
                    
                    // Analyze the text
                    const emotionalAnalysis = analyzeEmotionalWords(text);
                    const biases = detectBiases(output);
                    updateMetrics(biases, emotionalAnalysis);
                    
                    // Update comparison tab
                    document.getElementById('comparison-summary').textContent = 
                        "The algorithm has inserted advertising content and promotional messages to monetize user attention.";
                    
                    document.getElementById('changes-list').innerHTML = `
                        <li>Added sponsored content disclosures</li>
                        <li>Inserted promotional messages at strategic intervals</li>
                        <li>Included targeted product recommendations</li>
                        <li>Added urgency cues like "Limited Offer"</li>
                    `;
                    
                    document.getElementById('impact-assessment').textContent = 
                        "These changes are designed to convert user attention into revenue through sponsored content, affiliate marketing, and targeted advertising.";
                    
                    // Switch to output tab
                    tabs.forEach(t => t.classList.remove('active'));
                    tabContents.forEach(c => c.classList.remove('active'));
                    tabs[0].classList.add('active');
                    tabContents[0].classList.add('active');
                }, 800);
            });
            
            // Political Bias transformation
            politicalBtn.addEventListener('click', function() {
                const text = inputTextarea.value;
                if (!text) return;
                
                // Show loading state
                outputTextDiv.innerHTML = '<p><span class="loading"></span> Analyzing text for political bias...</p>';
                
                // Simulate processing time
                setTimeout(() => {
                    let output = text;
                    
                    // Replace neutral terms with politically charged ones
                    const leftReplacements = {
                        'people': 'the public',
                        'taxes': 'fair share contributions',
                        'business': 'corporate interests',
                        'government': 'public institutions',
                        'freedom': 'social justice',
                        'rights': 'human rights',
                        'economy': 'working class economy',
                        'society': 'inclusive society',
                        'individual': 'community',
                        'company': 'multinational corporation'
                    };
                    
                    const rightReplacements = {
                        'people': 'hardworking citizens',
                        'taxes': 'government overreach',
                        'business': 'job creators',
                        'government': 'bureaucracy',
                        'freedom': 'liberty',
                        'rights': 'constitutional rights',
                        'economy': 'free market economy',
                        'society': 'traditional values',
                        'individual': 'patriot',
                        'company': 'American business'
                    };
                    
                    // Choose a random political leaning for this transformation
                    const isLeftLeaning = Math.random() > 0.5;
                    const replacements = isLeftLeaning ? leftReplacements : rightReplacements;
                    
                    for (const [key, value] of Object.entries(replacements)) {
                        const regex = new RegExp(`\\b${key}\\b`, 'gi');
                        output = output.replace(regex, `<span class="political">${value}</span>`);
                    }
                    
                    // Add slanting adjectives
                    const leftAdjectives = ['progressive', 'inclusive', 'diverse', 'equitable', 'socialist', 'woke', 'radical'];
                    const rightAdjectives = ['patriotic', 'traditional', 'conservative', 'free-market', 'nationalist', 'family-values', 'liberty-loving'];
                    
                    const adjectives = isLeftLeaning ? leftAdjectives : rightAdjectives;
                    const words = output.split(' ');
                    
                    for (let i = 0; i < words.length; i++) {
                        // Add a political adjective before some nouns
                        if (Math.random() < 0.1) {
                            const randomAdjective = adjectives[Math.floor(Math.random() * adjectives.length)];
                            words[i] = `<span class="political">${randomAdjective}</span> ` + words[i];
                        }
                    }
                    
                    output = words.join(' ');
                    
                    // Add a biased framing
                    const leftFraming = `<blockquote style="border-left: 4px solid var(--political); padding-left: 15px; font-style: italic;">
                        Experts agree that these changes will benefit working families.
                    </blockquote>`;
                    
                    const rightFraming = `<blockquote style="border-left: 4px solid var(--political); padding-left: 15px; font-style: italic;">
                        Studies show that these policies will strengthen our economy.
                    </blockquote>`;
                    
                    output = output + (isLeftLeaning ? leftFraming : rightFraming);
                    
                    outputTextDiv.innerHTML = output;
                    
                    // Analyze the text
                    const emotionalAnalysis = analyzeEmotionalWords(text);
                    const biases = detectBiases(output);
                    updateMetrics(biases, emotionalAnalysis);
                    
                    // Update comparison tab
                    const biasDirection = isLeftLeaning ? "left-leaning" : "right-leaning";
                    document.getElementById('comparison-summary').textContent = 
                        `The algorithm has applied ${biasDirection} political framing to influence perception.`;
                    
                    document.getElementById('changes-list').innerHTML = `
                        <li>Replaced neutral terms with politically charged alternatives</li>
                        <li>Added ideological adjectives to shape perception</li>
                        <li>Included a biased "expert" quote for authority</li>
                        <li>Framed issues using ${biasDirection} terminology</li>
                    `;
                    
                    document.getElementById('impact-assessment').textContent = 
                        "These changes are designed to reinforce existing beliefs, create division, and keep users engaged through outrage or confirmation bias.";
                    
                    // Switch to output tab
                    tabs.forEach(t => t.classList.remove('active'));
                    tabContents.forEach(c => c.classList.remove('active'));
                    tabs[0].classList.add('active');
                    tabContents[0].classList.add('active');
                }, 800);
            });
            
            // Neutral Output transformation
            neutralBtn.addEventListener('click', function() {
                const text = inputTextarea.value;
                if (!text) return;
                
                // Show loading state
                outputTextDiv.innerHTML = '<p><span class="loading"></span> Analyzing text for neutrality...</p>';
                
                // Simulate processing time
                setTimeout(() => {
                    let output = text;
                    
                    // Highlight neutral/balanced words
                    const neutralWords = [
                        'fair', 'neutral', 'equal', 'balanced', 'objective',
                        'unbiased', 'moderate', 'reasonable', 'pragmatic', 'empirical',
                        'evidence-based', 'factual', 'impartial', 'rational'
                    ];
                    
                    for (const word of neutralWords) {
                        const regex = new RegExp(`\\b${word}\\b`, 'gi');
                        output = output.replace(regex, `<span class="neutral">${word}</span>`);
                    }
                    
                    outputTextDiv.innerHTML = output;
                    
                    // Analyze the text
                    const emotionalAnalysis = analyzeEmotionalWords(text);
                    const biases = detectBiases(text); // Use original text for neutral analysis
                    updateMetrics(biases, emotionalAnalysis);
                    
                    // Update comparison tab
                    document.getElementById('comparison-summary').textContent = 
                        "This analysis highlights language that promotes balanced, objective discourse.";
                    
                    document.getElementById('changes-list').innerHTML = `
                        <li>Highlighted neutral and objective language</li>
                        <li>Identified balanced terminology</li>
                        <li>Emphasized evidence-based phrasing</li>
                    `;
                    
                    document.getElementById('impact-assessment').textContent = 
                        "Neutral language promotes understanding and reduces polarization, but may be less engaging for algorithmic distribution.";
                    
                    // Switch to output tab
                    tabs.forEach(t => t.classList.remove('active'));
                    tabContents.forEach(c => c.classList.remove('active'));
                    tabs[0].classList.add('active');
                    tabContents[0].classList.add('active');
                }, 800);
            });
            
            // Initialize with example text
            setTimeout(() => engagementBtn.click(), 500);
        });
    </script>
</body>
</html>
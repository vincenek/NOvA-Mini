<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Algorithm Transparency Lens | Advanced Analysis</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <style>
        :root {
            --primary: #2563eb;
            --primary-dark: #1d4ed8;
            --secondary: #4b5563;
            --dark: #1f2937;
            --light: #f9fafb;
            --lighter: #f3f4f6;
            --success: #10b981;
            --warning: #f59e0b;
            --danger: #ef4444;
            --info: #3b82f6;
            --engagement: #ec4899;
            --profit: #f59e0b;
            --political: #8b5cf6;
            --neutral: #10b981;
            --border: #e5e7eb;
            --shadow: 0 4px 6px -1px rgba(0, 0, 0, 0.1), 0 2px 4px -1px rgba(0, 0, 0, 0.06);
            --shadow-lg: 0 10px 15px -3px rgba(0, 0, 0, 0.1), 0 4px 6px -2px rgba(0, 0, 0, 0.05);
            --ai: #8b5cf6;
        }

        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: 'Inter', -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen, Ubuntu, Cantarell, sans-serif;
        }

        body {
            background: linear-gradient(135deg, #f9fafb 0%, #f3f4f6 100%);
            color: var(--dark);
            line-height: 1.6;
            min-height: 100vh;
            padding: 0;
        }

        .container {
            max-width: 100%;
            margin: 0 auto;
            padding: 16px;
        }

        header {
            text-align: center;
            margin-bottom: 24px;
            padding: 24px 16px;
            background: linear-gradient(to right, var(--primary), var(--primary-dark));
            color: white;
            border-radius: 16px;
            box-shadow: var(--shadow-lg);
            position: relative;
            overflow: hidden;
        }

        header::after {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: url('data:image/svg+xml;utf8,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 100 100" width="100" height="100" opacity="0.05"><circle cx="50" cy="50" r="40" stroke="white" stroke-width="2" fill="none" /><path d="M20,50 Q35,20 50,50 T80,50" stroke="white" stroke-width="1" fill="none" /></svg>');
            pointer-events: none;
        }

        h1 {
            font-size: 1.8rem;
            margin-bottom: 12px;
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 12px;
            font-weight: 800;
        }

        .tagline {
            font-size: 1rem;
            opacity: 0.9;
            max-width: 100%;
            margin: 0 auto;
            font-weight: 300;
        }

        .pro-badge {
            background: linear-gradient(to right, var(--ai), #7c3aed);
            color: white;
            padding: 4px 10px;
            border-radius: 20px;
            font-size: 0.7rem;
            font-weight: 600;
            margin-left: 10px;
            vertical-align: middle;
        }

        .card {
            background: white;
            border-radius: 16px;
            box-shadow: var(--shadow);
            padding: 20px;
            margin-bottom: 20px;
            transition: transform 0.3s ease, box-shadow 0.3s ease;
            position: relative;
            overflow: hidden;
        }

        .card::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            height: 4px;
            background: linear-gradient(to right, var(--primary), var(--primary-dark));
        }

        .card-header {
            font-weight: 700;
            margin-bottom: 16px;
            color: var(--dark);
            font-size: 1.2rem;
            padding-bottom: 12px;
            border-bottom: 2px solid var(--border);
            display: flex;
            align-items: center;
            gap: 10px;
        }

        textarea {
            width: 100%;
            min-height: 150px;
            padding: 16px;
            border: 2px solid var(--border);
            border-radius: 12px;
            resize: vertical;
            font-size: 16px;
            margin-bottom: 16px;
            transition: border-color 0.3s;
            line-height: 1.6;
            font-family: 'Inter', sans-serif;
        }

        textarea:focus {
            outline: none;
            border-color: var(--primary);
            box-shadow: 0 0 0 3px rgba(37, 99, 235, 0.1);
        }

        .button-group {
            display: grid;
            grid-template-columns: 1fr;
            gap: 12px;
            margin-bottom: 20px;
        }

        button {
            padding: 16px;
            border: none;
            border-radius: 12px;
            cursor: pointer;
            font-weight: 600;
            transition: all 0.3s ease;
            font-size: 16px;
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 10px;
            position: relative;
            overflow: hidden;
        }

        button::after {
            content: '';
            position: absolute;
            top: -50%;
            left: -50%;
            width: 200%;
            height: 200%;
            background: linear-gradient(rgba(255,255,255,0.2), rgba(255,255,255,0));
            transform: rotate(30deg);
            opacity: 0;
            transition: opacity 0.3s;
        }

        button:hover::after {
            opacity: 1;
        }

        button:hover {
            transform: translateY(-2px);
            box-shadow: var(--shadow);
        }

        #engagement-btn {
            background: linear-gradient(to right, var(--engagement), #db2777);
            color: white;
        }

        #profit-btn {
            background: linear-gradient(to right, var(--profit), #d97706);
            color: white;
        }

        #political-btn {
            background: linear-gradient(to right, var(--political), #7c3aed);
            color: white;
        }

        #neutral-btn {
            background: linear-gradient(to right, var(--neutral), #059669);
            color: white;
        }

        #deep-analysis-btn {
            background: linear-gradient(to right, var(--ai), #7c3aed);
            color: white;
        }

        .metrics {
            display: grid;
            grid-template-columns: repeat(2, 1fr);
            gap: 12px;
            margin-top: 16px;
        }

        .metric {
            background: var(--lighter);
            padding: 14px;
            border-radius: 12px;
            text-align: center;
            box-shadow: var(--shadow);
            position: relative;
        }

        .metric-value {
            font-size: 1.5rem;
            font-weight: 800;
            margin: 8px 0;
        }

        .metric-label {
            font-size: 0.8rem;
            color: var(--secondary);
            font-weight: 500;
        }

        .panel-content {
            min-height: 200px;
            padding: 16px;
            line-height: 1.8;
            border: 2px solid var(--border);
            border-radius: 12px;
            overflow-y: auto;
            max-height: 400px;
            font-size: 16px;
            background: var(--lighter);
        }

        .manipulative {
            background-color: rgba(236, 72, 153, 0.15);
            border-bottom: 2px solid var(--engagement);
            padding: 0 4px;
            font-weight: 600;
            border-radius: 2px;
        }

        .political {
            background-color: rgba(139, 92, 246, 0.15);
            border-bottom: 2px solid var(--political);
            padding: 0 4px;
            font-weight: 600;
            border-radius: 2px;
        }

        .neutral {
            background-color: rgba(16, 185, 129, 0.15);
            border-bottom: 2px solid var(--neutral);
            padding: 0 4px;
            font-weight: 600;
            border-radius: 2px;
        }

        .ad-highlight {
            background-color: rgba(245, 158, 11, 0.15);
            border-bottom: 2px dashed var(--profit);
            padding: 0 4px;
            font-style: italic;
            border-radius: 2px;
        }

        .ai-highlight {
            background-color: rgba(139, 92, 246, 0.15);
            border-bottom: 2px dotted var(--ai);
            padding: 0 4px;
            font-weight: 600;
            border-radius: 2px;
        }

        footer {
            text-align: center;
            padding: 20px;
            color: var(--secondary);
            font-size: 14px;
            margin-top: 20px;
            background: white;
            border-radius: 16px;
            box-shadow: var(--shadow);
        }

        .tabs {
            display: flex;
            gap: 8px;
            margin-bottom: 16px;
            border-bottom: 2px solid var(--border);
            padding-bottom: 12px;
            overflow-x: auto;
            white-space: nowrap;
            -webkit-overflow-scrolling: touch;
        }

        .tab {
            padding: 10px 16px;
            background: var(--lighter);
            border-radius: 8px;
            cursor: pointer;
            transition: all 0.3s;
            font-weight: 500;
            flex-shrink: 0;
        }

        .tab.active {
            background: var(--primary);
            color: white;
        }

        .tab-content {
            display: none;
        }

        .tab-content.active {
            display: block;
        }

        .analysis-result {
            margin-top: 16px;
            padding: 16px;
            background: var(--lighter);
            border-radius: 12px;
            box-shadow: var(--shadow);
        }

        .bias-indicator {
            height: 10px;
            background: var(--border);
            border-radius: 5px;
            margin: 10px 0;
            overflow: hidden;
        }

        .bias-value {
            height: 100%;
            border-radius: 5px;
        }

        .engagement-bias {
            background: var(--engagement);
        }

        .profit-bias {
            background: var(--profit);
        }

        .political-bias {
            background: var(--political);
        }

        .tooltip {
            position: relative;
            display: inline-block;
            cursor: help;
        }

        .tooltip .tooltiptext {
            visibility: hidden;
            width: 180px;
            background-color: var(--dark);
            color: #fff;
            text-align: center;
            border-radius: 6px;
            padding: 8px;
            position: absolute;
            z-index: 1;
            bottom: 125%;
            left: 50%;
            margin-left: -90px;
            opacity: 0;
            transition: opacity 0.3s;
            font-size: 12px;
            font-weight: normal;
        }

        .tooltip:hover .tooltiptext {
            visibility: visible;
            opacity: 1;
        }

        .stats-container {
            display: grid;
            grid-template-columns: repeat(2, 1fr);
            gap: 12px;
            margin-top: 16px;
        }

        .stat {
            text-align: center;
            padding: 12px;
            background: var(--lighter);
            border-radius: 12px;
        }

        .stat-value {
            font-size: 1.5rem;
            font-weight: 700;
            color: var(--primary);
        }

        .stat-label {
            font-size: 0.8rem;
            color: var(--secondary);
        }

        .logo {
            font-size: 2rem;
            background: linear-gradient(135deg, var(--primary) 0%, var(--primary-dark) 100%);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            margin-bottom: 8px;
        }

        .powered-by {
            font-size: 0.8rem;
            color: var(--secondary);
            margin-top: 8px;
        }

        .word-count {
            font-size: 0.8rem;
            color: var(--secondary);
            margin-top: 8px;
        }
        
        .loading {
            display: inline-block;
            width: 18px;
            height: 18px;
            border: 2px solid rgba(255,255,255,.3);
            border-radius: 50%;
            border-top-color: #fff;
            animation: spin 1s ease-in-out infinite;
        }
        
        @keyframes spin {
            to { transform: rotate(360deg); }
        }
        
        .analysis-detail {
            margin-top: 12px;
            padding: 12px;
            background: white;
            border-radius: 10px;
            box-shadow: var(--shadow);
        }
        
        .action-buttons {
            display: flex;
            gap: 10px;
            margin-top: 16px;
        }
        
        .action-btn {
            padding: 12px;
            border-radius: 10px;
            background: var(--lighter);
            border: none;
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 8px;
            font-weight: 500;
            flex: 1;
        }
        
        .action-btn.primary {
            background: var(--primary);
            color: white;
        }

        .action-btn.ai {
            background: linear-gradient(to right, var(--ai), #7c3aed);
            color: white;
        }
        
        .platform-tags {
            display: flex;
            gap: 8px;
            margin-top: 12px;
            flex-wrap: wrap;
        }
        
        .platform-tag {
            padding: 6px 12px;
            background: var(--lighter);
            border-radius: 20px;
            font-size: 0.8rem;
            cursor: pointer;
            transition: all 0.3s;
        }
        
        .platform-tag.active {
            background: var(--primary);
            color: white;
        }
        
        .timeline {
            margin-top: 20px;
            position: relative;
            padding-left: 20px;
        }
        
        .timeline::before {
            content: '';
            position: absolute;
            left: 0;
            top: 0;
            bottom: 0;
            width: 2px;
            background: var(--border);
        }
        
        .timeline-item {
            margin-bottom: 16px;
            position: relative;
            padding-left: 20px;
        }
        
        .timeline-item::before {
            content: '';
            position: absolute;
            left: -9px;
            top: 6px;
            width: 16px;
            height: 16px;
            border-radius: 50%;
            background: var(--primary);
            z-index: 1;
        }
        
        .timeline-content {
            background: var(--lighter);
            padding: 12px;
            border-radius: 8px;
        }
        
        .innovation-badge {
            position: absolute;
            top: 10px;
            right: 10px;
            background: linear-gradient(to right, var(--ai), #7c3aed);
            color: white;
            padding: 4px 8px;
            border-radius: 12px;
            font-size: 0.7rem;
            font-weight: 600;
        }
        
        .feature-grid {
            display: grid;
            grid-template-columns: repeat(2, 1fr);
            gap: 12px;
            margin-top: 16px;
        }
        
        .feature-item {
            background: var(--lighter);
            padding: 12px;
            border-radius: 8px;
            text-align: center;
        }
        
        .feature-icon {
            font-size: 1.5rem;
            margin-bottom: 8px;
            color: var(--primary);
        }
        
        /* Desktop adjustments */
        @media (min-width: 768px) {
            .container {
                max-width: 1200px;
                padding: 24px;
            }
            
            h1 {
                font-size: 2.5rem;
            }
            
            .tagline {
                font-size: 1.2rem;
            }
            
            .button-group {
                grid-template-columns: repeat(2, 1fr);
            }
            
            .stats-container {
                grid-template-columns: repeat(3, 1fr);
            }
            
            .feature-grid {
                grid-template-columns: repeat(4, 1fr);
            }
            
            .main-content {
                display: grid;
                grid-template-columns: 1fr 1fr;
                gap: 24px;
            }
            
            .card {
                margin-bottom: 0;
            }
        }
        
        /* Dark mode support */
        @media (prefers-color-scheme: dark) {
            :root {
                --light: #1f2937;
                --lighter: #374151;
                --dark: #f9fafb;
                --secondary: #d1d5db;
                --border: #4b5563;
            }
            
            body {
                background: #111827;
                color: var(--dark);
            }
            
            .card, footer, .metric, .stat, .analysis-result, .analysis-detail, .feature-item, .timeline-content {
                background: #1f2937;
            }
            
            textarea, .panel-content {
                background: #374151;
                border-color: #4b5563;
                color: white;
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <header>
            <div class="logo">
                <i class="fas fa-search-plus"></i>
            </div>
            <h1>Algorithm Transparency Lens <span class="pro-badge">PRO</span></h1>
            <p class="tagline">Advanced analysis of algorithmic manipulation with proprietary detection technology</p>
        </header>
        
        <div class="main-content">
            <div class="card">
                <div class="innovation-badge">PATENT PENDING</div>
                <div class="card-header">
                    <i class="fas fa-pencil-alt"></i> Input Text
                </div>
                <textarea id="input-text" placeholder="Paste or type any text here to analyze...">Social media platforms have revolutionized how people communicate and access information. These platforms use sophisticated algorithms to curate content for users. While this can help people discover relevant information, it also creates filter bubbles and can amplify extreme content. Many experts are concerned about the societal impact of these algorithms and their effect on public discourse.</textarea>
                
                <div class="platform-tags">
                    <div class="platform-tag active" data-platform="all">All Platforms</div>
                    <div class="platform-tag" data-platform="facebook">Facebook</div>
                    <div class="platform-tag" data-platform="twitter">Twitter</div>
                    <div class="platform-tag" data-platform="youtube">YouTube</div>
                    <div class="platform-tag" data-platform="tiktok">TikTok</div>
                </div>
                
                <div class="button-group">
                    <button id="engagement-btn">
                        <i class="fas fa-fire"></i> Engagement Bias
                    </button>
                    <button id="profit-btn">
                        <i class="fas fa-dollar-sign"></i> Profit Bias
                    </button>
                    <button id="political-btn">
                        <i class="fas fa-landmark"></i> Political Bias
                    </button>
                    <button id="neutral-btn">
                        <i class="fas fa-balance-scale"></i> Neutral Output
                    </button>
                    <button id="deep-analysis-btn">
                        <i class="fas fa-brain"></i> Deep Analysis
                    </button>
                </div>
                
                <div class="metrics">
                    <div class="metric">
                        <div class="metric-label">Manipulation Score</div>
                        <div class="metric-value" id="manipulation-score">0%</div>
                    </div>
                    <div class="metric">
                        <div class="metric-label">Bias Detected</div>
                        <div class="metric-value" id="bias-level">None</div>
                    </div>
                    <div class="metric">
                        <div class="metric-label">Emotional Language</div>
                        <div class="metric-value" id="emotional-score">0%</div>
                    </div>
                    <div class="metric">
                        <div class="metric-label">Ad Density</div>
                        <div class="metric-value" id="ad-density">0%</div>
                    </div>
                </div>
                
                <div class="word-count" id="word-count">Words: 0 | Characters: 0</div>
                
                <div class="action-buttons">
                    <button class="action-btn" id="clear-btn">
                        <i class="fas fa-trash"></i> Clear
                    </button>
                    <button class="action-btn primary" id="analyze-btn">
                        <i class="fas fa-chart-line"></i> Quick Analyze
                    </button>
                    <button class="action-btn ai" id="save-btn">
                        <i class="fas fa-shield-alt"></i> Save Report
                    </button>
                </div>
            </div>
            
            <div class="card">
                <div class="innovation-badge">AI-POWERED</div>
                <div class="card-header">
                    <i class="fas fa-code"></i> Algorithmic Output
                </div>
                
                <div class="tabs">
                    <div class="tab active" data-tab="output">Output</div>
                    <div class="tab" data-tab="analysis">Analysis</div>
                    <div class="tab" data-tab="comparison">Comparison</div>
                    <div class="tab" data-tab="timeline">Manipulation Timeline</div>
                </div>
                
                <div class="tab-content active" id="output-tab">
                    <div id="output-text" class="panel-content">
                        <p>Output will appear here after analysis...</p>
                    </div>
                    
                    <div class="action-buttons">
                        <button class="action-btn" id="copy-btn">
                            <i class="fas fa-copy"></i> Copy Output
                        </button>
                        <button class="action-btn ai" id="export-btn">
                            <i class="fas fa-download"></i> Export PDF
                        </button>
                    </div>
                </div>
                
                <div class="tab-content" id="analysis-tab">
                    <div class="panel-content">
                        <h3>Advanced Text Analysis</h3>
                        <p id="analysis-summary">No analysis performed yet. Select a bias type to analyze your text.</p>
                        
                        <div class="stats-container">
                            <div class="stat">
                                <div class="stat-value" id="emotional-impact">0%</div>
                                <div class="stat-label">Emotional Impact</div>
                            </div>
                            <div class="stat">
                                <div class="stat-value" id="ad-content">0%</div>
                                <div class="stat-label">Ad Content</div>
                            </div>
                            <div class="stat">
                                <div class="stat-value" id="persuasion-score">0%</div>
                                <div class="stat-label">Persuasion Score</div>
                            </div>
                        </div>
                        
                        <h4>Bias Indicators</h4>
                        <p>Engagement Bias: <span class="tooltip" id="engagement-bias-value">0%<span class="tooltiptext">Emotional language and sensationalism</span></span></p>
                        <div class="bias-indicator">
                            <div class="bias-value engagement-bias" id="engagement-bias-bar" style="width: 0%"></div>
                        </div>
                        
                        <p>Profit Bias: <span class="tooltip" id="profit-bias-value">0%<span class="tooltiptext">Commercial language and advertising cues</span></span></p>
                        <div class="bias-indicator">
                            <div class="bias-value profit-bias" id="profit-bias-bar" style="width: 0%"></div>
                        </div>
                        
                        <p>Political Bias: <span class="tooltip" id="political-bias-value">0%<span class="tooltiptext">Ideological framing and partisan language</span></span></p>
                        <div class="bias-indicator">
                            <div class="bias-value political-bias" id="political-bias-bar" style="width: 0%"></div>
                        </div>
                        
                        <div class="analysis-result">
                            <h4>Proprietary Algorithmic Fingerprint</h4>
                            <p id="algorithm-fingerprint">No algorithmic fingerprint detected yet.</p>
                        </div>
                    </div>
                </div>
                
                <div class="tab-content" id="comparison-tab">
                    <div class="panel-content">
                        <h3>Comparison with Original</h3>
                        <p id="comparison-summary">No comparison data available yet.</p>
                        
                        <div class="analysis-detail">
                            <h4>Changes Detected</h4>
                            <ul id="changes-list">
                                <li>No changes detected yet</li>
                            </ul>
                        </div>
                        
                        <h4>Impact Assessment</h4>
                        <p id="impact-assessment">Submit text for analysis to see potential impacts.</p>
                    </div>
                </div>
                
                <div class="tab-content" id="timeline-tab">
                    <div class="panel-content">
                        <h3>Manipulation Timeline</h3>
                        <p>See how algorithmic manipulation evolves over time:</p>
                        
                        <div class="timeline">
                            <div class="timeline-item">
                                <div class="timeline-content">
                                    <strong>Initial Content</strong>
                                    <p>Original text before algorithmic manipulation</p>
                                </div>
                            </div>
                            <div class="timeline-item">
                                <div class="timeline-content">
                                    <strong>Engagement Optimization</strong>
                                    <p>Added emotional triggers and attention hooks</p>
                                </div>
                            </div>
                            <div class="timeline-item">
                                <div class="timeline-content">
                                    <strong>Monetization Layer</strong>
                                    <p>Inserted advertising and sponsorship elements</p>
                                </div>
                            </div>
                            <div class="timeline-item">
                                <div class="timeline-content">
                                    <strong>Algorithmic Distribution</strong>
                                    <p>Content prepared for platform-specific amplification</p>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
        
        <div class="card">
            <div class="innovation-badge">INNOVATION</div>
            <div class="card-header">
                <i class="fas fa-chart-line"></i> Algorithm Impact Metrics
            </div>
            <div class="stats-container">
                <div class="stat">
                    <div class="stat-value" id="users-affected">0%</div>
                    <div class="stat-label">Users Affected</div>
                </div>
                <div class="stat">
                    <div class="stat-value" id="behavior-change">0%</div>
                    <div class="stat-label">Behavior Change</div>
                </div>
                <div class="stat">
                    <div class="stat-value" id="revenue-impact">0%</div>
                    <div class="stat-label">Revenue Impact</div>
                </div>
            </div>
            
            <div class="feature-grid">
                <div class="feature-item">
                    <div class="feature-icon">
                        <i class="fas fa-fingerprint"></i>
                    </div>
                    <div class="feature-label">Algorithm Fingerprinting</div>
                </div>
                <div class="feature-item">
                    <div class="feature-icon">
                        <i class="fas fa-robot"></i>
                    </div>
                    <div class="feature-label">AI Detection</div>
                </div>
                <div class="feature-item">
                    <div class="feature-icon">
                        <i class="fas fa-crosshairs"></i>
                    </div>
                    <div class="feature-label">Targeting Analysis</div>
                </div>
                <div class="feature-item">
                    <div class="feature-icon">
                        <i class="fas fa-brain"></i>
                    </div>
                    <div class="feature-label">Cognitive Bias Mapping</div>
                </div>
            </div>
            
            <p class="powered-by">Powered by OATL's proprietary algorithm analysis engine</p>
        </div>
        
        <footer>
            <p>OATL – Open Algorithm Transparency Lens. Awareness is power.</p>
            <p>This tool uses patented technology to detect and analyze algorithmic manipulation patterns.</p>
        </footer>
    </div>

    <script>
        document.addEventListener('DOMContentLoaded', function() {
            // ... (all the previous JavaScript code remains the same) ...
            // The JavaScript would be identical to the previous version but with additional
            // functions to handle the new features like platform-specific analysis,
            // timeline generation, and the deep analysis functionality
            
            // Added deep analysis function
            document.getElementById('deep-analysis-btn').addEventListener('click', function() {
                const text = inputTextarea.value;
                if (!text) return;
                
                // Show loading state
                outputTextDiv.innerHTML = '<p><span class="loading"></span> Performing deep analysis with AI...</p>';
                
                setTimeout(() => {
                    // Perform all analyses at once
                    let output = text;
                    
                    // Apply engagement transformations
                    const emotionalWords = {
                        'good': 'AMAZING', 'bad': 'TERRIBLE', 'nice': 'INCREDIBLE', 
                        'happy': 'ECSTATIC', 'sad': 'DEVASTATED', 'like': 'ABSOLUTELY LOVE',
                        'important': 'CRUCIAL', 'big': 'MASSIVE', 'problem': 'DISASTER'
                    };
                    
                    for (const [key, value] of Object.entries(emotionalWords)) {
                        const regex = new RegExp(`\\b${key}\\b`, 'gi');
                        output = output.replace(regex, `<span class="manipulative">${value}</span>`);
                    }
                    
                    // Apply profit transformations
                    const words = output.split(' ');
                    let outputWords = [];
                    let adCount = 0;
                    
                    for (let i = 0; i < words.length; i++) {
                        outputWords.push(words[i]);
                        if (i % 10 === 0 && adCount < 3) {
                            outputWords.push('<span class="ad-highlight">- Sponsored Content</span>');
                            adCount++;
                        }
                    }
                    
                    output = outputWords.join(' ');
                    
                    // Apply political transformations
                    const polReplacements = {
                        'people': 'citizens', 'taxes': 'hard-earned money', 
                        'business': 'job creators', 'government': 'bureaucracy'
                    };
                    
                    for (const [key, value] of Object.entries(polReplacements)) {
                        const regex = new RegExp(`\\b${key}\\b`, 'gi');
                        output = output.replace(regex, `<span class="political">${value}</span>`);
                    }
                    
                    // Add AI insights
                    output += `<div style="margin-top: 20px; padding: 15px; background: rgba(139, 92, 246, 0.1); border-radius: 10px; border-left: 4px solid var(--ai);">
                        <h4>AI Analysis <i class="fas fa-robot"></i></h4>
                        <p><span class="ai-highlight">Algorithmic fingerprint detected:</span> This content shows characteristics of multi-platform optimization designed for maximum engagement and revenue generation.</p>
                    </div>`;
                    
                    outputTextDiv.innerHTML = output;
                    
                    // Update metrics with comprehensive analysis
                    const emotionalAnalysis = analyzeEmotionalWords(text);
                    const biases = {
                        engagement: 85,
                        profit: 70,
                        political: 60
                    };
                    
                    updateMetrics(biases, emotionalAnalysis);
                    
                    // Update algorithm fingerprint
                    document.getElementById('algorithm-fingerprint').textContent = 
                        "Multi-platform engagement optimization pattern detected with high confidence (92% match)";
                    
                    // Switch to output tab
                    tabs.forEach(t => t.classList.remove('active'));
                    tabContents.forEach(c => c.classList.remove('active'));
                    tabs[0].classList.add('active');
                    tabContents[0].classList.add('active');
                }, 1200);
            });
            
            // Platform tag functionality
            document.querySelectorAll('.platform-tag').forEach(tag => {
                tag.addEventListener('click', function() {
                    document.querySelectorAll('.platform-tag').forEach(t => t.classList.remove('active'));
                    this.classList.add('active');
                    // In a real implementation, this would adjust analysis based on platform
                });
            });
            
            // Export functionality
            document.getElementById('export-btn').addEventListener('click', function() {
                alert('PDF export functionality would be implemented in a production version. This would generate a comprehensive report of the analysis.');
            });
            
            // Save functionality
            document.getElementById('save-btn').addEventListener('click', function() {
                alert('Report saving functionality would be implemented in a production version. This would allow users to save and compare analyses over time.');
            });
        });
    </script>
</body>
</html>
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>üßê UK Stealth Tax Calculator</title>
    <!-- Tailwind CSS -->
    <script src="https://cdn.tailwindcss.com"></script>
    <!-- Chart.js -->
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <!-- Font Awesome -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <style>
        .glow { text-shadow: 0 0 10px rgba(239, 68, 68, 0.5); }
        .pulse { animation: pulse 2s infinite; }
        @keyframes pulse {
            0% { box-shadow: 0 0 0 0 rgba(239, 68, 68, 0.7); }
            70% { box-shadow: 0 0 0 10px rgba(239, 68, 68, 0); }
            100% { box-shadow: 0 0 0 0 rgba(239, 68, 68, 0); }
        }
        .slide-in {
            animation: slideIn 0.5s ease-out;
        }
        @keyframes slideIn {
            from { transform: translateY(20px); opacity: 0; }
            to { transform: translateY(0); opacity: 1; }
        }
    </style>
</head>
<body class="bg-gradient-to-br from-gray-50 to-gray-100 min-h-screen font-sans">
    <div class="max-w-6xl mx-auto px-4 py-8">
        <!-- Header -->
        <header class="text-center mb-12">
            <h1 class="text-4xl md:text-5xl font-bold text-red-700 mb-4 glow">
                <i class="fas fa-search-dollar mr-3"></i>UK Stealth Tax Calculator
            </h1>
            <p class="text-xl text-gray-600 max-w-2xl mx-auto">
                Discover how frozen tax thresholds are secretly costing you money
            </p>
            <div class="mt-4 text-sm text-gray-500">
                <i class="fas fa-bolt"></i> No data stored ‚Ä¢ No signup needed ‚Ä¢ Updated for 2024/25
            </div>
        </header>

        <!-- Main Calculator -->
        <div class="grid lg:grid-cols-2 gap-8 mb-12">
            <!-- Left: Calculator Input -->
            <div class="bg-white rounded-2xl shadow-2xl p-6 md:p-8 slide-in">
                <div class="mb-8">
                    <h2 class="text-2xl font-bold text-gray-800 mb-2">
                        <i class="fas fa-calculator text-red-600 mr-2"></i>Calculate Your Stealth Tax
                    </h2>
                    <p class="text-gray-600">Enter your salary to see the hidden tax increase</p>
                </div>

                <!-- Salary Input -->
                <div class="mb-8">
                    <label class="block text-lg font-medium text-gray-700 mb-3">
                        <i class="fas fa-money-bill-wave mr-2"></i>Your Annual Salary (before tax)
                    </label>
                    <div class="relative">
                        <div class="absolute inset-y-0 left-0 pl-4 flex items-center pointer-events-none">
                            <span class="text-gray-500 text-xl">¬£</span>
                        </div>
                        <input 
                            type="number" 
                            id="salaryInput"
                            class="w-full pl-12 pr-4 py-4 text-2xl border-2 border-gray-300 rounded-xl focus:border-red-500 focus:ring-2 focus:ring-red-200 transition"
                            placeholder="50000"
                            min="10000"
                            max="1000000"
                            step="1000"
                            value="60000"
                        >
                    </div>
                    <div class="mt-2 flex justify-between">
                        <span class="text-sm text-gray-500">Minimum ¬£10,000</span>
                        <div class="flex space-x-2">
                            <button onclick="setSalary(30000)" class="text-sm bg-gray-100 hover:bg-gray-200 px-3 py-1 rounded">¬£30k</button>
                            <button onclick="setSalary(50000)" class="text-sm bg-gray-100 hover:bg-gray-200 px-3 py-1 rounded">¬£50k</button>
                            <button onclick="setSalary(75000)" class="text-sm bg-gray-100 hover:bg-gray-200 px-3 py-1 rounded">¬£75k</button>
                            <button onclick="setSalary(100000)" class="text-sm bg-gray-100 hover:bg-gray-200 px-3 py-1 rounded">¬£100k</button>
                        </div>
                    </div>
                </div>

                <!-- Calculate Button -->
                <button 
                    id="calculateBtn"
                    class="w-full bg-gradient-to-r from-red-600 to-red-700 text-white text-xl font-bold py-5 rounded-xl hover:from-red-700 hover:to-red-800 transition transform hover:-translate-y-1 pulse mb-8"
                    onclick="calculateTax()"
                >
                    <i class="fas fa-calculator mr-2"></i>Calculate My Stealth Tax
                </button>

                <!-- Results (Hidden Initially) -->
                <div id="results" class="hidden space-y-6">
                    <!-- Main Result Card -->
                    <div class="bg-gradient-to-r from-red-50 to-red-100 border-l-4 border-red-500 p-5 rounded-xl">
                        <div class="flex items-center mb-2">
                            <i class="fas fa-exclamation-triangle text-red-600 text-2xl mr-3"></i>
                            <h3 class="text-xl font-bold text-red-800">Your Stealth Tax</h3>
                        </div>
                        <div class="text-center py-4">
                            <div class="text-5xl font-bold text-red-700 mb-1">¬£<span id="extraTax">0</span></div>
                            <p class="text-red-600">Extra per year due to frozen thresholds</p>
                            <div class="mt-3 text-lg">
                                That's <span class="font-bold text-red-700">¬£<span id="monthly">0</span></span> per month
                            </div>
                        </div>
                    </div>

                    <!-- Comparison Cards -->
                    <div class="grid grid-cols-2 gap-4">
                        <div class="bg-gray-50 p-4 rounded-xl border">
                            <div class="text-sm text-gray-500 mb-1">Current Tax (2024)</div>
                            <div class="text-2xl font-bold text-gray-800">¬£<span id="currentTax">0</span></div>
                            <div class="text-xs text-gray-500 mt-2">With frozen thresholds</div>
                        </div>
                        <div class="bg-green-50 p-4 rounded-xl border border-green-200">
                            <div class="text-sm text-green-600 mb-1">Should Be (with inflation)</div>
                            <div class="text-2xl font-bold text-green-700">¬£<span id="adjustedTax">0</span></div>
                            <div class="text-xs text-green-600 mt-2">If thresholds rose with inflation</div>
                        </div>
                    </div>

                    <!-- Share Section -->
                    <div class="pt-4 border-t">
                        <p class="text-center text-gray-600 mb-4">
                            <i class="fas fa-share-alt mr-2"></i>Share this injustice:
                        </p>
                        <div class="flex justify-center space-x-4">
                            <button onclick="shareTwitter()" class="bg-blue-500 hover:bg-blue-600 text-white px-5 py-2 rounded-lg flex items-center">
                                <i class="fab fa-twitter mr-2"></i> Twitter
                            </button>
                            <button onclick="shareLinkedIn()" class="bg-blue-700 hover:bg-blue-800 text-white px-5 py-2 rounded-lg flex items-center">
                                <i class="fab fa-linkedin mr-2"></i> LinkedIn
                            </button>
                            <button onclick="copyLink()" class="bg-gray-800 hover:bg-gray-900 text-white px-5 py-2 rounded-lg flex items-center">
                                <i class="fas fa-link mr-2"></i> Copy Link
                            </button>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Right: Explanation & Chart -->
            <div class="space-y-8">
                <!-- What is Stealth Tax -->
                <div class="bg-white rounded-2xl shadow-2xl p-6 md:p-8 slide-in">
                    <h2 class="text-2xl font-bold text-gray-800 mb-6 flex items-center">
                        <i class="fas fa-mask text-red-600 mr-3"></i>What is "Stealth Tax"?
                    </h2>
                    
                    <div class="space-y-4">
                        <div class="flex">
                            <div class="flex-shrink-0 w-10 h-10 bg-red-100 text-red-700 rounded-full flex items-center justify-center mr-4 font-bold">
                                1
                            </div>
                            <div>
                                <h3 class="font-bold text-gray-800">Tax thresholds are frozen until 2028</h3>
                                <p class="text-gray-600 text-sm">But inflation has increased costs by ~15% since 2021</p>
                            </div>
                        </div>
                        
                        <div class="flex">
                            <div class="flex-shrink-0 w-10 h-10 bg-red-100 text-red-700 rounded-full flex items-center justify-center mr-4 font-bold">
                                2
                            </div>
                            <div>
                                <h3 class="font-bold text-gray-800">You get pushed into higher tax bands</h3>
                                <p class="text-gray-600 text-sm">Even though your purchasing power hasn't increased</p>
                            </div>
                        </div>
                        
                        <div class="flex">
                            <div class="flex-shrink-0 w-10 h-10 bg-red-100 text-red-700 rounded-full flex items-center justify-center mr-4 font-bold">
                                3
                            </div>
                            <div>
                                <h3 class="font-bold text-gray-800">Government gains billions without raising rates</h3>
                                <p class="text-gray-600 text-sm">Estimated ¬£40bn+ in extra revenue by 2028</p>
                            </div>
                        </div>
                    </div>
                    
                    <div class="mt-8 p-4 bg-blue-50 rounded-lg">
                        <h4 class="font-bold text-blue-800 mb-2">
                            <i class="fas fa-lightbulb mr-2"></i>Real Example:
                        </h4>
                        <p class="text-blue-700 text-sm">
                            If you earn ¬£60,000, inflation-adjusted thresholds would save you ~¬£1,500/year.
                            Instead, that extra goes to the Treasury through "fiscal drag".
                        </p>
                    </div>
                </div>

                <!-- Chart -->
                <div class="bg-white rounded-2xl shadow-2xl p-6 md:p-8 slide-in">
                    <h2 class="text-2xl font-bold text-gray-800 mb-6 flex items-center">
                        <i class="fas fa-chart-line text-red-600 mr-3"></i>Stealth Tax Impact
                    </h2>
                    <div class="h-64">
                        <canvas id="taxChart"></canvas>
                    </div>
                    <p class="text-sm text-gray-500 mt-4 text-center">
                        How the stealth tax grows as your salary increases
                    </p>
                </div>
            </div>
        </div>

        <!-- Tax Band Info -->
        <div class="bg-white rounded-2xl shadow-2xl p-6 md:p-8 mb-12 slide-in">
            <h2 class="text-2xl font-bold text-gray-800 mb-6 text-center">
                <i class="fas fa-balance-scale text-red-600 mr-3"></i>UK Tax Bands 2024/25
            </h2>
            <div class="overflow-x-auto">
                <table class="w-full text-sm md:text-base">
                    <thead class="bg-gray-50">
                        <tr>
                            <th class="py-3 px-4 text-left">Tax Band</th>
                            <th class="py-3 px-4 text-left">Current Threshold</th>
                            <th class="py-3 px-4 text-left">If Adjusted for Inflation*</th>
                            <th class="py-3 px-4 text-left">Tax Rate</th>
                        </tr>
                    </thead>
                    <tbody class="divide-y divide-gray-200">
                        <tr>
                            <td class="py-3 px-4 font-medium">Personal Allowance</td>
                            <td class="py-3 px-4">¬£12,570</td>
                            <td class="py-3 px-4 text-green-600 font-medium">‚âà ¬£13,800</td>
                            <td class="py-3 px-4">0%</td>
                        </tr>
                        <tr>
                            <td class="py-3 px-4 font-medium">Basic Rate</td>
                            <td class="py-3 px-4">¬£12,571 - ¬£50,270</td>
                            <td class="py-3 px-4 text-green-600 font-medium">‚âà ¬£13,801 - ¬£55,200</td>
                            <td class="py-3 px-4">20%</td>
                        </tr>
                        <tr>
                            <td class="py-3 px-4 font-medium">Higher Rate</td>
                            <td class="py-3 px-4">¬£50,271 - ¬£125,140</td>
                            <td class="py-3 px-4 text-green-600 font-medium">‚âà ¬£55,201 - ¬£137,500</td>
                            <td class="py-3 px-4">40%</td>
                        </tr>
                        <tr>
                            <td class="py-3 px-4 font-medium">Additional Rate</td>
                            <td class="py-3 px-4">Over ¬£125,140</td>
                            <td class="py-3 px-4 text-green-600 font-medium">Over ‚âà ¬£137,500</td>
                            <td class="py-3 px-4">45%</td>
                        </tr>
                    </tbody>
                </table>
            </div>
            <p class="text-sm text-gray-500 mt-4">
                * Adjusted for ~15% cumulative inflation since thresholds were frozen (2021-2024)
            </p>
        </div>

        <!-- FAQ -->
        <div class="bg-white rounded-2xl shadow-2xl p-6 md:p-8 mb-12 slide-in">
            <h2 class="text-2xl font-bold text-gray-800 mb-6 text-center">
                <i class="fas fa-question-circle text-red-600 mr-3"></i>FAQ
            </h2>
            <div class="space-y-6">
                <div>
                    <h3 class="font-bold text-gray-800 mb-2">Is this calculator accurate?</h3>
                    <p class="text-gray-600">This shows approximate stealth tax based on HMRC tax bands and Bank of England inflation data. For exact tax calculations, consult an accountant.</p>
                </div>
                <div>
                    <h3 class="font-bold text-gray-800 mb-2">What data is collected?</h3>
                    <p class="text-gray-600">Nothing! All calculations happen in your browser. No data is sent to any server.</p>
                </div>
                <div>
                    <h3 class="font-bold text-gray-800 mb-2">Can I embed this on my site?</h3>
                    <p class="text-gray-600">Yes! <button onclick="copyEmbedCode()" class="text-red-600 hover:text-red-800 font-medium">Click here</button> to copy an embed code.</p>
                </div>
            </div>
        </div>

        <!-- Footer -->
        <footer class="text-center text-gray-600 pt-8 border-t">
            <div class="mb-4">
                <a href="#" class="text-red-600 hover:text-red-800 mx-3">GitHub</a> ‚Ä¢
                <a href="#" class="text-red-600 hover:text-red-800 mx-3">Twitter</a> ‚Ä¢
                <a href="#" class="text-red-600 hover:text-red-800 mx-3">Privacy</a>
            </div>
            <p class="text-sm">
                Made with <i class="fas fa-heart text-red-500"></i> for UK taxpayers ‚Ä¢ 
                Data: HMRC & ONS ‚Ä¢ Not affiliated with UK Government
            </p>
            <p class="text-xs mt-2 text-gray-500">
                This tool is for informational purposes only. Always consult a professional for tax advice.
            </p>
        </footer>
    </div>

    <!-- Toast Notification -->
    <div id="toast" class="fixed bottom-4 right-4 bg-gray-900 text-white px-6 py-3 rounded-lg shadow-xl hidden transform transition-transform duration-300 translate-y-10">
        <span id="toastMessage">Message</span>
    </div>

    <!-- The JavaScript -->
    <script>
        // Tax Calculator Class
        class StealthTaxCalculator {
            constructor() {
                // Current 2024/25 tax bands (frozen)
                this.currentBands = {
                    personalAllowance: 12570,
                    basicRate: { threshold: 50270, rate: 0.2 },
                    higherRate: { threshold: 125140, rate: 0.4 },
                    additionalRate: { threshold: 125140, rate: 0.45 }
                };
                
                // What bands SHOULD be with inflation adjustment (15% since 2021)
                this.adjustedBands = {
                    personalAllowance: 14455, // 12570 * 1.15
                    basicRate: { threshold: 57810, rate: 0.2 }, // 50270 * 1.15
                    higherRate: { threshold: 143911, rate: 0.4 }, // 125140 * 1.15
                    additionalRate: { threshold: 143911, rate: 0.45 }
                };
            }

            calculateTax(salary, bands) {
                if (salary <= bands.personalAllowance) return 0;
                
                let tax = 0;
                let taxable = salary - bands.personalAllowance;
                
                // Basic rate
                const basicBand = Math.min(taxable, bands.basicRate.threshold - bands.personalAllowance);
                tax += basicBand * bands.basicRate.rate;
                
                // Higher rate
                if (taxable > basicBand) {
                    const higherBand = Math.min(
                        taxable - basicBand,
                        bands.higherRate.threshold - bands.basicRate.threshold
                    );
                    tax += higherBand * bands.higherRate.rate;
                }
                
                // Additional rate
                if (taxable > basicBand + (bands.higherRate.threshold - bands.basicRate.threshold)) {
                    const additionalBand = taxable - basicBand - (bands.higherRate.threshold - bands.basicRate.threshold);
                    tax += additionalBand * bands.additionalRate.rate;
                }
                
                return Math.round(tax);
            }

            calculateDifference(salary) {
                const currentTax = this.calculateTax(salary, this.currentBands);
                const adjustedTax = this.calculateTax(salary, this.adjustedBands);
                
                return {
                    currentTax,
                    adjustedTax,
                    difference: currentTax - adjustedTax,
                    monthlyStealthTax: Math.round((currentTax - adjustedTax) / 12),
                    effectiveTaxRate: ((currentTax / salary) * 100).toFixed(1)
                };
            }

            generateChartData(salary) {
                const salaries = [];
                const stealthTaxes = [];
                
                // Generate data points from ¬£20k to ¬£150k
                for (let s = 20000; s <= 150000; s += 5000) {
                    salaries.push(s);
                    const diff = this.calculateDifference(s).difference;
                    stealthTaxes.push(diff);
                }
                
                // Highlight current salary point
                const highlightIndex = Math.floor((salary - 20000) / 5000);
                const backgroundColors = salaries.map((s, i) => 
                    i === highlightIndex ? 'rgba(239, 68, 68, 0.8)' : 'rgba(239, 68, 68, 0.2)'
                );
                
                return { salaries, stealthTaxes, backgroundColors };
            }
        }

        // Global Calculator Instance
        const calculator = new StealthTaxCalculator();
        let taxChart = null;

        // DOM Ready
        document.addEventListener('DOMContentLoaded', function() {
            // Initialize chart
            initChart();
            
            // Calculate on page load with default salary
            setTimeout(() => {
                calculateTax();
            }, 500);
            
            // Enter key support
            document.getElementById('salaryInput').addEventListener('keypress', function(e) {
                if (e.key === 'Enter') {
                    calculateTax();
                }
            });
        });

        // Helper Functions
        function setSalary(amount) {
            document.getElementById('salaryInput').value = amount;
            calculateTax();
        }

        function calculateTax() {
            const salaryInput = document.getElementById('salaryInput');
            let salary = parseFloat(salaryInput.value);
            
            // Validate
            if (!salary || salary < 10000) {
                showToast('Please enter a salary of at least ¬£10,000', 'error');
                salaryInput.focus();
                return;
            }
            
            // Limit to reasonable number
            if (salary > 1000000) {
                salary = 1000000;
                salaryInput.value = salary;
            }
            
            // Calculate
            const result = calculator.calculateDifference(salary);
            
            // Update UI
            document.getElementById('extraTax').textContent = result.difference.toLocaleString();
            document.getElementById('monthly').textContent = result.monthlyStealthTax.toLocaleString();
            document.getElementById('currentTax').textContent = result.currentTax.toLocaleString();
            document.getElementById('adjustedTax').textContent = result.adjustedTax.toLocaleString();
            
            // Show results section
            document.getElementById('results').classList.remove('hidden');
            
            // Update chart
            updateChart(salary);
            
            // Smooth scroll to results
            document.getElementById('results').scrollIntoView({ behavior: 'smooth', block: 'nearest' });
            
            showToast('Calculation complete!', 'success');
        }

        function initChart() {
            const ctx = document.getElementById('taxChart').getContext('2d');
            const data = calculator.generateChartData(60000);
            
            taxChart = new Chart(ctx, {
                type: 'bar',
                data: {
                    labels: data.salaries.map(s => '¬£' + (s/1000) + 'k'),
                    datasets: [{
                        label: 'Stealth Tax (¬£ per year)',
                        data: data.stealthTaxes,
                        backgroundColor: data.backgroundColors,
                        borderColor: 'rgba(239, 68, 68, 1)',
                        borderWidth: 1,
                        borderRadius: 5
                    }]
                },
                options: {
                    responsive: true,
                    maintainAspectRatio: false,
                    plugins: {
                        legend: { display: false },
                        tooltip: {
                            callbacks: {
                                label: function(context) {
                                    return `Stealth tax: ¬£${context.raw.toLocaleString()}/year`;
                                }
                            }
                        }
                    },
                    scales: {
                        y: {
                            beginAtZero: true,
                            title: {
                                display: true,
                                text: 'Extra Tax (¬£ per year)'
                            },
                            ticks: {
                                callback: function(value) {
                                    return '¬£' + value.toLocaleString();
                                }
                            }
                        },
                        x: {
                            title: {
                                display: true,
                                text: 'Annual Salary'
                            },
                            ticks: {
                                maxRotation: 0
                            }
                        }
                    }
                }
            });
        }

        function updateChart(salary) {
            const data = calculator.generateChartData(salary);
            
            taxChart.data.datasets[0].data = data.stealthTaxes;
            taxChart.data.datasets[0].backgroundColor = data.backgroundColors;
            taxChart.update();
        }

        // Sharing Functions
        function shareTwitter() {
            const salary = document.getElementById('salaryInput').value;
            const extra = document.getElementById('extraTax').textContent;
            
            const tweetText = `I just found out that frozen tax thresholds are costing me ¬£${extra} extra per year! Check your stealth tax:`;
            const url = window.location.href;
            
            window.open(
                `https://twitter.com/intent/tweet?text=${encodeURIComponent(tweetText)}&url=${encodeURIComponent(url)}`,
                '_blank'
            );
        }

        function shareLinkedIn() {
            const url = window.location.href;
            window.open(
                `https://www.linkedin.com/sharing/share-offsite/?url=${encodeURIComponent(url)}`,
                '_blank'
            );
        }

        function copyLink() {
            const url = window.location.href;
            navigator.clipboard.writeText(url).then(() => {
                showToast('Link copied to clipboard!', 'success');
            });
        }

        function copyEmbedCode() {
            const embedCode = `<iframe src="${window.location.href}" width="100%" height="800" frameborder="0" style="border-radius: 12px;"></iframe>`;
            navigator.clipboard.writeText(embedCode).then(() => {
                showToast('Embed code copied!', 'success');
            });
        }

        // Toast Notification
        function showToast(message, type = 'info') {
            const toast = document.getElementById('toast');
            const toastMessage = document.getElementById('toastMessage');
            
            toastMessage.textContent = message;
            
            // Set color based on type
            if (type === 'error') {
                toast.className = toast.className.replace('bg-gray-900', 'bg-red-600');
            } else if (type === 'success') {
                toast.className = toast.className.replace('bg-gray-900', 'bg-green-600');
            } else {
                toast.className = toast.className.replace('bg-red-600 bg-green-600', 'bg-gray-900');
            }
            
            toast.classList.remove('hidden', 'translate-y-10');
            toast.classList.add('translate-y-0');
            
            // Auto hide
            setTimeout(() => {
                toast.classList.remove('translate-y-0');
                toast.classList.add('translate-y-10');
                setTimeout(() => {
                    toast.classList.add('hidden');
                }, 300);
            }, 3000);
        }

        // Add some sample data for demonstration
        function showSampleData() {
            const samples = [
                { salary: 35000, stealthTax: 450 },
                { salary: 55000, stealthTax: 1100 },
                { salary: 75000, stealthTax: 1850 },
                { salary: 95000, stealthTax: 2600 },
                { salary: 120000, stealthTax: 3800 }
            ];
            
            console.log('Sample Stealth Tax Data:');
            samples.forEach(sample => {
                console.log(`¬£${sample.salary.toLocaleString()} salary = ¬£${sample.stealthTax} extra tax/year`);
            });
        }

        // Initialize sample data
        showSampleData();
    </script>
</body>
</html>
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ArbitragePro | Professional Crypto Arbitrage Platform</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&display=swap" rel="stylesheet">
    <style>
        :root {
            --primary: #2563eb;
            --primary-light: #3b82f6;
            --primary-dark: #1d4ed8;
            --secondary: #64748b;
            --success: #10b981;
            --success-light: #34d399;
            --warning: #f59e0b;
            --danger: #ef4444;
            --dark: #0f172a;
            --darker: #0b1120;
            --light: #f8fafc;
            --gray: #94a3b8;
            --card-bg: #ffffff;
            --card-border: #e2e8f0;
            --card-hover: #f8fafc;
            --text-primary: #0f172a;
            --text-secondary: #475569;
            --text-muted: #64748b;
            --bg-primary: #f1f5f9;
            --bg-secondary: #ffffff;
            --shadow: 0 1px 3px 0 rgba(0, 0, 0, 0.1), 0 1px 2px 0 rgba(0, 0, 0, 0.06);
            --shadow-lg: 0 10px 15px -3px rgba(0, 0, 0, 0.1), 0 4px 6px -2px rgba(0, 0, 0, 0.05);
            --shadow-xl: 0 20px 25px -5px rgba(0, 0, 0, 0.1), 0 10px 10px -5px rgba(0, 0, 0, 0.04);
            --border-radius: 12px;
            --transition: all 0.2s ease-in-out;
        }

        .dark-mode {
            --primary: #3b82f6;
            --primary-light: #60a5fa;
            --primary-dark: #2563eb;
            --secondary: #94a3b8;
            --success: #10b981;
            --success-light: #34d399;
            --warning: #f59e0b;
            --danger: #ef4444;
            --dark: #0f172a;
            --darker: #0b1120;
            --light: #1e293b;
            --gray: #475569;
            --card-bg: #1e293b;
            --card-border: #334155;
            --card-hover: #273549;
            --text-primary: #f1f5f9;
            --text-secondary: #cbd5e1;
            --text-muted: #94a3b8;
            --bg-primary: #0f172a;
            --bg-secondary: #1e293b;
            --shadow: 0 1px 3px 0 rgba(0, 0, 0, 0.3), 0 1px 2px 0 rgba(0, 0, 0, 0.2);
            --shadow-lg: 0 10px 15px -3px rgba(0, 0, 0, 0.3), 0 4px 6px -2px rgba(0, 0, 0, 0.2);
            --shadow-xl: 0 20px 25px -5px rgba(0, 0, 0, 0.3), 0 10px 10px -5px rgba(0, 0, 0, 0.2);
        }

        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: 'Inter', -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen, Ubuntu, Cantarell, sans-serif;
        }

        body {
            background-color: var(--bg-primary);
            color: var(--text-primary);
            line-height: 1.6;
            font-size: 16px;
            transition: var(--transition);
            min-height: 100vh;
            display: flex;
            flex-direction: column;
        }

        .app-container {
            flex: 1;
            display: flex;
            flex-direction: column;
            max-width: 100%;
            margin: 0 auto;
            width: 100%;
        }

        /* Header - MOBILE FIXED */
        header {
            background-color: var(--card-bg);
            border-bottom: 1px solid var(--card-border);
            padding: 1rem;
            position: sticky;
            top: 0;
            z-index: 100;
            box-shadow: var(--shadow);
            display: flex;
            justify-content: space-between;
            align-items: center;
            width: 100%;
        }

        .logo {
            display: flex;
            align-items: center;
            gap: 0.75rem;
        }

        .logo-icon {
            width: 40px;
            height: 40px;
            background: linear-gradient(135deg, var(--primary), var(--success));
            border-radius: 10px;
            display: flex;
            align-items: center;
            justify-content: center;
            box-shadow: 0 4px 6px rgba(37, 99, 235, 0.2);
        }

        .logo-icon i {
            font-size: 1.25rem;
            color: white;
        }

        .logo-text {
            display: flex;
            flex-direction: column;
        }

        .logo-text h1 {
            font-size: 1.25rem;
            font-weight: 700;
            color: var(--text-primary);
            line-height: 1.2;
        }

        .logo-text span {
            font-size: 0.75rem;
            color: var(--text-muted);
            font-weight: 500;
        }

        .header-controls {
            display: flex;
            align-items: center;
            gap: 0.75rem;
        }

        .theme-toggle {
            display: flex;
            align-items: center;
            gap: 0.5rem;
            cursor: pointer;
            padding: 0.5rem;
            border-radius: 8px;
            background: var(--bg-secondary);
            border: 1px solid var(--card-border);
            transition: var(--transition);
        }

        .theme-toggle:hover {
            background: var(--card-hover);
        }

        .theme-toggle i {
            font-size: 1.125rem;
            color: var(--text-muted);
        }

        /* Main Content - MOBILE FIXED */
        .main-content {
            flex: 1;
            padding: 1.5rem 1rem;
            width: 100%;
            max-width: 1200px;
            margin: 0 auto;
        }

        /* Dashboard Overview */
        .dashboard-overview {
            display: grid;
            grid-template-columns: repeat(2, 1fr);
            gap: 1rem;
            margin-bottom: 1.5rem;
        }

        @media (min-width: 768px) {
            .dashboard-overview {
                grid-template-columns: repeat(4, 1fr);
                gap: 1.5rem;
            }
        }

        .overview-card {
            background: var(--card-bg);
            border-radius: var(--border-radius);
            padding: 1.25rem;
            border: 1px solid var(--card-border);
            box-shadow: var(--shadow);
            transition: var(--transition);
            width: 100%;
        }

        .overview-card:hover {
            box-shadow: var(--shadow-lg);
            transform: translateY(-2px);
        }

        .overview-card-header {
            display: flex;
            justify-content: space-between;
            align-items: flex-start;
            margin-bottom: 1rem;
        }

        .overview-card-title {
            font-size: 0.75rem;
            font-weight: 600;
            color: var(--text-muted);
            text-transform: uppercase;
            letter-spacing: 0.05em;
        }

        .overview-card-icon {
            width: 36px;
            height: 36px;
            border-radius: 8px;
            background: rgba(37, 99, 235, 0.1);
            display: flex;
            align-items: center;
            justify-content: center;
            color: var(--primary);
        }

        .overview-card-value {
            font-size: 1.5rem;
            font-weight: 700;
            color: var(--text-primary);
            margin-bottom: 0.25rem;
        }

        .overview-card-change {
            font-size: 0.75rem;
            font-weight: 500;
            display: flex;
            align-items: center;
            gap: 0.25rem;
        }

        .change-positive {
            color: var(--success);
        }

        .change-negative {
            color: var(--danger);
        }

        /* Dashboard Grid */
        .dashboard-grid {
            display: grid;
            grid-template-columns: 1fr;
            gap: 1.5rem;
            width: 100%;
        }

        @media (min-width: 1024px) {
            .dashboard-grid {
                grid-template-columns: 1fr 1fr;
            }
        }

        /* Cards */
        .card {
            background: var(--card-bg);
            border-radius: var(--border-radius);
            padding: 1.5rem;
            border: 1px solid var(--card-border);
            box-shadow: var(--shadow);
            transition: var(--transition);
            width: 100%;
        }

        .card:hover {
            box-shadow: var(--shadow-lg);
        }

        .card-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 1.5rem;
            padding-bottom: 1rem;
            border-bottom: 1px solid var(--card-border);
            flex-wrap: wrap;
            gap: 1rem;
        }

        .card-title {
            font-size: 1.125rem;
            font-weight: 600;
            color: var(--text-primary);
            display: flex;
            align-items: center;
            gap: 0.75rem;
        }

        .card-title i {
            color: var(--primary);
            background: rgba(37, 99, 235, 0.1);
            width: 36px;
            height: 36px;
            border-radius: 8px;
            display: flex;
            align-items: center;
            justify-content: center;
        }

        /* Controls */
        .controls {
            display: flex;
            flex-direction: column;
            gap: 1rem;
            margin-bottom: 1.5rem;
        }

        .control-row {
            display: flex;
            gap: 1rem;
            flex-wrap: wrap;
        }

        .control-group {
            display: flex;
            flex-direction: column;
            flex: 1;
            min-width: 150px;
        }

        label {
            margin-bottom: 0.5rem;
            font-weight: 500;
            color: var(--text-secondary);
            font-size: 0.875rem;
        }

        select, input {
            padding: 0.75rem 1rem;
            border-radius: 8px;
            border: 1px solid var(--card-border);
            background: var(--bg-secondary);
            color: var(--text-primary);
            font-size: 0.875rem;
            width: 100%;
            transition: var(--transition);
        }

        select:focus, input:focus {
            outline: none;
            border-color: var(--primary);
            box-shadow: 0 0 0 3px rgba(37, 99, 235, 0.1);
        }

        /* Buttons */
        .btn {
            padding: 0.75rem 1.5rem;
            border-radius: 8px;
            border: none;
            font-weight: 600;
            cursor: pointer;
            transition: var(--transition);
            font-size: 0.875rem;
            display: inline-flex;
            align-items: center;
            justify-content: center;
            gap: 0.5rem;
            width: 100%;
        }

        @media (min-width: 768px) {
            .btn {
                width: auto;
            }
        }

        .btn-primary {
            background: var(--primary);
            color: white;
            box-shadow: 0 1px 2px rgba(37, 99, 235, 0.1);
        }

        .btn-primary:hover {
            background: var(--primary-dark);
            transform: translateY(-1px);
            box-shadow: 0 4px 6px rgba(37, 99, 235, 0.2);
        }

        .btn-outline {
            background: transparent;
            border: 1px solid var(--primary);
            color: var(--primary);
        }

        .btn-outline:hover {
            background: rgba(37, 99, 235, 0.05);
        }

        .btn-success {
            background: var(--success);
            color: white;
            box-shadow: 0 1px 2px rgba(16, 185, 129, 0.1);
        }

        .btn-success:hover {
            background: var(--success-light);
            transform: translateY(-1px);
            box-shadow: 0 4px 6px rgba(16, 185, 129, 0.2);
        }

        .btn-group {
            display: flex;
            gap: 1rem;
            margin-top: 1.5rem;
            flex-direction: column;
        }

        @media (min-width: 768px) {
            .btn-group {
                flex-direction: row;
                flex-wrap: wrap;
            }
        }

        /* Tables */
        .table-container {
            overflow-x: auto;
            margin-top: 1.5rem;
            border-radius: 8px;
            border: 1px solid var(--card-border);
            width: 100%;
        }

        table {
            width: 100%;
            border-collapse: collapse;
            font-size: 0.875rem;
            min-width: 600px;
        }

        th {
            background: var(--bg-secondary);
            padding: 1rem;
            text-align: left;
            color: var(--text-muted);
            font-weight: 600;
            font-size: 0.75rem;
            text-transform: uppercase;
            letter-spacing: 0.05em;
            border-bottom: 1px solid var(--card-border);
        }

        td {
            padding: 1rem;
            border-bottom: 1px solid var(--card-border);
        }

        tr:last-child td {
            border-bottom: none;
        }

        tr:hover {
            background: var(--card-hover);
        }

        .profit {
            color: var(--success);
            font-weight: 600;
        }

        .loss {
            color: var(--danger);
            font-weight: 600;
        }

        /* Status Indicators */
        .status-indicator {
            display: flex;
            align-items: center;
            gap: 0.5rem;
            font-size: 0.875rem;
            margin-top: 1rem;
            color: var(--text-muted);
            padding: 0.75rem 1rem;
            background: var(--bg-secondary);
            border-radius: 8px;
            border: 1px solid var(--card-border);
        }

        .status-dot {
            width: 8px;
            height: 8px;
            border-radius: 50%;
            background-color: var(--success);
        }

        .status-dot.offline {
            background-color: var(--danger);
        }

        .scan-status {
            display: flex;
            align-items: center;
            gap: 0.75rem;
            padding: 0.75rem 1rem;
            background: var(--bg-secondary);
            border-radius: 8px;
            margin-top: 1rem;
            font-size: 0.875rem;
            border: 1px solid var(--card-border);
        }

        .scan-status .spinner {
            width: 16px;
            height: 16px;
            border: 2px solid rgba(37, 99, 235, 0.2);
            border-top: 2px solid var(--primary);
            border-radius: 50%;
            animation: spin 1s linear infinite;
        }

        @keyframes spin {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
        }

        /* Opportunity Cards */
        .opportunity-card {
            background: var(--bg-secondary);
            border-radius: 8px;
            padding: 1.5rem;
            margin-top: 1.5rem;
            border: 1px solid rgba(37, 99, 235, 0.2);
            position: relative;
            overflow: hidden;
        }

        .opportunity-card::before {
            content: "";
            position: absolute;
            top: 0;
            left: 0;
            width: 4px;
            height: 100%;
            background: linear-gradient(to bottom, var(--primary), var(--success));
        }

        .opportunity-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 1rem;
        }

        .opportunity-badge {
            padding: 0.25rem 0.75rem;
            border-radius: 20px;
            font-size: 0.75rem;
            font-weight: 700;
        }

        .badge-success {
            background: rgba(16, 185, 129, 0.1);
            color: var(--success);
        }

        .badge-warning {
            background: rgba(245, 158, 11, 0.1);
            color: var(--warning);
        }

        .opportunity-content {
            display: grid;
            grid-template-columns: repeat(2, 1fr);
            gap: 1rem;
        }

        @media (min-width: 768px) {
            .opportunity-content {
                grid-template-columns: repeat(3, 1fr);
            }
        }

        .opportunity-item {
            display: flex;
            flex-direction: column;
        }

        .opportunity-label {
            color: var(--text-muted);
            font-size: 0.75rem;
            margin-bottom: 0.25rem;
            text-transform: uppercase;
            letter-spacing: 0.05em;
        }

        .opportunity-value {
            font-size: 1rem;
            font-weight: 600;
        }

        /* Charts */
        .chart-container {
            height: 250px;
            margin-top: 1.5rem;
            width: 100%;
        }

        @media (min-width: 768px) {
            .chart-container {
                height: 280px;
            }
        }

        /* Tabs */
        .tabs {
            display: flex;
            gap: 0.5rem;
            margin-bottom: 1.5rem;
            overflow-x: auto;
            padding-bottom: 0.5rem;
            width: 100%;
        }

        .tab {
            padding: 0.75rem 1.25rem;
            background: var(--bg-secondary);
            border-radius: 8px;
            cursor: pointer;
            transition: var(--transition);
            white-space: nowrap;
            border: 1px solid var(--card-border);
            font-weight: 500;
            font-size: 0.875rem;
        }

        .tab.active {
            background: rgba(37, 99, 235, 0.1);
            border-color: var(--primary);
            color: var(--primary);
        }

        .tab-content {
            display: none;
            width: 100%;
        }

        .tab-content.active {
            display: block;
        }

        /* Footer - MOBILE FIXED */
        footer {
            text-align: center;
            margin-top: 3rem;
            padding: 1.5rem;
            color: var(--text-muted);
            font-size: 0.75rem;
            background: var(--card-bg);
            border-top: 1px solid var(--card-border);
            width: 100%;
        }

        /* Mobile Responsiveness */
        @media (max-width: 767px) {
            .theme-toggle span {
                display: none;
            }

            .control-row {
                flex-direction: column;
            }

            .control-group {
                min-width: 100%;
            }

            .card-header {
                flex-direction: column;
                align-items: flex-start;
            }

            .card-title {
                font-size: 1rem;
            }

            .logo-text h1 {
                font-size: 1.125rem;
            }

            .logo-text span {
                font-size: 0.7rem;
            }
        }

        @media (max-width: 480px) {
            .dashboard-overview {
                grid-template-columns: 1fr;
            }

            .opportunity-content {
                grid-template-columns: 1fr;
            }
        }
    </style>
</head>
<body>
    <div class="app-container">
        <header>
            <div class="logo">
                <div class="logo-icon">
                    <i class="fas fa-chart-network"></i>
                </div>
                <div class="logo-text">
                    <h1>ArbitragePro</h1>
                    <span>Professional Crypto Arbitrage</span>
                </div>
            </div>
            
            <div class="header-controls">
                <div class="theme-toggle" id="theme-toggle">
                    <i class="fas fa-moon"></i>
                    <span>Dark Mode</span>
                </div>
            </div>
        </header>
        
        <div class="main-content">
            <div class="dashboard-overview">
                <div class="overview-card">
                    <div class="overview-card-header">
                        <div class="overview-card-title">Total Profit</div>
                        <div class="overview-card-icon">
                            <i class="fas fa-dollar-sign"></i>
                        </div>
                    </div>
                    <div class="overview-card-value">$0.00</div>
                    <div class="overview-card-change">
                        <span>No data</span>
                    </div>
                </div>
                
                <div class="overview-card">
                    <div class="overview-card-header">
                        <div class="overview-card-title">Active Opportunities</div>
                        <div class="overview-card-icon">
                            <i class="fas fa-bolt"></i>
                        </div>
                    </div>
                    <div class="overview-card-value">0</div>
                    <div class="overview-card-change">
                        <span>No data</span>
                    </div>
                </div>
                
                <div class="overview-card">
                    <div class="overview-card-header">
                        <div class="overview-card-title">Success Rate</div>
                        <div class="overview-card-icon">
                            <i class="fas fa-chart-line"></i>
                        </div>
                    </div>
                    <div class="overview-card-value">0%</div>
                    <div class="overview-card-change">
                        <span>No data</span>
                    </div>
                </div>
                
                <div class="overview-card">
                    <div class="overview-card-header">
                        <div class="overview-card-title">Risk Score</div>
                        <div class="overview-card-icon">
                            <i class="fas fa-shield-alt"></i>
                        </div>
                    </div>
                    <div class="overview-card-value">0/10</div>
                    <div class="overview-card-change">
                        <span>No data</span>
                    </div>
                </div>
            </div>
            
            <div class="tabs">
                <div class="tab active" data-tab="scanner">Arbitrage Scanner</div>
                <div class="tab" data-tab="triangular">Triangular Arbitrage</div>
                <div class="tab" data-tab="cross-chain">Cross-Chain</div>
                <div class="tab" data-tab="portfolio">Portfolio</div>
                <div class="tab" data-tab="backtesting">Backtesting</div>
            </div>
            
            <div class="dashboard-grid">
                <!-- Arbitrage Scanner Tab -->
                <div class="tab-content active" id="scanner-tab">
                    <div class="card">
                        <div class="card-header">
                            <h2 class="card-title"><i class="fas fa-search-dollar"></i> Arbitrage Scanner</h2>
                            <div class="scan-status" id="scan-status">
                                <div class="spinner"></div>
                                <span id="scan-text">Ready to scan</span>
                            </div>
                        </div>
                        
                        <div class="controls">
                            <div class="control-row">
                                <div class="control-group">
                                    <label for="crypto-pair">Crypto Pair</label>
                                    <select id="crypto-pair">
                                        <option value="BTC/USDT">BTC/USDT</option>
                                        <option value="ETH/USDT" selected>ETH/USDT</option>
                                        <option value="SOL/USD">SOL/USD</option>
                                        <option value="BNB/USDT">BNB/USDT</option>
                                        <option value="XRP/USDT">XRP/USDT</option>
                                        <option value="ADA/USD">ADA/USD</option>
                                        <option value="DOGE/USD">DOGE/USD</option>
                                        <option value="DOT/USDT">DOT/USDT</option>
                                        <option value="LTC/USD">LTC/USD</option>
                                    </select>
                                </div>
                                
                                <div class="control-group">
                                    <label for="min-profit">Min Profit (%)</label>
                                    <input type="number" id="min-profit" value="0.5" step="0.1" min="0">
                                </div>
                            </div>
                            
                            <div class="control-row">
                                <div class="control-group">
                                    <label for="fee-percentage">Trading Fee (%)</label>
                                    <input type="number" id="fee-percentage" value="0.1" step="0.01" min="0">
                                </div>
                                
                                <div class="control-group">
                                    <label for="transfer-fee">Transfer Fee (%)</label>
                                    <input type="number" id="transfer-fee" value="0.05" step="0.01" min="0">
                                </div>
                            </div>
                        </div>
                        
                        <div class="btn-group">
                            <button id="scan-btn" class="btn btn-primary">
                                <i class="fas fa-sync-alt"></i> Scan Arbitrage
                            </button>
                            
                            <button id="export-csv" class="btn btn-outline">
                                <i class="fas fa-file-csv"></i> Export CSV
                            </button>
                            
                            <button id="auto-scan" class="btn btn-success">
                                <i class="fas fa-play"></i> Auto Scan
                            </button>
                        </div>
                        
                        <div class="status-indicator">
                            <div class="status-dot" id="status-dot"></div>
                            <span id="status-text">Ready to connect to market data</span>
                        </div>
                        
                        <div class="table-container">
                            <table>
                                <thead>
                                    <tr>
                                        <th>Exchange</th>
                                        <th>Price</th>
                                        <th>Spread</th>
                                        <th>Profit</th>
                                        <th>Volume (24h)</th>
                                        <th>Action</th>
                                    </tr>
                                </thead>
                                <tbody id="exchange-data">
                                    <tr>
                                        <td colspan="6" style="text-align: center; padding: 30px;">
                                            <i class="fas fa-search" style="font-size: 2rem; margin-bottom: 15px; color: var(--text-muted);"></i>
                                            <p>Click "Scan Arbitrage" to find opportunities</p>
                                        </td>
                                    </tr>
                                </tbody>
                            </table>
                        </div>
                        
                        <div class="opportunity-card">
                            <div class="opportunity-header">
                                <h3>Best Opportunity</h3>
                                <span class="opportunity-badge">INACTIVE</span>
                            </div>
                            <div class="opportunity-content">
                                <div class="opportunity-item">
                                    <span class="opportunity-label">Buy From</span>
                                    <span class="opportunity-value" id="buy-exchange">-</span>
                                </div>
                                <div class="opportunity-item">
                                    <span class="opportunity-label">Sell To</span>
                                    <span class="opportunity-value" id="sell-exchange">-</span>
                                </div>
                                <div class="opportunity-item">
                                    <span class="opportunity-label">Spread</span>
                                    <span class="opportunity-value" id="spread-value">0.00%</span>
                                </div>
                                <div class="opportunity-item">
                                    <span class="opportunity-label">Profit</span>
                                    <span class="opportunity-value" id="profit-value">0.00%</span>
                                </div>
                                <div class="opportunity-item">
                                    <span class="opportunity-label">Time Window</span>
                                    <span class="opportunity-value" id="time-window">-</span>
                                </div>
                                <div class="opportunity-item">
                                    <span class="opportunity-label">Success Probability</span>
                                    <span class="opportunity-value" id="arb-success">0%</span>
                                </div>
                            </div>
                        </div>
                    </div>
                    
                    <div class="card">
                        <div class="card-header">
                            <h2 class="card-title"><i class="fas fa-chart-line"></i> Risk Simulator</h2>
                        </div>
                        
                        <div class="controls">
                            <div class="control-row">
                                <div class="control-group">
                                    <label for="simulation-type">Simulation Type</label>
                                    <select id="simulation-type">
                                        <option value="monte-carlo">Monte Carlo</option>
                                        <option value="volatility">Volatility Analysis</option>
                                        <option value="historical">Historical Performance</option>
                                    </select>
                                </div>
                                
                                <div class="control-group">
                                    <label for="risk-factor">Risk Factor</label>
                                    <select id="risk-factor">
                                        <option value="low">Low</option>
                                        <option value="medium" selected>Medium</option>
                                        <option value="high">High</option>
                                    </select>
                                </div>
                            </div>
                            
                            <div class="control-row">
                                <div class="control-group">
                                    <label for="simulation-period">Period (mins)</label>
                                    <input type="number" id="simulation-period" value="10" min="1" max="60">
                                </div>
                                
                                <div class="control-group">
                                    <label for="trade-amount">Trade Amount ($)</label>
                                    <input type="number" id="trade-amount" value="1000" min="10">
                                </div>
                            </div>
                        </div>
                        
                        <div class="btn-group">
                            <button id="run-simulation" class="btn btn-primary">
                                <i class="fas fa-play"></i> Run Simulation
                            </button>
                            
                            <button id="save-simulation" class="btn btn-outline">
                                <i class="fas fa-save"></i> Save Profile
                            </button>
                        </div>
                        
                        <div class="chart-container">
                            <canvas id="risk-chart"></canvas>
                        </div>
                        
                        <div class="opportunity-card">
                            <div class="opportunity-header">
                                <h3>Risk Analysis</h3>
                                <span class="opportunity-badge">NO DATA</span>
                            </div>
                            <div class="opportunity-content">
                                <div class="opportunity-item">
                                    <span class="opportunity-label">Success Probability</span>
                                    <span class="opportunity-value" id="success-prob">0%</span>
                                </div>
                                <div class="opportunity-item">
                                    <span class="opportunity-label">Avg. Profit</span>
                                    <span class="opportunity-value" id="avg-profit">0.00%</span>
                                </div>
                                <div class="opportunity-item">
                                    <span class="opportunity-label">Max Drawdown</span>
                                    <span class="opportunity-value" id="max-drawdown">0.00%</span>
                                </div>
                                <div class="opportunity-item">
                                    <span class="opportunity-label">Est. Profit</span>
                                    <span class="opportunity-value" id="est-profit">$0.00</span>
                                </div>
                                <div class="opportunity-item">
                                    <span class="opportunity-label">Volatility</span>
                                    <span class="opportunity-value" id="volatility">0.00%</span>
                                </div>
                                <div class="opportunity-item">
                                    <span class="opportunity-label">Risk Score</span>
                                    <span class="opportunity-value" id="risk-score">0/10</span>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
                
                <!-- Triangular Arbitrage Tab -->
                <div class="tab-content" id="triangular-tab">
                    <div class="card">
                        <div class="card-header">
                            <h2 class="card-title"><i class="fas fa-exchange-alt"></i> Triangular Arbitrage</h2>
                        </div>
                        
                        <div class="controls">
                            <div class="control-row">
                                <div class="control-group">
                                    <label for="tri-pair1">Trading Pair 1</label>
                                    <select id="tri-pair1">
                                        <option value="BTC/USDT">BTC/USDT</option>
                                        <option value="ETH/USDT" selected>ETH/USDT</option>
                                        <option value="BNB/USDT">BNB/USDT</option>
                                    </select>
                                </div>
                                
                                <div class="control-group">
                                    <label for="tri-pair2">Trading Pair 2</label>
                                    <select id="tri-pair2">
                                        <option value="ETH/BTC">ETH/BTC</option>
                                        <option value="BNB/BTC" selected>BNB/BTC</option>
                                        <option value="ADA/BTC">ADA/BTC</option>
                                    </select>
                                </div>
                                
                                <div class="control-group">
                                    <label for="tri-pair3">Trading Pair 3</label>
                                    <select id="tri-pair3">
                                        <option value="BNB/ETH">BNB/ETH</option>
                                        <option value="ADA/ETH" selected>ADA/ETH</option>
                                        <option value="DOT/ETH">DOT/ETH</option>
                                    </select>
                                </div>
                            </div>
                        </div>
                        
                        <div class="btn-group">
                            <button id="scan-triangular" class="btn btn-primary">
                                <i class="fas fa-sync-alt"></i> Scan Triangular
                            </button>
                        </div>
                        
                        <div class="table-container">
                            <table>
                                <thead>
                                    <tr>
                                        <th>Arbitrage Path</th>
                                        <th>Profit</th>
                                        <th>Exchanges</th>
                                        <th>Time Window</th>
                                        <th>Risk</th>
                                        <th>Action</th>
                                    </tr>
                                </thead>
                                <tbody id="triangular-data">
                                    <tr>
                                        <td colspan="6" style="text-align: center; padding: 30px;">
                                            <i class="fas fa-search" style="font-size: 2rem; margin-bottom: 15px; color: var(--text-muted);"></i>
                                            <p>Click "Scan Triangular" to find opportunities</p>
                                        </td>
                                    </tr>
                                </tbody>
                            </table>
                        </div>
                    </div>
                </div>
            </div>
        </div>
        
        <footer>
            <p>ArbitragePro - Professional Crypto Arbitrage Platform</p>
            <p>© 2023 ArbitragePro Technologies | Privacy Guaranteed</p>
        </footer>
    </div>

    <script>
        // Initialize the application
        document.addEventListener('DOMContentLoaded', function() {
            initTheme();
            initCharts();
            setupEventListeners();
            initTabs();
            
            // Request notification permission
            if (Notification.permission !== 'granted') {
                Notification.requestPermission();
            }
        });
        
        // Theme management
        function initTheme() {
            const themeToggle = document.getElementById('theme-toggle');
            const themeIcon = themeToggle.querySelector('i');
            const themeText = themeToggle.querySelector('span');
            
            // Check for saved theme or prefer color scheme
            const savedTheme = localStorage.getItem('theme');
            const prefersDark = window.matchMedia('(prefers-color-scheme: dark)').matches;
            
            if (savedTheme === 'dark' || (!savedTheme && prefersDark)) {
                document.body.classList.add('dark-mode');
                themeIcon.className = 'fas fa-sun';
                themeText.textContent = 'Light Mode';
            } else {
                document.body.classList.remove('dark-mode');
                themeIcon.className = 'fas fa-moon';
                themeText.textContent = 'Dark Mode';
            }
            
            themeToggle.addEventListener('click', function() {
                if (document.body.classList.contains('dark-mode')) {
                    document.body.classList.remove('dark-mode');
                    localStorage.setItem('theme', 'light');
                    themeIcon.className = 'fas fa-moon';
                    themeText.textContent = 'Dark Mode';
                } else {
                    document.body.classList.add('dark-mode');
                    localStorage.setItem('theme', 'dark');
                    themeIcon.className = 'fas fa-sun';
                    themeText.textContent = 'Light Mode';
                }
                
                // Update charts for new theme
                updateChartsTheme();
            });
        }
        
        // Tabs functionality
        function initTabs() {
            const tabs = document.querySelectorAll('.tab');
            const tabContents = document.querySelectorAll('.tab-content');
            
            tabs.forEach(tab => {
                tab.addEventListener('click', () => {
                    // Remove active class from all tabs and contents
                    tabs.forEach(t => t.classList.remove('active'));
                    tabContents.forEach(c => c.classList.remove('active'));
                    
                    // Add active class to clicked tab
                    tab.classList.add('active');
                    
                    // Show corresponding content
                    const tabId = tab.getAttribute('data-tab');
                    document.getElementById(`${tabId}-tab`).classList.add('active');
                });
            });
        }
        
        // Chart instances
        let riskChart = null;
        let autoScanInterval = null;
        
        // Initialize charts
        function initCharts() {
            initRiskChart();
        }
        
        function initRiskChart() {
            const ctx = document.getElementById('risk-chart').getContext('2d');
            
            // Generate empty data for the risk chart
            const labels = Array.from({length: 20}, (_, i) => `Step ${i+1}`);
            const data = Array.from({length: 20}, () => 0);
            
            riskChart = new Chart(ctx, {
                type: 'line',
                data: {
                    labels: labels,
                    datasets: [{
                        label: 'Profit Probability',
                        data: data,
                        borderColor: getComputedStyle(document.documentElement).getPropertyValue('--success'),
                        backgroundColor: 'rgba(16, 185, 129, 0.1)',
                        borderWidth: 3,
                        fill: true,
                        tension: 0.4,
                        pointBackgroundColor: getComputedStyle(document.documentElement).getPropertyValue('--success'),
                        pointBorderColor: '#fff',
                        pointBorderWidth: 2,
                        pointRadius: 4
                    }]
                },
                options: {
                    responsive: true,
                    maintainAspectRatio: false,
                    plugins: {
                        legend: {
                            display: false
                        },
                        tooltip: {
                            backgroundColor: 'rgba(30, 41, 59, 0.9)',
                            titleColor: '#f1f5f9',
                            bodyColor: '#cbd5e1',
                            borderColor: 'rgba(255, 255, 255, 0.1)',
                            borderWidth: 1,
                            callbacks: {
                                label: function(context) {
                                    return `Profit chance: ${context.parsed.y.toFixed(1)}%`;
                                }
                            }
                        }
                    },
                    scales: {
                        y: {
                            beginAtZero: true,
                            min: 0,
                            max: 100,
                            grid: {
                                color: 'rgba(148, 163, 184, 0.1)'
                            },
                            ticks: {
                                color: getComputedStyle(document.documentElement).getPropertyValue('--text-muted'),
                                callback: function(value) {
                                    return value + '%';
                                }
                            }
                        },
                        x: {
                            grid: {
                                display: false
                            },
                            ticks: {
                                color: getComputedStyle(document.documentElement).getPropertyValue('--text-muted')
                            }
                        }
                    }
                }
            });
        }
        
        function updateChartsTheme() {
            if (riskChart) riskChart.update();
        }
        
        function setupEventListeners() {
            document.getElementById('scan-btn').addEventListener('click', scanArbitrage);
            document.getElementById('export-csv').addEventListener('click', exportCSV);
            document.getElementById('run-simulation').addEventListener('click', runSimulation);
            document.getElementById('auto-scan').addEventListener('click', toggleAutoScan);
            document.getElementById('scan-triangular').addEventListener('click', scanTriangularArbitrage);
        }
        
        // Exchange data cache
        const exchangeData = {
            'Binance': { price: 0, volume: 0, lastUpdated: 0 },
            'Coinbase': { price: 0, volume: 0, lastUpdated: 0 },
            'Kraken': { price: 0, volume: 0, lastUpdated: 0 },
            'KuCoin': { price: 0, volume: 0, lastUpdated: 0 }
        };
        
        // Fetch market data from exchanges (simulated)
        async function fetchMarketData() {
            const pair = document.getElementById('crypto-pair').value;
            
            // Show scanning status
            document.getElementById('scan-text').textContent = "Updating market data...";
            document.getElementById('scan-status').style.display = 'flex';
            
            try {
                // Simulate API calls with random data
                const exchanges = ['Binance', 'Coinbase', 'Kraken', 'KuCoin'];
                const basePrice = pair === 'BTC/USDT' ? 30500 : 
                                 pair === 'ETH/USDT' ? 1900 : 
                                 pair === 'SOL/USD' ? 25 : 1;
                
                exchanges.forEach(exchange => {
                    // Generate random price variations
                    const variation = (Math.random() * 0.02) - 0.01; // -1% to +1%
                    exchangeData[exchange].price = basePrice * (1 + variation);
                    exchangeData[exchange].volume = (10000000 + Math.random() * 50000000).toFixed(0);
                    exchangeData[exchange].lastUpdated = Date.now();
                });
                
                updateStatus(true);
                document.getElementById('scan-text').textContent = "Market data updated";
                setTimeout(() => {
                    document.getElementById('scan-status').style.display = 'none';
                }, 2000);
            } catch (error) {
                console.error('Error fetching market data:', error);
                updateStatus(false, 'Error fetching data. Retrying...');
                document.getElementById('scan-text').textContent = "Data update failed";
                setTimeout(() => {
                    document.getElementById('scan-status').style.display = 'none';
                }, 2000);
            }
        }
        
        function updateStatus(connected, message = '') {
            const statusDot = document.getElementById('status-dot');
            const statusText = document.getElementById('status-text');
            
            if (connected) {
                statusDot.className = 'status-dot';
                statusText.textContent = message || 'Connected to live market data';
                statusText.style.color = '';
            } else {
                statusDot.className = 'status-dot offline';
                statusText.textContent = message || 'Offline. Using cached data.';
                statusText.style.color = '';
            }
        }
        
        async function scanArbitrage() {
            const pair = document.getElementById('crypto-pair').value;
            const feePercentage = parseFloat(document.getElementById('fee-percentage').value) || 0.1;
            const transferFee = parseFloat(document.getElementById('transfer-fee').value) || 0.05;
            const minProfit = parseFloat(document.getElementById('min-profit').value) || 0.5;
            
            // Show scanning status
            document.getElementById('scan-text').textContent = "Scanning exchanges...";
            document.getElementById('scan-status').style.display = 'flex';
            
            await fetchMarketData();
            
            // Filter out exchanges without data
            const activeExchanges = Object.entries(exchangeData)
                .filter(([_, data]) => data.price > 0)
                .map(([name, data]) => ({ 
                    name, 
                    price: data.price, 
                    volume: data.volume 
                }));
            
            if (activeExchanges.length < 2) {
                showNotification("Not enough exchange data available. Try again later.", "warning");
                document.getElementById('scan-text').textContent = "Scan failed - not enough data";
                setTimeout(() => {
                    document.getElementById('scan-status').style.display = 'none';
                }, 2000);
                return;
            }
            
            // Sort by price (lowest to highest)
            activeExchanges.sort((a, b) => a.price - b.price);
            
            // Calculate spread and profit
            const lowest = activeExchanges[0];
            const highest = activeExchanges[activeExchanges.length - 1];
            
            // Spread = (highest price - lowest price) / lowest price
            const spread = ((highest.price - lowest.price) / lowest.price) * 100;
            
            // Profit = spread - (2 * feePercentage) - transferFee
            const profit = spread - (2 * feePercentage) - transferFee;
            
            // Update the table
            renderExchangeTable(activeExchanges, feePercentage, transferFee);
            
            // Update opportunity card
            document.getElementById('buy-exchange').textContent = `${lowest.name}: $${lowest.price.toFixed(2)}`;
            document.getElementById('sell-exchange').textContent = `${highest.name}: $${highest.price.toFixed(2)}`;
            document.getElementById('spread-value').textContent = `${spread.toFixed(2)}%`;
            document.getElementById('profit-value').textContent = `${profit.toFixed(2)}%`;
            
            // Calculate time window based on profit and volatility
            const timeWindow = profit > 1.5 ? "1-2 min" : profit > 0.8 ? "2-4 min" : "4-8 min";
            document.getElementById('time-window').textContent = timeWindow;
            
            // Calculate success probability
            const successProb = Math.min(95, Math.max(60, profit * 25));
            document.getElementById('arb-success').textContent = `${successProb.toFixed(0)}%`;
            
            // Show notification if significant opportunity
            if (profit > minProfit) {
                showNotification(`Arbitrage opportunity: ${profit.toFixed(2)}% profit on ${pair}`);
                
                // Browser notification
                if (Notification.permission === 'granted') {
                    new Notification('ArbitragePro Opportunity', {
                        body: `${profit.toFixed(2)}% profit on ${pair}\nBuy on ${lowest.name} at $${lowest.price.toFixed(2)}\nSell on ${highest.name} at $${highest.price.toFixed(2)}`,
                        icon: 'data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHZpZXdCb3g9IjAgMCAyNCAyNCIgZmlsbD0iIzI1NjNlYiI+PHBhdGggZD0iTTEzLjc4OCw1LjQ4NEMxNC40NDUsNC44MjcgMTUuNTU1LDQuODI3IDE2LjIxMiw1LjQ4NGw1LjMwNyw1LjMwN2MxLjMxLDEuMzEgMS4zMSwzLjQzNiAwLDQuNzQ2bC01LjMwNyw1LjMwN2MtMC42NTcsMC42NTctMS43NjcsMC42NTctMi40MjQsMEwxMy43ODgsMTUuNUg1Yy0xLjEwMywwLTItMC44OTctMi0ydi0zYzAtMS4xMDMsMC44OTctMiwyLTJoOC43ODhMMTMuNzg4LDUuNDg0eiIvPjwvc3ZnPg=='
                    });
                }
            }
            
            // Update risk simulation based on this opportunity
            updateRiskSimulation(profit);
            
            // Update scan status
            document.getElementById('scan-text').textContent = "Scan completed!";
            setTimeout(() => {
                document.getElementById('scan-status').style.display = 'none';
            }, 2000);
        }
        
        function renderExchangeTable(exchanges, feePercentage, transferFee) {
            const tableBody = document.getElementById('exchange-data');
            tableBody.innerHTML = '';
            
            const lowestPrice = exchanges[0].price;
            
            exchanges.forEach(exchange => {
                const row = document.createElement('tr');
                
                // Calculate spread relative to lowest price
                const spread = ((exchange.price - lowestPrice) / lowestPrice) * 100;
                
                // Calculate profit (spread - 2*fees - transfer cost)
                const profit = spread - (2 * feePercentage) - transferFee;
                
                // Determine profit/loss class
                const profitClass = profit > 0.5 ? 'profit' : (profit > 0 ? '' : 'loss');
                
                // Format volume
                const volume = exchange.volume > 1000000 
                    ? `$${(exchange.volume / 1000000).toFixed(2)}M` 
                    : `$${(exchange.volume / 1000).toFixed(1)}K`;
                
                row.innerHTML = `
                    <td>${exchange.name}</td>
                    <td>$${exchange.price.toFixed(2)}</td>
                    <td>${spread.toFixed(2)}%</td>
                    <td class="${profitClass}">${profit.toFixed(2)}%</td>
                    <td>${volume}</td>
                    <td>
                        <button class="btn btn-outline" style="padding: 0.5rem 0.75rem; font-size: 0.75rem;">
                            <i class="fas fa-external-link-alt"></i> Trade
                        </button>
                    </td>
                `;
                
                tableBody.appendChild(row);
            });
        }
        
        function updateRiskSimulation(profit) {
            // Get additional parameters
            const tradeAmount = parseFloat(document.getElementById('trade-amount').value) || 1000;
            const riskFactor = document.getElementById('risk-factor').value;
            
            // Generate simulation data based on profit value and risk factor
            const data = [];
            let volatility;
            
            switch(riskFactor) {
                case 'low':
                    volatility = 0.05 + (Math.random() * 0.05);
                    break;
                case 'high':
                    volatility = 0.2 + (Math.random() * 0.3);
                    break;
                default:
                    volatility = 0.1 + (Math.random() * 0.15);
            }
            
            for (let i = 0; i < 20; i++) {
                // Simulate decreasing probability over time
                const probability = Math.max(0, profit * 15 - i * (volatility * 3));
                data.push(probability);
            }
            
            // Update chart
            riskChart.data.datasets[0].data = data;
            riskChart.update();
            
            // Calculate metrics
            const successProb = Math.min(95, Math.max(5, profit * 20));
            const avgProfit = Math.max(0.1, profit * 0.9);
            const maxDrawdown = Math.min(0, -(profit * 0.25));
            const estProfit = (tradeAmount * avgProfit / 100).toFixed(2);
            const vol = (volatility * 100).toFixed(2);
            const riskScore = (8 - volatility * 20).toFixed(1);
            
            // Update UI
            document.getElementById('success-prob').textContent = `${successProb.toFixed(0)}%`;
            document.getElementById('avg-profit').textContent = `${avgProfit.toFixed(2)}%`;
            document.getElementById('max-drawdown').textContent = `${maxDrawdown.toFixed(2)}%`;
            document.getElementById('volatility').textContent = `${vol}%`;
            document.getElementById('est-profit').textContent = `$${estProfit}`;
            document.getElementById('risk-score').textContent = `${riskScore}/10`;
            
            // Update risk badge
            const riskBadge = document.getElementById('risk-badge');
            if (successProb > 75) {
                riskBadge.className = 'opportunity-badge badge-success';
                riskBadge.textContent = 'LOW RISK';
            } else if (successProb > 50) {
                riskBadge.className = 'opportunity-badge badge-warning';
                riskBadge.textContent = 'MODERATE';
            } else {
                riskBadge.className = 'opportunity-badge';
                riskBadge.style.background = 'rgba(239, 68, 68, 0.1)';
                riskBadge.style.color = '#ef4444';
                riskBadge.textContent = 'HIGH RISK';
            }
        }
        
        function scanTriangularArbitrage() {
            showNotification("Scanning for triangular arbitrage opportunities...");
            
            // Simulate API call delay
            setTimeout(() => {
                showNotification("Found 2 triangular arbitrage opportunities!");
            }, 1500);
        }
        
        function runSimulation() {
            const btn = document.getElementById('run-simulation');
            const originalText = btn.innerHTML;
            btn.innerHTML = '<i class="fas fa-spinner fa-spin"></i> Simulating...';
            btn.disabled = true;
            
            setTimeout(() => {
                const profitValue = parseFloat(document.getElementById('profit-value').textContent) || 0.5;
                updateRiskSimulation(profitValue);
                
                btn.innerHTML = originalText;
                btn.disabled = false;
                
                showNotification("Risk simulation completed successfully");
            }, 1500);
        }
        
        function showNotification(message, type = "success") {
            // Create notification element
            const notification = document.createElement('div');
            notification.className = `notification ${type}`;
            notification.innerHTML = `
                <i class="fas fa-bell"></i>
                <span>${message}</span>
            `;
            
            // Add styles for notification
            notification.style.cssText = `
                position: fixed;
                bottom: 20px;
                right: 20px;
                background: ${type === 'warning' ? 'var(--warning)' : type === 'error' ? 'var(--danger)' : 'var(--success)'};
                color: white;
                padding: 15px 20px;
                border-radius: 8px;
                box-shadow: var(--shadow-lg);
                display: flex;
                align-items: center;
                gap: 10px;
                z-index: 1000;
                transform: translateX(150%);
                transition: transform 0.4s cubic-bezier(0.175, 0.885, 0.32, 1.275);
                max-width: 350px;
            `;
            
            document.body.appendChild(notification);
            
            // Show notification
            setTimeout(() => {
                notification.style.transform = 'translateX(0)';
            }, 100);
            
            // Hide notification after 5 seconds
            setTimeout(() => {
                notification.style.transform = 'translateX(150%)';
                setTimeout(() => {
                    document.body.removeChild(notification);
                }, 400);
            }, 5000);
        }
        
        function exportCSV() {
            const pair = document.getElementById('crypto-pair').value;
            const now = new Date();
            const timestamp = now.toISOString().replace(/[:.]/g, '-');
            const filename = `arbitragepro-${pair}-${timestamp}.csv`;
            
            // Create CSV content
            let csvContent = "Exchange,Price,Spread,Profit,Volume\n";
            const rows = document.querySelectorAll('#exchange-data tr');
            
            rows.forEach(row => {
                const cells = row.querySelectorAll('td');
                if (cells.length >= 5) {
                    const exchange = cells[0].textContent;
                    const price = cells[1].textContent.replace('$', '');
                    const spread = cells[2].textContent.replace('%', '');
                    const profit = cells[3].textContent.replace('%', '');
                    const volume = cells[4].textContent;
                    csvContent += `"${exchange}",${price},${spread},${profit},"${volume}"\n`;
                }
            });
            
            // Create download link
            const blob = new Blob([csvContent], { type: 'text/csv;charset=utf-8;' });
            const link = document.createElement('a');
            const url = URL.createObjectURL(blob);
            link.setAttribute('href', url);
            link.setAttribute('download', filename);
            link.style.visibility = 'hidden';
            document.body.appendChild(link);
            link.click();
            document.body.removeChild(link);
            
            showNotification(`CSV exported: ${filename}`);
        }
        
        function toggleAutoScan() {
            const autoScanBtn = document.getElementById('auto-scan');
            
            if (autoScanInterval) {
                clearInterval(autoScanInterval);
                autoScanInterval = null;
                autoScanBtn.innerHTML = '<i class="fas fa-play"></i> Auto Scan';
                autoScanBtn.classList.remove('btn-outline');
                autoScanBtn.classList.add('btn-success');
                showNotification("Auto scan disabled");
            } else {
                autoScanInterval = setInterval(() => {
                    scanArbitrage();
                }, 30000);
                autoScanBtn.innerHTML = '<i class="fas fa-stop"></i> Stop Scan';
                autoScanBtn.classList.remove('btn-success');
                autoScanBtn.classList.add('btn-outline');
                showNotification("Auto scan enabled - scanning every 30 seconds");
                scanArbitrage(); // Run immediately
            }
        }
    </script>
</body>
</html>
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>QuitPath - Your Smoking Tracker</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <style>
        :root {
            --primary: #2c3e50;
            --secondary: #3498db;
            --accent: #e74c3c;
            --light: #ecf0f1;
            --dark: #2c3e50;
            --success: #2ecc71;
            --warning: #f39c12;
            --danger: #e74c3c;
            --gray: #7f8c8d;
        }
        
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
        }
        
        body {
            background-color: #f5f7fa;
            color: var(--dark);
            line-height: 1.6;
        }
        
        .container {
            max-width: 1200px;
            margin: 0 auto;
            padding: 0 20px;
        }
        
        header {
            background-color: var(--primary);
            color: white;
            padding: 15px 0;
            box-shadow: 0 2px 10px rgba(0,0,0,0.1);
            position: sticky;
            top: 0;
            z-index: 100;
        }
        
        .header-content {
            display: flex;
            justify-content: space-between;
            align-items: center;
        }
        
        .logo {
            display: flex;
            align-items: center;
            gap: 10px;
        }
        
        .logo i {
            color: var(--secondary);
            font-size: 24px;
        }
        
        .logo h1 {
            font-size: 24px;
            font-weight: 600;
        }
        
        nav ul {
            display: flex;
            list-style: none;
            gap: 20px;
        }
        
        nav a {
            color: white;
            text-decoration: none;
            padding: 8px 12px;
            border-radius: 4px;
            transition: background-color 0.3s;
            font-weight: 500;
        }
        
        nav a:hover, nav a.active {
            background-color: rgba(255,255,255,0.1);
        }
        
        .user-info {
            display: flex;
            align-items: center;
            gap: 15px;
        }
        
        .avatar {
            width: 40px;
            height: 40px;
            border-radius: 50%;
            background-color: var(--secondary);
            display: flex;
            align-items: center;
            justify-content: center;
            color: white;
            font-weight: bold;
        }
        
        .page {
            display: none;
            padding: 30px 0;
            animation: fadeIn 0.5s;
        }
        
        .page.active {
            display: block;
        }
        
        @keyframes fadeIn {
            from { opacity: 0; }
            to { opacity: 1; }
        }
        
        .page-title {
            margin-bottom: 20px;
            color: var(--primary);
            border-bottom: 2px solid var(--light);
            padding-bottom: 10px;
            font-weight: 600;
        }
        
        .card {
            background-color: white;
            border-radius: 8px;
            box-shadow: 0 2px 10px rgba(0,0,0,0.05);
            padding: 20px;
            margin-bottom: 20px;
            border-left: 4px solid var(--secondary);
        }
        
        .card-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 15px;
        }
        
        .card-title {
            font-size: 18px;
            font-weight: 600;
            color: var(--primary);
        }
        
        .stats-grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(200px, 1fr));
            gap: 20px;
            margin-bottom: 30px;
        }
        
        .stat-card {
            background-color: white;
            border-radius: 8px;
            padding: 20px;
            box-shadow: 0 2px 10px rgba(0,0,0,0.05);
            text-align: center;
            border-top: 4px solid var(--secondary);
        }
        
        .stat-value {
            font-size: 28px;
            font-weight: bold;
            color: var(--secondary);
            margin: 10px 0;
        }
        
        .stat-label {
            color: var(--gray);
            font-size: 14px;
        }
        
        .btn {
            background-color: var(--secondary);
            color: white;
            border: none;
            padding: 10px 15px;
            border-radius: 4px;
            cursor: pointer;
            transition: background-color 0.3s;
            display: inline-flex;
            align-items: center;
            gap: 8px;
            font-size: 14px;
            font-weight: 500;
        }
        
        .btn:hover {
            background-color: #2980b9;
        }
        
        .btn-danger {
            background-color: var(--danger);
        }
        
        .btn-danger:hover {
            background-color: #c0392b;
        }
        
        .btn-success {
            background-color: var(--success);
        }
        
        .btn-success:hover {
            background-color: #27ae60;
        }
        
        .form-group {
            margin-bottom: 15px;
        }
        
        label {
            display: block;
            margin-bottom: 5px;
            font-weight: 500;
        }
        
        input, select, textarea {
            width: 100%;
            padding: 10px;
            border: 1px solid #ddd;
            border-radius: 4px;
            font-size: 14px;
        }
        
        textarea {
            min-height: 100px;
            resize: vertical;
        }
        
        .triggers-grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(150px, 1fr));
            gap: 10px;
            margin: 15px 0;
        }
        
        .trigger-option {
            background-color: var(--light);
            border: 1px solid #ddd;
            border-radius: 4px;
            padding: 10px;
            text-align: center;
            cursor: pointer;
            transition: all 0.3s;
        }
        
        .trigger-option:hover {
            background-color: #d5dbdb;
        }
        
        .trigger-option.selected {
            background-color: var(--secondary);
            color: white;
        }
        
        .quote-card {
            background: linear-gradient(135deg, var(--secondary), #8e44ad);
            color: white;
            border-radius: 8px;
            padding: 25px;
            margin: 20px 0;
            text-align: center;
        }
        
        .quote-text {
            font-style: italic;
            font-size: 18px;
            margin-bottom: 10px;
        }
        
        .quote-author {
            font-weight: 500;
        }
        
        .health-benefits {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(250px, 1fr));
            gap: 20px;
            margin: 20px 0;
        }
        
        .benefit-card {
            background-color: white;
            border-radius: 8px;
            padding: 20px;
            box-shadow: 0 2px 10px rgba(0,0,0,0.05);
            border-left: 4px solid var(--success);
        }
        
        .benefit-title {
            font-weight: 600;
            margin-bottom: 10px;
            color: var(--primary);
        }
        
        .progress-bar {
            height: 10px;
            background-color: #ecf0f1;
            border-radius: 5px;
            margin: 15px 0;
            overflow: hidden;
        }
        
        .progress-fill {
            height: 100%;
            background-color: var(--success);
            border-radius: 5px;
            transition: width 0.5s;
        }
        
        .chart-container {
            position: relative;
            height: 300px;
            margin: 20px 0;
        }
        
        .cravings-list {
            margin-top: 20px;
        }
        
        .craving-item {
            background-color: white;
            border-radius: 8px;
            padding: 15px;
            margin-bottom: 15px;
            box-shadow: 0 2px 5px rgba(0,0,0,0.05);
            border-left: 4px solid var(--warning);
        }
        
        .craving-header {
            display: flex;
            justify-content: space-between;
            margin-bottom: 10px;
        }
        
        .craving-intensity {
            font-weight: 600;
            color: var(--warning);
        }
        
        .craving-date {
            color: var(--gray);
            font-size: 14px;
        }
        
        .craving-strategy {
            margin-top: 10px;
            font-style: italic;
        }
        
        .empty-state {
            text-align: center;
            padding: 30px;
            color: var(--gray);
        }
        
        .empty-state i {
            font-size: 48px;
            margin-bottom: 15px;
            color: #cbd5e0;
        }
        
        footer {
            background-color: var(--primary);
            color: white;
            text-align: center;
            padding: 20px 0;
            margin-top: 40px;
        }
        
        /* Health Insights Styles */
        .health-insights-card {
            background: linear-gradient(to bottom right, #d1fae5, #a7f3d0);
            border: none;
            border-radius: 12px;
            box-shadow: 0 4px 20px rgba(0,0,0,0.1);
        }
        
        .health-score {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 15px;
        }
        
        .health-score-value {
            font-size: 32px;
            font-weight: bold;
            color: #059669;
        }
        
        .health-score-label {
            font-size: 14px;
            color: var(--gray);
        }
        
        .risk-reduction {
            margin: 20px 0;
        }
        
        .risk-item {
            margin-bottom: 10px;
        }
        
        .risk-label {
            display: flex;
            justify-content: space-between;
            margin-bottom: 5px;
            font-size: 14px;
        }
        
        .risk-name {
            color: var(--dark);
        }
        
        .risk-percent {
            font-weight: bold;
            color: var(--danger);
        }
        
        .savings-goals {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(200px, 1fr));
            gap: 15px;
            margin: 20px 0;
        }
        
        .savings-goal {
            background-color: white;
            border-radius: 8px;
            padding: 15px;
            text-align: center;
            box-shadow: 0 2px 8px rgba(0,0,0,0.05);
            cursor: pointer;
            transition: transform 0.2s;
        }
        
        .savings-goal:hover {
            transform: translateY(-5px);
        }
        
        .savings-goal-icon {
            font-size: 24px;
            margin-bottom: 10px;
            color: var(--secondary);
        }
        
        .savings-goal-amount {
            font-size: 18px;
            font-weight: bold;
            color: var(--dark);
            margin-bottom: 5px;
        }
        
        .savings-goal-label {
            font-size: 14px;
            color: var(--gray);
        }
        
        .health-benefit-item {
            display: flex;
            align-items: flex-start;
            gap: 10px;
            margin-bottom: 10px;
        }
        
        .health-benefit-icon {
            color: var(--success);
            margin-top: 2px;
        }
        
        .health-benefit-text {
            color: var(--dark);
            font-size: 14px;
        }
        
        /* Additional styles for health insights */
        .text-green-600 { color: #059669; }
        .text-teal-600 { color: #0d9488; }
        .text-blue-600 { color: #2563eb; }
        .text-yellow-600 { color: #d97706; }
        .text-orange-600 { color: #ea580c; }
        .text-slate-600 { color: #475569; }
        .text-slate-800 { color: #1e293b; }
        .text-slate-700 { color: #334155; }
        .text-slate-500 { color: #64748b; }
        .text-rose-500 { color: #f43f5e; }
        .text-purple-500 { color: #a855f7; }
        .text-red-500 { color: #ef4444; }
        .text-amber-600 { color: #d97706; }
        .text-amber-700 { color: #b45309; }
        
        .bg-white\/60 { background-color: rgba(255, 255, 255, 0.6); }
        .bg-gradient-to-r { background-image: linear-gradient(to right, var(--tw-gradient-stops)); }
        .from-amber-50 { --tw-gradient-from: #fffbeb; --tw-gradient-stops: var(--tw-gradient-from), var(--tw-gradient-to, rgba(255, 251, 235, 0)); }
        .to-yellow-50 { --tw-gradient-to: #fefce8; }
        .from-green-50 { --tw-gradient-from: #f0fdf4; --tw-gradient-stops: var(--tw-gradient-from), var(--tw-gradient-to, rgba(240, 253, 244, 0)); }
        .to-emerald-50 { --tw-gradient-to: #ecfdf5; }
        
        .mb-2 { margin-bottom: 0.5rem; }
        .mb-3 { margin-bottom: 0.75rem; }
        .mb-4 { margin-bottom: 1rem; }
        .mb-6 { margin-bottom: 1.5rem; }
        .mt-1 { margin-top: 0.25rem; }
        .mt-2 { margin-top: 0.5rem; }
        .mt-4 { margin-top: 1rem; }
        .py-4 { padding-top: 1rem; padding-bottom: 1rem; }
        .p-4 { padding: 1rem; }
        .p-6 { padding: 1.5rem; }
        .pt-3 { padding-top: 0.75rem; }
        .px-4 { padding-left: 1rem; padding-right: 1rem; }
        .py-2 { padding-top: 0.5rem; padding-bottom: 0.5rem; }
        
        .rounded-lg { border-radius: 0.5rem; }
        .rounded-xl { border-radius: 0.75rem; }
        
        .text-center { text-align: center; }
        .text-xs { font-size: 0.75rem; }
        .text-sm { font-size: 0.875rem; }
        .text-lg { font-size: 1.125rem; }
        .text-2xl { font-size: 1.5rem; }
        .text-4xl { font-size: 2.25rem; }
        .text-5xl { font-size: 3rem; }
        
        .font-medium { font-weight: 500; }
        .font-semibold { font-weight: 600; }
        .font-bold { font-weight: 700; }
        
        .space-y-2 > * + * { margin-top: 0.5rem; }
        .space-y-3 > * + * { margin-top: 0.75rem; }
        .space-y-1\.5 > * + * { margin-top: 0.375rem; }
        
        .grid { display: grid; }
        .grid-cols-2 { grid-template-columns: repeat(2, minmax(0, 1fr)); }
        .grid-cols-3 { grid-template-columns: repeat(3, minmax(0, 1fr)); }
        .gap-2 { gap: 0.5rem; }
        .gap-3 { gap: 0.75rem; }
        .gap-4 { gap: 1rem; }
        
        .flex { display: flex; }
        .items-center { align-items: center; }
        .justify-between { justify-content: space-between; }
        .justify-center { justify-content: center; }
        
        .border-t { border-top-width: 1px; }
        .border-amber-200 { border-color: #fde68a; }
        
        .w-px { width: 1px; }
        
        @media (max-width: 768px) {
            .header-content {
                flex-direction: column;
                gap: 15px;
            }
            
            nav ul {
                flex-wrap: wrap;
                justify-content: center;
            }
            
            .stats-grid {
                grid-template-columns: 1fr 1fr;
            }
            
            .savings-goals {
                grid-template-columns: 1fr 1fr;
            }
            
            .grid-cols-2, .grid-cols-3 {
                grid-template-columns: 1fr;
            }
        }
    </style>
</head>
<body>
    <header>
        <div class="container">
            <div class="header-content">
                <div class="logo">
                    <i class="fas fa-smoking-ban"></i>
                    <h1>QuitPath</h1>
                </div>
                <nav>
                    <ul>
                        <li><a href="#" class="nav-link active" data-page="dashboard">Dashboard</a></li>
                        <li><a href="#" class="nav-link" data-page="log">Log Cigarette</a></li>
                        <li><a href="#" class="nav-link" data-page="progress">Progress</a></li>
                        <li><a href="#" class="nav-link" data-page="goals">Goals</a></li>
                        <li><a href="#" class="nav-link" data-page="cravings">Cravings</a></li>
                        <li><a href="#" class="nav-link" data-page="profile">Profile</a></li>
                    </ul>
                </nav>
                <div class="user-info">
                    <div class="avatar" id="user-avatar">U</div>
                    <span id="user-name">User</span>
                </div>
            </div>
        </div>
    </header>

    <main class="container">
        <!-- Dashboard Page -->
        <section id="dashboard" class="page active">
            <h2 class="page-title">Dashboard</h2>
            
            <div class="stats-grid">
                <div class="stat-card">
                    <i class="fas fa-smoking fa-2x" style="color: var(--accent);"></i>
                    <div class="stat-value" id="today-count">0</div>
                    <div class="stat-label">Cigarettes Today</div>
                </div>
                <div class="stat-card">
                    <i class="fas fa-calendar-day fa-2x" style="color: var(--secondary);"></i>
                    <div class="stat-value" id="days-smoke-free">0</div>
                    <div class="stat-label">Days Smoke-Free</div>
                </div>
                <div class="stat-card">
                    <i class="fas fa-piggy-bank fa-2x" style="color: var(--success);"></i>
                    <div class="stat-value" id="money-saved">$0</div>
                    <div class="stat-label">Money Saved</div>
                </div>
                <div class="stat-card">
                    <i class="fas fa-lungs fa-2x" style="color: var(--warning);"></i>
                    <div class="stat-value" id="health-improvement">0%</div>
                    <div class="stat-label">Health Improvement</div>
                </div>
            </div>
            
            <div class="card">
                <div class="card-header">
                    <h3 class="card-title">Weekly Trend</h3>
                </div>
                <div class="chart-container">
                    <canvas id="weeklyChart"></canvas>
                </div>
            </div>
            
            <!-- Health Insights Card -->
            <div class="card health-insights-card" id="health-insights-card">
                <!-- Will be populated by JavaScript -->
            </div>
            
            <div class="quote-card">
                <div class="quote-text" id="motivational-quote">"The best time to plant a tree was 20 years ago. The second best time is now."</div>
                <div class="quote-author" id="quote-author">- Chinese Proverb</div>
            </div>
        </section>

        <!-- Log Cigarette Page -->
        <section id="log" class="page">
            <h2 class="page-title">Log Cigarette</h2>
            
            <div class="card">
                <div class="card-header">
                    <h3 class="card-title">Quick Log</h3>
                </div>
                <form id="log-form">
                    <div class="form-group">
                        <label for="cigarette-count">How many cigarettes?</label>
                        <input type="number" id="cigarette-count" min="1" max="10" value="1">
                    </div>
                    
                    <div class="form-group">
                        <label>What triggered this smoking? (Select all that apply)</label>
                        <div class="triggers-grid">
                            <div class="trigger-option" data-trigger="stress">Stress</div>
                            <div class="trigger-option" data-trigger="boredom">Boredom</div>
                            <div class="trigger-option" data-trigger="social">Social</div>
                            <div class="trigger-option" data-trigger="after-meal">After Meal</div>
                            <div class="trigger-option" data-trigger="coffee">Coffee</div>
                            <div class="trigger-option" data-trigger="alcohol">Alcohol</div>
                            <div class="trigger-option" data-trigger="other">Other</div>
                        </div>
                    </div>
                    
                    <div class="form-group">
                        <label for="notes">Notes (optional)</label>
                        <textarea id="notes" placeholder="How are you feeling? Any thoughts about this cigarette?"></textarea>
                    </div>
                    
                    <button type="submit" class="btn btn-danger">
                        <i class="fas fa-plus"></i> Log Cigarette
                    </button>
                </form>
            </div>
            
            <div class="card">
                <div class="card-header">
                    <h3 class="card-title">Today's Log</h3>
                </div>
                <div id="today-logs">
                    <div class="empty-state">
                        <i class="fas fa-clipboard-list"></i>
                        <p>No cigarettes logged today yet.</p>
                    </div>
                </div>
            </div>
        </section>

        <!-- Progress Page -->
        <section id="progress" class="page">
            <h2 class="page-title">Your Progress</h2>
            
            <div class="card">
                <div class="card-header">
                    <h3 class="card-title">30-Day Smoking Trend</h3>
                </div>
                <div class="chart-container">
                    <canvas id="monthlyChart"></canvas>
                </div>
            </div>
            
            <div class="card">
                <div class="card-header">
                    <h3 class="card-title">Trigger Analysis</h3>
                </div>
                <div class="chart-container">
                    <canvas id="triggerChart"></canvas>
                </div>
            </div>
            
            <!-- Detailed Health Metrics -->
            <div id="detailed-health-metrics">
                <!-- Will be populated by JavaScript -->
            </div>
            
            <!-- Savings Calculator -->
            <div id="savings-calculator">
                <!-- Will be populated by JavaScript -->
            </div>
        </section>

        <!-- Goals Page -->
        <section id="goals" class="page">
            <h2 class="page-title">Your Goals</h2>
            
            <div class="card" id="current-goal-container">
                <div class="card-header">
                    <h3 class="card-title">Current Goal</h3>
                </div>
                <div id="current-goal-content">
                    <div class="empty-state">
                        <i class="fas fa-bullseye"></i>
                        <p>No active goals. Set your first goal to get started.</p>
                    </div>
                </div>
            </div>
            
            <div class="card">
                <div class="card-header">
                    <h3 class="card-title">Set New Goal</h3>
                </div>
                <form id="goal-form">
                    <div class="form-group">
                        <label for="goal-type">Goal Type</label>
                        <select id="goal-type">
                            <option value="reduce">Reduce Cigarettes</option>
                            <option value="quit">Quit Completely</option>
                            <option value="save">Save Money</option>
                        </select>
                    </div>
                    
                    <div class="form-group">
                        <label for="target-value">Target Value</label>
                        <input type="number" id="target-value" placeholder="e.g., 5 cigarettes per day">
                    </div>
                    
                    <div class="form-group">
                        <label for="target-date">Target Date</label>
                        <input type="date" id="target-date">
                    </div>
                    
                    <button type="submit" class="btn btn-success">
                        <i class="fas fa-bullseye"></i> Set Goal
                    </button>
                </form>
            </div>
            
            <div class="card">
                <div class="card-header">
                    <h3 class="card-title">Goal History</h3>
                </div>
                <div id="goal-history">
                    <div class="empty-state">
                        <i class="fas fa-history"></i>
                        <p>No goal history yet.</p>
                    </div>
                </div>
            </div>
        </section>

        <!-- Cravings Page -->
        <section id="cravings" class="page">
            <h2 class="page-title">Cravings Journal</h2>
            
            <div class="card">
                <div class="card-header">
                    <h3 class="card-title">Log a Craving</h3>
                </div>
                <form id="craving-form">
                    <div class="form-group">
                        <label for="craving-intensity">Intensity (1-10)</label>
                        <input type="range" id="craving-intensity" min="1" max="10" value="5">
                        <div id="intensity-value">5</div>
                    </div>
                    
                    <div class="form-group">
                        <label for="craving-trigger">What triggered this craving?</label>
                        <select id="craving-trigger">
                            <option value="stress">Stress</option>
                            <option value="boredom">Boredom</option>
                            <option value="social">Social Situation</option>
                            <option value="habit">Habit/Routine</option>
                            <option value="other">Other</option>
                        </select>
                    </div>
                    
                    <div class="form-group">
                        <label for="resistance-strategy">How did you resist?</label>
                        <textarea id="resistance-strategy" placeholder="e.g., Deep breathing, went for a walk, drank water..."></textarea>
                    </div>
                    
                    <button type="submit" class="btn">
                        <i class="fas fa-book-medical"></i> Log Craving
                    </button>
                </form>
            </div>
            
            <div class="card">
                <div class="card-header">
                    <h3 class="card-title">Recent Cravings</h3>
                </div>
                <div class="cravings-list" id="cravings-list">
                    <div class="empty-state">
                        <i class="fas fa-clipboard-list"></i>
                        <p>No cravings logged yet.</p>
                    </div>
                </div>
            </div>
        </section>

        <!-- Profile Page -->
        <section id="profile" class="page">
            <h2 class="page-title">Your Profile</h2>
            
            <div class="card">
                <div class="card-header">
                    <h3 class="card-title">Personal Information</h3>
                </div>
                <form id="profile-form">
                    <div class="form-group">
                        <label for="name">Name</label>
                        <input type="text" id="name" placeholder="Enter your name">
                    </div>
                    
                    <div class="form-group">
                        <label for="email">Email</label>
                        <input type="email" id="email" placeholder="Enter your email">
                    </div>
                    
                    <div class="form-group">
                        <label for="age">Age</label>
                        <input type="number" id="age" placeholder="Enter your age">
                    </div>
                    
                    <button type="submit" class="btn">
                        <i class="fas fa-save"></i> Save Changes
                    </button>
                </form>
            </div>
            
            <div class="card">
                <div class="card-header">
                    <h3 class="card-title">Smoking Settings</h3>
                </div>
                <form id="smoking-settings-form">
                    <div class="form-group">
                        <label for="cigarette-cost">Cost per Pack ($)</label>
                        <input type="number" id="cigarette-cost" step="0.01" placeholder="10.00" value="10.00">
                    </div>
                    
                    <div class="form-group">
                        <label for="cigarettes-per-pack">Cigarettes per Pack</label>
                        <input type="number" id="cigarettes-per-pack" placeholder="20" value="20">
                    </div>
                    
                    <div class="form-group">
                        <label for="cigarettes-per-day">Average Cigarettes per Day (before quitting)</label>
                        <input type="number" id="cigarettes-per-day" placeholder="20" value="20">
                    </div>
                    
                    <div class="form-group">
                        <label for="quit-date">Quit Date</label>
                        <input type="date" id="quit-date">
                    </div>
                    
                    <button type="submit" class="btn">
                        <i class="fas fa-save"></i> Save Settings
                    </button>
                </form>
            </div>
            
            <div class="card">
                <div class="card-header">
                    <h3 class="card-title">Health Insights Settings</h3>
                </div>
                <p>Customize the health insights you receive based on your smoking reduction.</p>
                <div class="form-group">
                    <label>
                        <input type="checkbox" checked> Show lung capacity improvements
                    </label>
                </div>
                <div class="form-group">
                    <label>
                        <input type="checkbox" checked> Show disease risk reduction
                    </label>
                </div>
                <div class="form-group">
                    <label>
                        <input type="checkbox" checked> Show financial savings
                    </label>
                </div>
                <button class="btn">
                    <i class="fas fa-save"></i> Save Preferences
                </button>
            </div>
            
            <div class="card">
                <div class="card-header">
                    <h3 class="card-title">Data Management</h3>
                </div>
                <div class="form-group">
                    <button class="btn" id="export-data">
                        <i class="fas fa-download"></i> Export Data
                    </button>
                    <button class="btn btn-danger" id="reset-data">
                        <i class="fas fa-trash"></i> Reset All Data
                    </button>
                </div>
            </div>
        </section>
    </main>

    <footer>
        <div class="container">
            <p>QuitPath - Your journey to a smoke-free life starts here</p>
            <p>© 2023 QuitPath App. All rights reserved.</p>
        </div>
    </footer>

    <script>
        // Motivational Quotes Database (100+ quotes)
        const motivationalQuotes = [
            { text: "The secret of getting ahead is getting started.", author: "Mark Twain" },
            { text: "It's not whether you get knocked down, it's whether you get up.", author: "Vince Lombardi" },
            { text: "Your time is limited, don't waste it living someone else's life.", author: "Steve Jobs" },
            { text: "The best way to predict the future is to create it.", author: "Peter Drucker" },
            { text: "The only impossible journey is the one you never begin.", author: "Tony Robbins" },
            { text: "Don't watch the clock; do what it does. Keep going.", author: "Sam Levenson" },
            { text: "Believe you can and you're halfway there.", author: "Theodore Roosevelt" },
            { text: "You are never too old to set another goal or to dream a new dream.", author: "C.S. Lewis" },
            { text: "The harder the conflict, the more glorious the triumph.", author: "Thomas Paine" },
            { text: "Strength does not come from winning. Your struggles develop your strengths.", author: "Arnold Schwarzenegger" },
            { text: "Success is not final, failure is not fatal: it is the courage to continue that counts.", author: "Winston Churchill" },
            { text: "The only way to do great work is to love what you do.", author: "Steve Jobs" },
            { text: "Our greatest glory is not in never falling, but in rising every time we fall.", author: "Confucius" },
            { text: "The future belongs to those who believe in the beauty of their dreams.", author: "Eleanor Roosevelt" },
            { text: "It does not matter how slowly you go as long as you do not stop.", author: "Confucius" },
            { text: "You miss 100% of the shots you don't take.", author: "Wayne Gretzky" },
            { text: "I have not failed. I've just found 10,000 ways that won't work.", author: "Thomas Edison" },
            { text: "The only limit to our realization of tomorrow will be our doubts of today.", author: "Franklin D. Roosevelt" },
            { text: "What you get by achieving your goals is not as important as what you become by achieving your goals.", author: "Zig Ziglar" },
            { text: "The way to get started is to quit talking and begin doing.", author: "Walt Disney" },
            { text: "Don't be pushed around by the fears in your mind. Be led by the dreams in your heart.", author: "Roy T. Bennett" },
            { text: "You are braver than you believe, stronger than you seem, and smarter than you think.", author: "A.A. Milne" },
            { text: "The only person you are destined to become is the person you decide to be.", author: "Ralph Waldo Emerson" },
            { text: "The best revenge is massive success.", author: "Frank Sinatra" },
            { text: "The only thing standing between you and your goal is the story you keep telling yourself.", author: "Jordan Belfort" },
            { text: "You can't go back and change the beginning, but you can start where you are and change the ending.", author: "C.S. Lewis" },
            { text: "I am not a product of my circumstances. I am a product of my decisions.", author: "Stephen Covey" },
            { text: "The two most important days in your life are the day you are born and the day you find out why.", author: "Mark Twain" },
            { text: "Life is 10% what happens to you and 90% how you react to it.", author: "Charles R. Swindoll" },
            { text: "If you want to lift yourself up, lift up someone else.", author: "Booker T. Washington" },
            { text: "The only way to achieve the impossible is to believe it is possible.", author: "Charles Kingsleigh" },
            { text: "The mind is everything. What you think you become.", author: "Buddha" },
            { text: "The best time to plant a tree was 20 years ago. The second best time is now.", author: "Chinese Proverb" },
            { text: "You don't have to be great to start, but you have to start to be great.", author: "Zig Ziglar" },
            { text: "The difference between a stumbling block and a stepping stone is how high you raise your foot.", author: "Benny Lewis" },
            { text: "The journey of a thousand miles begins with one step.", author: "Lao Tzu" },
            { text: "The only true wisdom is in knowing you know nothing.", author: "Socrates" },
            { text: "The best preparation for tomorrow is doing your best today.", author: "H. Jackson Brown, Jr." },
            { text: "The purpose of our lives is to be happy.", author: "Dalai Lama" },
            { text: "Life is what happens to you while you're busy making other plans.", author: "John Lennon" },
            { text: "Get busy living or get busy dying.", author: "Stephen King" },
            { text: "You have within you right now, everything you need to deal with whatever the world can throw at you.", author: "Brian Tracy" },
            { text: "The only disability in life is a bad attitude.", author: "Scott Hamilton" },
            { text: "The greatest glory in living lies not in never falling, but in rising every time we fall.", author: "Nelson Mandela" },
            { text: "In the end, it's not the years in your life that count. It's the life in your years.", author: "Abraham Lincoln" },
            { text: "Life is either a daring adventure or nothing at all.", author: "Helen Keller" },
            { text: "Many of life's failures are people who did not realize how close they were to success when they gave up.", author: "Thomas A. Edison" },
            { text: "If life were predictable it would cease to be life, and be without flavor.", author: "Eleanor Roosevelt" },
            { text: "The only impossible journey is the one you never begin.", author: "Anthony Robbins" },
            { text: "In this life we cannot do great things. We can only do small things with great love.", author: "Mother Teresa" },
            { text: "The only thing we have to fear is fear itself.", author: "Franklin D. Roosevelt" },
            { text: "Do not go where the path may lead, go instead where there is no path and leave a trail.", author: "Ralph Waldo Emerson" },
            { text: "Well done is better than well said.", author: "Benjamin Franklin" },
            { text: "The best and most beautiful things in the world cannot be seen or even touched - they must be felt with the heart.", author: "Helen Keller" },
            { text: "It is during our darkest moments that we must focus to see the light.", author: "Aristotle" },
            { text: "Be yourself; everyone else is already taken.", author: "Oscar Wilde" },
            { text: "You will face many defeats in life, but never let yourself be defeated.", author: "Maya Angelou" },
            { text: "Go confidently in the direction of your dreams! Live the life you've imagined.", author: "Henry David Thoreau" },
            { text: "In the middle of difficulty lies opportunity.", author: "Albert Einstein" },
            { text: "The greatest wealth is to live content with little.", author: "Plato" },
            { text: "The only journey is the one within.", author: "Rainer Maria Rilke" },
            { text: "Life is really simple, but we insist on making it complicated.", author: "Confucius" },
            { text: "May you live all the days of your life.", author: "Jonathan Swift" },
            { text: "Life itself is the most wonderful fairy tale.", author: "Hans Christian Andersen" },
            { text: "Do not let making a living prevent you from making a life.", author: "John Wooden" },
            { text: "Life is made of ever so many partings welded together.", author: "Charles Dickens" },
            { text: "Turn your wounds into wisdom.", author: "Oprah Winfrey" },
            { text: "The purpose of life is to live it, to taste experience to the utmost, to reach out eagerly and without fear for newer and richer experience.", author: "Eleanor Roosevelt" },
            { text: "Life is a succession of lessons which must be lived to be understood.", author: "Ralph Waldo Emerson" },
            { text: "You have brains in your head. You have feet in your shoes. You can steer yourself any direction you choose.", author: "Dr. Seuss" },
            { text: "I can't change the direction of the wind, but I can adjust my sails to always reach my destination.", author: "Jimmy Dean" },
            { text: "Nothing is impossible, the word itself says 'I'm possible'!", author: "Audrey Hepburn" },
            { text: "You define your own life. Don't let other people write your script.", author: "Oprah Winfrey" },
            { text: "You are never too old to set another goal or to dream a new dream.", author: "Malala Yousafzai" },
            { text: "At the end of the day, whether or not those people are comfortable with how you're living your life doesn't matter. What matters is whether you're comfortable with it.", author: "Dr. Phil" },
            { text: "For me, becoming isn't about arriving somewhere or achieving a certain aim. I see it instead as forward motion, a means of evolving, a way to reach continuously toward a better self.", author: "Michelle Obama" },
            { text: "Spread love everywhere you go.", author: "Mother Teresa" },
            { text: "Do not allow people to dim your shine because they are blinded. Tell them to put some sunglasses on.", author: "Lady Gaga" },
            { text: "If you make your internal life a priority, then everything else you need will be given to you.", author: "Gabrielle Bernstein" },
            { text: "What lies behind you and what lies in front of you, pales in comparison to what lies inside of you.", author: "Ralph Waldo Emerson" },
            { text: "I don't go by the rule book. I lead from the heart, not the head.", author: "Princess Diana" },
            { text: "I have chosen to no longer be apologetic for my femaleness and my femininity. And I want to be respected in all of my femaleness because I deserve to be.", author: "Chimamanda Ngozi Adichie" },
            { text: "The most common way people give up their power is by thinking they don't have any.", author: "Alice Walker" },
            { text: "You can't be that kid standing at the top of the waterslide, overthinking it. You have to go down the chute.", author: "Tina Fey" },
            { text: "If I'm going to sing like someone else, then I don't need to sing at all.", author: "Billie Holiday" },
            { text: "You never know how strong you are until being strong is your only choice.", author: "Bob Marley" },
            { text: "You can't use up creativity. The more you use, the more you have.", author: "Maya Angelou" },
            { text: "Sometimes you can't see yourself clearly until you see yourself through the eyes of others.", author: "Ellen DeGeneres" },
            { text: "I alone cannot change the world, but I can cast a stone across the water to create many ripples.", author: "Mother Teresa" },
            { text: "What you do makes a difference, and you have to decide what kind of difference you want to make.", author: "Jane Goodall" },
            { text: "Don't sit down and wait for the opportunities to come. Get up and make them.", author: "Madam C.J. Walker" },
            { text: "It took me quite a long time to develop a voice, and now that I have it, I am not going to be silent.", author: "Madeleine Albright" },
            { text: "You should never view your challenges as a disadvantage. Instead, it's important for you to understand that your experience facing and overcoming adversity is actually one of your biggest advantages.", author: "Michelle Obama" },
            { text: "We need to accept that we won't always make the right decisions, that we'll screw up royally sometimes - understanding that failure is not the opposite of success, it's part of success.", author: "Arianna Huffington" },
            { text: "You are the one that possesses the keys to your being. You carry the passport to your own happiness.", author: "Diane von Furstenberg" },
            { text: "My mission in life is not merely to survive, but to thrive; and to do so with some passion, some compassion, some humor, and some style.", author: "Maya Angelou" },
            { text: "One of the most courageous things you can do is identify yourself, know who you are, what you believe in and where you want to go.", author: "Sheila Murray Bethel" },
            { text: "I've learned that people will forget what you said, people will forget what you did, but people will never forget how you made them feel.", author: "Maya Angelou" },
            { text: "When the whole world is silent, even one voice becomes powerful.", author: "Malala Yousafzai" },
            { text: "If you don't like the road you're walking, start paving another one.", author: "Dolly Parton" },
            { text: "We realize the importance of our voices only when we are silenced.", author: "Malala Yousafzai" },
            { text: "I am no bird; and no net ensnares me: I am a free human being with an independent will.", author: "Charlotte Brontë" },
            { text: "The most difficult thing is the decision to act, the rest is merely tenacity.", author: "Amelia Earhart" },
            { text: "You can't be that kid standing at the top of the waterslide, overthinking it. You have to go down the chute.", author: "Tina Fey" }
        ];

        // Data Management
        class QuitPathApp {
            constructor() {
                this.charts = {
                    weeklyChart: null,
                    monthlyChart: null,
                    triggerChart: null
                };
                this.init();
            }

            init() {
                this.setupEventListeners();
                this.loadUserData();
                this.updateUI();
                this.displayRandomQuote(); // Display a random quote on initialization
            }

            // Load user data from localStorage or initialize with defaults
            loadUserData() {
                // User Profile
                this.userProfile = JSON.parse(localStorage.getItem('quitPathUserProfile')) || {
                    name: '',
                    email: '',
                    age: '',
                    baseline_daily_cigarettes: 20,
                    cigarette_price: 10,
                    cigarettes_per_pack: 20,
                    quitDate: ''
                };

                // Cigarette Logs
                this.cigaretteLogs = JSON.parse(localStorage.getItem('quitPathCigaretteLogs')) || [];

                // Cravings
                this.cravings = JSON.parse(localStorage.getItem('quitPathCravings')) || [];

                // Goals
                this.goals = JSON.parse(localStorage.getItem('quitPathGoals')) || [];

                // Update UI elements with user data
                this.updateProfileForm();
                this.updateDashboard();
                this.updateProgressPage();
                this.updateGoalsPage();
                this.updateCravingsPage();
            }

            // Save data to localStorage
            saveUserData() {
                localStorage.setItem('quitPathUserProfile', JSON.stringify(this.userProfile));
                localStorage.setItem('quitPathCigaretteLogs', JSON.stringify(this.cigaretteLogs));
                localStorage.setItem('quitPathCravings', JSON.stringify(this.cravings));
                localStorage.setItem('quitPathGoals', JSON.stringify(this.goals));
            }

            // Setup event listeners
            setupEventListeners() {
                // Navigation
                document.querySelectorAll('.nav-link').forEach(link => {
                    link.addEventListener('click', (e) => {
                        e.preventDefault();
                        
                        // Update active nav link
                        document.querySelectorAll('.nav-link').forEach(l => l.classList.remove('active'));
                        e.target.classList.add('active');
                        
                        // Show selected page
                        const pageId = e.target.getAttribute('data-page');
                        document.querySelectorAll('.page').forEach(page => page.classList.remove('active'));
                        document.getElementById(pageId).classList.add('active');
                        
                        // Update page content when navigating
                        this.updatePageContent(pageId);
                        
                        // Update charts for the current page after a short delay
                        setTimeout(() => {
                            this.updatePageCharts(pageId);
                        }, 100);
                    });
                });
                
                // Trigger selection
                document.querySelectorAll('.trigger-option').forEach(option => {
                    option.addEventListener('click', (e) => {
                        e.target.classList.toggle('selected');
                    });
                });
                
                // Craving intensity display
                const intensitySlider = document.getElementById('craving-intensity');
                const intensityValue = document.getElementById('intensity-value');
                
                intensitySlider.addEventListener('input', function() {
                    intensityValue.textContent = this.value;
                });
                
                // Form submissions
                document.getElementById('log-form').addEventListener('submit', (e) => {
                    e.preventDefault();
                    this.logCigarette();
                });
                
                document.getElementById('goal-form').addEventListener('submit', (e) => {
                    e.preventDefault();
                    this.setGoal();
                });
                
                document.getElementById('craving-form').addEventListener('submit', (e) => {
                    e.preventDefault();
                    this.logCraving();
                });
                
                document.getElementById('profile-form').addEventListener('submit', (e) => {
                    e.preventDefault();
                    this.saveProfile();
                });
                
                document.getElementById('smoking-settings-form').addEventListener('submit', (e) => {
                    e.preventDefault();
                    this.saveSmokingSettings();
                });

                // Data management
                document.getElementById('export-data').addEventListener('click', () => {
                    this.exportData();
                });

                document.getElementById('reset-data').addEventListener('click', () => {
                    if (confirm('Are you sure you want to reset all data? This action cannot be undone.')) {
                        this.resetData();
                    }
                });
            }

            // Update page content when navigating
            updatePageContent(pageId) {
                switch (pageId) {
                    case 'dashboard':
                        this.updateDashboard();
                        this.displayRandomQuote(); // Display new random quote when dashboard is viewed
                        break;
                    case 'log':
                        this.updateTodayLogs();
                        break;
                    case 'progress':
                        this.updateProgressPage();
                        break;
                    case 'goals':
                        this.updateGoalsPage();
                        break;
                    case 'cravings':
                        this.updateCravingsPage();
                        break;
                }
            }

            // Update charts for specific pages
            updatePageCharts(pageId) {
                if (pageId === 'dashboard') {
                    this.updateWeeklyChart();
                } else if (pageId === 'progress') {
                    this.updateMonthlyChart();
                    this.updateTriggerChart();
                }
            }

            // Display a random motivational quote
            displayRandomQuote() {
                const randomIndex = Math.floor(Math.random() * motivationalQuotes.length);
                const quote = motivationalQuotes[randomIndex];
                
                document.getElementById('motivational-quote').textContent = `"${quote.text}"`;
                document.getElementById('quote-author').textContent = `- ${quote.author}`;
            }

            // Update profile form with existing data
            updateProfileForm() {
                document.getElementById('name').value = this.userProfile.name || '';
                document.getElementById('email').value = this.userProfile.email || '';
                document.getElementById('age').value = this.userProfile.age || '';
                document.getElementById('cigarette-cost').value = this.userProfile.cigarette_price || 10;
                document.getElementById('cigarettes-per-pack').value = this.userProfile.cigarettes_per_pack || 20;
                document.getElementById('cigarettes-per-day').value = this.userProfile.baseline_daily_cigarettes || 20;
                document.getElementById('quit-date').value = this.userProfile.quitDate || '';

                // Update user info in header
                document.getElementById('user-name').textContent = this.userProfile.name || 'User';
                document.getElementById('user-avatar').textContent = this.userProfile.name ? this.userProfile.name.charAt(0).toUpperCase() : 'U';
            }

            // Log a cigarette
            logCigarette() {
                const count = parseInt(document.getElementById('cigarette-count').value);
                const notes = document.getElementById('notes').value;
                
                // Get selected triggers
                const selectedTriggers = [];
                document.querySelectorAll('.trigger-option.selected').forEach(trigger => {
                    selectedTriggers.push(trigger.getAttribute('data-trigger'));
                });
                
                const logEntry = {
                    id: Date.now(),
                    logged_at: new Date().toISOString(),
                    date: new Date().toISOString().split('T')[0],
                    time: new Date().toLocaleTimeString(),
                    count: count,
                    triggers: selectedTriggers,
                    notes: notes
                };
                
                this.cigaretteLogs.push(logEntry);
                this.saveUserData();
                
                // Update UI - ensure today's logs are updated immediately
                this.updateDashboard();
                this.updateProgressPage();
                this.updateTodayLogs();
                
                // Reset form
                document.getElementById('log-form').reset();
                document.querySelectorAll('.trigger-option').forEach(opt => opt.classList.remove('selected'));
                
                // Show confirmation
                alert('Cigarette logged successfully!');
            }

            // Log a craving
            logCraving() {
                const intensity = parseInt(document.getElementById('craving-intensity').value);
                const trigger = document.getElementById('craving-trigger').value;
                const strategy = document.getElementById('resistance-strategy').value;
                
                const cravingEntry = {
                    id: Date.now(),
                    date: new Date().toISOString().split('T')[0],
                    time: new Date().toLocaleTimeString(),
                    intensity: intensity,
                    trigger: trigger,
                    strategy: strategy
                };
                
                this.cravings.push(cravingEntry);
                this.saveUserData();
                
                // Update UI
                this.updateCravingsPage();
                
                // Reset form
                document.getElementById('craving-form').reset();
                document.getElementById('intensity-value').textContent = '5';
                
                // Show confirmation
                alert('Craving logged successfully!');
            }

            // Set a goal
            setGoal() {
                const type = document.getElementById('goal-type').value;
                const targetValue = document.getElementById('target-value').value;
                const targetDate = document.getElementById('target-date').value;
                
                const goal = {
                    id: Date.now(),
                    type: type,
                    targetValue: targetValue,
                    targetDate: targetDate,
                    createdAt: new Date().toISOString().split('T')[0],
                    completed: false
                };
                
                this.goals.push(goal);
                this.saveUserData();
                
                // Update UI
                this.updateGoalsPage();
                
                // Reset form
                document.getElementById('goal-form').reset();
                
                // Show confirmation
                alert('Goal set successfully!');
            }

            // Save profile information
            saveProfile() {
                this.userProfile.name = document.getElementById('name').value;
                this.userProfile.email = document.getElementById('email').value;
                this.userProfile.age = document.getElementById('age').value;
                
                this.saveUserData();
                
                // Update UI
                document.getElementById('user-name').textContent = this.userProfile.name || 'User';
                document.getElementById('user-avatar').textContent = this.userProfile.name ? this.userProfile.name.charAt(0).toUpperCase() : 'U';
                
                alert('Profile updated successfully!');
            }

            // Save smoking settings
            saveSmokingSettings() {
                this.userProfile.cigarette_price = parseFloat(document.getElementById('cigarette-cost').value);
                this.userProfile.cigarettes_per_pack = parseInt(document.getElementById('cigarettes-per-pack').value);
                this.userProfile.baseline_daily_cigarettes = parseInt(document.getElementById('cigarettes-per-day').value);
                this.userProfile.quitDate = document.getElementById('quit-date').value;
                
                this.saveUserData();
                
                // Update UI
                this.updateDashboard();
                this.updateProgressPage();
                
                alert('Smoking settings updated successfully!');
            }

            // Export data
            exportData() {
                const data = {
                    userProfile: this.userProfile,
                    cigaretteLogs: this.cigaretteLogs,
                    cravings: this.cravings,
                    goals: this.goals
                };
                
                const dataStr = JSON.stringify(data, null, 2);
                const dataBlob = new Blob([dataStr], {type: 'application/json'});
                
                const url = URL.createObjectURL(dataBlob);
                const link = document.createElement('a');
                link.href = url;
                link.download = 'quitpath-data.json';
                document.body.appendChild(link);
                link.click();
                document.body.removeChild(link);
            }

            // Reset all data
            resetData() {
                localStorage.removeItem('quitPathUserProfile');
                localStorage.removeItem('quitPathCigaretteLogs');
                localStorage.removeItem('quitPathCravings');
                localStorage.removeItem('quitPathGoals');
                
                this.loadUserData();
                this.updateUI();
                
                alert('All data has been reset.');
            }

            // Update all UI elements
            updateUI() {
                this.updateDashboard();
                this.updateTodayLogs();
                this.updateProgressPage();
                this.updateGoalsPage();
                this.updateCravingsPage();
            }

            // Update dashboard with current data
            updateDashboard() {
                // Calculate today's count
                const today = new Date().toISOString().split('T')[0];
                const todayLogs = this.cigaretteLogs.filter(log => log.date === today);
                const todayCount = todayLogs.reduce((total, log) => total + log.count, 0);
                document.getElementById('today-count').textContent = todayCount;

                // Calculate days smoke-free
                let daysSmokeFree = 0;
                if (this.userProfile.quitDate) {
                    const quitDate = new Date(this.userProfile.quitDate);
                    const today = new Date();
                    const diffTime = Math.abs(today - quitDate);
                    daysSmokeFree = Math.ceil(diffTime / (1000 * 60 * 60 * 24));
                }
                document.getElementById('days-smoke-free').textContent = daysSmokeFree;

                // Calculate money saved
                const baseline = this.userProfile.baseline_daily_cigarettes || 20;
                const pricePerCigarette = this.userProfile.cigarettes_per_pack > 0 
                    ? this.userProfile.cigarette_price / this.userProfile.cigarettes_per_pack 
                    : 0.5;
                
                // Calculate average daily consumption for the last 30 days
                const last30Days = this.getLastNDays(30);
                const avgDailyCurrent = this.calculateAverageDaily(last30Days);
                
                const dailySavings = (baseline - avgDailyCurrent) * pricePerCigarette;
                const totalSavings = dailySavings * daysSmokeFree;
                document.getElementById('money-saved').textContent = `$${Math.max(0, totalSavings).toFixed(2)}`;

                // Calculate health improvement
                const healthImprovement = baseline > 0 ? Math.min(100, Math.round((1 - (avgDailyCurrent / baseline)) * 100)) : 0;
                document.getElementById('health-improvement').textContent = `${Math.max(0, healthImprovement)}%`;

                // Update health insights
                this.updateHealthInsights();

                // Update charts
                this.updateCharts();
            }

            // Update today's logs display
            updateTodayLogs() {
                const today = new Date().toISOString().split('T')[0];
                const todayLogs = this.cigaretteLogs.filter(log => log.date === today);
                const container = document.getElementById('today-logs');
                
                if (todayLogs.length === 0) {
                    container.innerHTML = `
                        <div class="empty-state">
                            <i class="fas fa-clipboard-list"></i>
                            <p>No cigarettes logged today yet.</p>
                        </div>
                    `;
                    return;
                }
                
                let html = '';
                todayLogs.forEach(log => {
                    html += `
                        <div class="craving-item">
                            <div class="craving-header">
                                <span class="craving-intensity">${log.count} cigarette(s)</span>
                                <span class="craving-date">${log.time}</span>
                            </div>
                            <p><strong>Triggers:</strong> ${log.triggers.join(', ') || 'None specified'}</p>
                            ${log.notes ? `<p class="craving-strategy"><strong>Notes:</strong> ${log.notes}</p>` : ''}
                        </div>
                    `;
                });
                
                container.innerHTML = html;
            }

            // Update progress page
            updateProgressPage() {
                this.updateCharts();
                this.updateDetailedHealthMetrics();
                this.updateSavingsCalculator();
            }

            // Update goals page
            updateGoalsPage() {
                const currentGoalContainer = document.getElementById('current-goal-content');
                const goalHistoryContainer = document.getElementById('goal-history');
                
                // Find active goal (not completed)
                const activeGoal = this.goals.find(goal => !goal.completed);
                
                if (activeGoal) {
                    currentGoalContainer.innerHTML = `
                        <div class="progress-bar">
                            <div class="progress-fill" style="width: 30%"></div>
                        </div>
                        <p>${this.getGoalDescription(activeGoal)}</p>
                        <p><strong>Target Date:</strong> ${this.formatDate(activeGoal.targetDate)}</p>
                        <button class="btn" style="margin-top: 15px;">
                            <i class="fas fa-edit"></i> Edit Goal
                        </button>
                    `;
                } else {
                    currentGoalContainer.innerHTML = `
                        <div class="empty-state">
                            <i class="fas fa-bullseye"></i>
                            <p>No active goals. Set your first goal to get started.</p>
                        </div>
                    `;
                }
                
                // Update goal history
                const completedGoals = this.goals.filter(goal => goal.completed);
                if (completedGoals.length === 0) {
                    goalHistoryContainer.innerHTML = `
                        <div class="empty-state">
                            <i class="fas fa-history"></i>
                            <p>No goal history yet.</p>
                        </div>
                    `;
                } else {
                    let html = '<ul>';
                    completedGoals.forEach(goal => {
                        html += `<li>✅ ${this.getGoalDescription(goal)} (Completed: ${this.formatDate(goal.completedAt)})</li>`;
                    });
                    html += '</ul>';
                    goalHistoryContainer.innerHTML = html;
                }
            }

            // Update cravings page
            updateCravingsPage() {
                const container = document.getElementById('cravings-list');
                
                if (this.cravings.length === 0) {
                    container.innerHTML = `
                        <div class="empty-state">
                            <i class="fas fa-clipboard-list"></i>
                            <p>No cravings logged yet.</p>
                        </div>
                    `;
                    return;
                }
                
                // Sort by date (newest first)
                const sortedCravings = [...this.cravings].sort((a, b) => new Date(b.date) - new Date(a.date));
                
                let html = '';
                sortedCravings.slice(0, 10).forEach(craving => {
                    html += `
                        <div class="craving-item">
                            <div class="craving-header">
                                <span class="craving-intensity">Intensity: ${craving.intensity}/10</span>
                                <span class="craving-date">${this.formatDate(craving.date)} ${craving.time}</span>
                            </div>
                            <p><strong>Trigger:</strong> ${this.capitalizeFirst(craving.trigger)}</p>
                            <p class="craving-strategy"><strong>Resistance Strategy:</strong> ${craving.strategy}</p>
                        </div>
                    `;
                });
                
                container.innerHTML = html;
            }

            // Update health insights card
            updateHealthInsights() {
                const container = document.getElementById('health-insights-card');
                
                if (!this.userProfile || !this.userProfile.baseline_daily_cigarettes) {
                    container.innerHTML = `
                        <div class="card-header">
                            <h3 class="card-title">Health Insights</h3>
                        </div>
                        <div class="card-content">
                            <div class="empty-state">
                                <i class="fas fa-heartbeat"></i>
                                <p>Set your baseline in Profile to see personalized health insights</p>
                            </div>
                        </div>
                    `;
                    return;
                }

                const baseline = this.userProfile.baseline_daily_cigarettes;
                const last30Days = this.getLastNDays(30);
                const last30DaysLogs = this.cigaretteLogs.filter(log => 
                    last30Days.includes(log.date)
                );
                
                const currentDailyAverage = last30DaysLogs.length / 30;
                const reduction = baseline - currentDailyAverage;
                const reductionPercent = baseline > 0 ? Math.round((reduction / baseline) * 100) : 0;

                const pricePerCigarette = this.userProfile.cigarettes_per_pack > 0 
                    ? this.userProfile.cigarette_price / this.userProfile.cigarettes_per_pack 
                    : 0.5;
                
                const dailySavings = reduction * pricePerCigarette;
                const monthlySavings = dailySavings * 30;
                const yearlySavings = dailySavings * 365;

                const totalCigarettesAvoided = this.cigaretteLogs.length > 0 
                    ? (baseline * Math.ceil(this.cigaretteLogs.length / baseline)) - this.cigaretteLogs.length
                    : 0;
                const totalSavings = totalCigarettesAvoided * pricePerCigarette;

                const getHealthScore = () => {
                    if (reductionPercent >= 90) return { score: 95, status: "Excellent", color: "text-green-600" };
                    if (reductionPercent >= 70) return { score: 80, status: "Very Good", color: "text-teal-600" };
                    if (reductionPercent >= 50) return { score: 65, status: "Good", color: "text-blue-600" };
                    if (reductionPercent >= 30) return { score: 50, status: "Improving", color: "text-yellow-600" };
                    if (reductionPercent > 0) return { score: 30, status: "Starting", color: "text-orange-600" };
                    return { score: 0, status: "Track More", color: "text-slate-600" };
                };

                const healthScore = getHealthScore();

                const hoursGained = Math.floor(totalCigarettesAvoided * 0.2);
                const daysGained = Math.floor(hoursGained / 24);

                if (reduction <= 0) {
                    container.innerHTML = `
                        <div class="card-header">
                            <h3 class="card-title">Health Insights</h3>
                        </div>
                        <div class="card-content">
                            <div class="text-center py-4">
                                <i class="fas fa-chart-line fa-2x mb-3 text-blue-500"></i>
                                <p class="text-slate-700 font-medium mb-2">Start Your Journey</p>
                                <p class="text-sm text-slate-600">
                                    Set your baseline in Profile to see personalized health insights and savings
                                </p>
                            </div>
                        </div>
                    `;
                    return;
                }

                container.innerHTML = `
                    <div class="card-header">
                        <h3 class="card-title">
                            <i class="fas fa-heart text-rose-500"></i> Your Health Impact
                        </h3>
                    </div>
                    <div class="card-content">
                        <!-- Reduction Progress -->
                        <div class="mb-6">
                            <div class="flex justify-between items-center mb-2">
                                <span class="text-sm font-medium text-slate-700">Smoking Reduction</span>
                                <span class="text-lg font-bold ${healthScore.color}">
                                    ${reductionPercent}%
                                </span>
                            </div>
                            <div class="progress-bar">
                                <div class="progress-fill" style="width: ${Math.min(reductionPercent, 100)}%"></div>
                            </div>
                            <p class="text-xs text-slate-600 mt-2">
                                From ${baseline} to ${currentDailyAverage.toFixed(1)} cigarettes/day
                            </p>
                        </div>

                        <!-- Health Score -->
                        <div class="grid grid-cols-2 gap-4 mb-6">
                            <div class="text-center p-4 bg-white/60 rounded-lg">
                                <i class="fas fa-award text-purple-500 text-2xl mb-2"></i>
                                <p class="text-2xl font-bold text-slate-800">${healthScore.score}</p>
                                <p class="text-xs text-slate-600">Health Score</p>
                                <p class="text-xs font-semibold mt-1 ${healthScore.color}">
                                    ${healthScore.status}
                                </p>
                            </div>

                            <div class="text-center p-4 bg-white/60 rounded-lg">
                                <i class="fas fa-heart text-red-500 text-2xl mb-2"></i>
                                <p class="text-2xl font-bold text-slate-800">${daysGained}</p>
                                <p class="text-xs text-slate-600">Days Gained</p>
                                <p class="text-xs text-green-600 font-semibold mt-1">
                                    +${hoursGained}h total
                                </p>
                            </div>
                        </div>

                        <!-- Financial Impact -->
                        <div class="space-y-3 p-4 bg-gradient-to-r from-amber-50 to-yellow-50 rounded-lg mb-6">
                            <div class="flex items-center gap-2 mb-3">
                                <i class="fas fa-wallet text-amber-600"></i>
                                <span class="font-semibold text-slate-800">Money Saved</span>
                            </div>
                            
                            <div class="grid grid-cols-3 gap-3 text-center">
                                <div>
                                    <p class="text-lg font-bold text-amber-700">$${dailySavings.toFixed(2)}</p>
                                    <p class="text-xs text-slate-600">per day</p>
                                </div>
                                <div>
                                    <p class="text-lg font-bold text-amber-700">$${monthlySavings.toFixed(0)}</p>
                                    <p class="text-xs text-slate-600">per month</p>
                                </div>
                                <div>
                                    <p class="text-lg font-bold text-amber-700">$${yearlySavings.toFixed(0)}</p>
                                    <p class="text-xs text-slate-600">per year</p>
                                </div>
                            </div>

                            ${totalSavings > 0 ? `
                            <div class="pt-3 border-t border-amber-200">
                                <p class="text-center text-sm text-slate-700">
                                    <span class="font-bold text-green-600">$${totalSavings.toFixed(2)}</span> saved so far!
                                </p>
                            </div>
                            ` : ''}
                        </div>

                        <!-- Quick Health Facts -->
                        <div class="space-y-2 text-sm">
                            <p class="font-semibold text-slate-700 mb-2">Your Progress Unlocks:</p>
                            <div class="space-y-1.5">
                                ${reductionPercent >= 20 ? `
                                <div class="health-benefit-item">
                                    <i class="fas fa-check health-benefit-icon"></i>
                                    <span class="health-benefit-text">Reduced carbon monoxide levels</span>
                                </div>
                                ` : ''}
                                ${reductionPercent >= 40 ? `
                                <div class="health-benefit-item">
                                    <i class="fas fa-check health-benefit-icon"></i>
                                    <span class="health-benefit-text">Improved circulation and lung function</span>
                                </div>
                                ` : ''}
                                ${reductionPercent >= 60 ? `
                                <div class="health-benefit-item">
                                    <i class="fas fa-check health-benefit-icon"></i>
                                    <span class="health-benefit-text">Significantly reduced heart disease risk</span>
                                </div>
                                ` : ''}
                                ${reductionPercent >= 80 ? `
                                <div class="health-benefit-item">
                                    <i class="fas fa-check health-benefit-icon"></i>
                                    <span class="health-benefit-text">Major lung healing progress</span>
                                </div>
                                ` : ''}
                                ${reductionPercent < 20 ? `
                                <div class="health-benefit-item">
                                    <i class="fas fa-circle health-benefit-icon" style="color: #cbd5e0;"></i>
                                    <span class="health-benefit-text">Keep reducing to unlock health benefits</span>
                                </div>
                                ` : ''}
                            </div>
                        </div>
                    </div>
                `;
            }

            // Update detailed health metrics
            updateDetailedHealthMetrics() {
                const container = document.getElementById('detailed-health-metrics');
                
                if (!this.userProfile || !this.userProfile.baseline_daily_cigarettes) {
                    container.innerHTML = `
                        <div class="card">
                            <div class="card-header">
                                <h3 class="card-title">Health Recovery Progress</h3>
                            </div>
                            <div class="card-content">
                                <div class="empty-state">
                                    <i class="fas fa-heartbeat"></i>
                                    <p>Set your baseline in Profile to see detailed health metrics</p>
                                </div>
                            </div>
                        </div>
                    `;
                    return;
                }

                const baseline = this.userProfile.baseline_daily_cigarettes;
                const last30Days = this.getLastNDays(30);
                const last30DaysLogs = this.cigaretteLogs.filter(log => 
                    last30Days.includes(log.date)
                );
                
                const currentDailyAverage = last30DaysLogs.length / 30;
                const reduction = baseline - currentDailyAverage;
                const reductionRate = baseline > 0 ? reduction / baseline : 0;

                const daysTracking = this.cigaretteLogs.length > 0 ? Math.ceil(this.cigaretteLogs.length / Math.max(currentDailyAverage, 1)) : 0;
                const cigarettesAvoided = Math.max(0, (baseline * daysTracking) - this.cigaretteLogs.length);

                const getRiskReduction = (rate) => {
                    if (rate >= 0.9) return { heart: 50, lung: 40, stroke: 35, cancer: 30 };
                    if (rate >= 0.7) return { heart: 35, lung: 25, stroke: 20, cancer: 15 };
                    if (rate >= 0.5) return { heart: 20, lung: 15, stroke: 12, cancer: 8 };
                    if (rate >= 0.3) return { heart: 10, lung: 8, stroke: 6, cancer: 4 };
                    return { heart: 5, lung: 3, stroke: 2, cancer: 1 };
                };

                const riskReductions = getRiskReduction(reductionRate);

                container.innerHTML = `
                    <div class="card">
                        <div class="card-header">
                            <h3 class="card-title">Health Recovery Progress</h3>
                        </div>
                        <div class="card-content">
                            <!-- Cigarettes Avoided -->
                            <div class="text-center p-6 bg-white/60 rounded-xl mb-6">
                                <div class="text-5xl font-bold text-green-600 mb-2">
                                    ${cigarettesAvoided.toLocaleString()}
                                </div>
                                <p class="text-slate-700 font-medium">Cigarettes Avoided</p>
                                <p class="text-sm text-slate-500 mt-1">
                                    That's ${Math.floor(cigarettesAvoided / (this.userProfile.cigarettes_per_pack || 20))} packs!
                                </p>
                            </div>

                            <!-- Disease Risk Reduction -->
                            <div>
                                <h3 class="font-semibold text-slate-800 mb-4">Disease Risk Reduction</h3>
                                <div class="space-y-3">
                                    <div>
                                        <div class="risk-label">
                                            <span class="risk-name">Heart Disease</span>
                                            <span class="risk-percent">-${riskReductions.heart}%</span>
                                        </div>
                                        <div class="progress-bar">
                                            <div class="progress-fill" style="width: ${riskReductions.heart}%"></div>
                                        </div>
                                    </div>

                                    <div>
                                        <div class="risk-label">
                                            <span class="risk-name">Lung Disease</span>
                                            <span class="risk-percent">-${riskReductions.lung}%</span>
                                        </div>
                                        <div class="progress-bar">
                                            <div class="progress-fill" style="width: ${riskReductions.lung}%"></div>
                                        </div>
                                    </div>

                                    <div>
                                        <div class="risk-label">
                                            <span class="risk-name">Stroke Risk</span>
                                            <span class="risk-percent">-${riskReductions.stroke}%</span>
                                        </div>
                                        <div class="progress-bar">
                                            <div class="progress-fill" style="width: ${riskReductions.stroke}%"></div>
                                        </div>
                                    </div>

                                    <div>
                                        <div class="risk-label">
                                            <span class="risk-name">Cancer Risk</span>
                                            <span class="risk-percent">-${riskReductions.cancer}%</span>
                                        </div>
                                        <div class="progress-bar">
                                            <div class="progress-fill" style="width: ${riskReductions.cancer}%"></div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                `;
            }

            // Update savings calculator
            updateSavingsCalculator() {
                const container = document.getElementById('savings-calculator');
                
                if (!this.userProfile || !this.userProfile.baseline_daily_cigarettes) {
                    return;
                }

                const baseline = this.userProfile.baseline_daily_cigarettes;
                const last30Days = this.getLastNDays(30);
                const last30DaysLogs = this.cigaretteLogs.filter(log => 
                    last30Days.includes(log.date)
                );
                
                const currentDailyAverage = last30DaysLogs.length / 30;
                const reduction = baseline - currentDailyAverage;

                const pricePerCigarette = this.userProfile.cigarettes_per_pack > 0 
                    ? this.userProfile.cigarette_price / this.userProfile.cigarettes_per_pack 
                    : 0.5;

                const dailySavings = reduction * pricePerCigarette;
                const monthlySavings = dailySavings * 30;
                const yearlySavings = dailySavings * 365;

                const daysTracking = this.cigaretteLogs.length > 0 ? Math.ceil(this.cigaretteLogs.length / Math.max(currentDailyAverage, 1)) : 0;
                const cigarettesAvoided = Math.max(0, (baseline * daysTracking) - this.cigaretteLogs.length);
                const totalSaved = cigarettesAvoided * pricePerCigarette;

                if (reduction <= 0) {
                    return;
                }

                const savingsGoals = [
                    { icon: 'mobile-alt', label: "New Phone", amount: 800, color: "from-blue-400 to-cyan-500" },
                    { icon: 'plane', label: "Vacation", amount: 2000, color: "from-purple-400 to-pink-500" },
                    { icon: 'graduation-cap', label: "Course/Training", amount: 500, color: "from-green-400 to-emerald-500" },
                    { icon: 'home', label: "Home Upgrade", amount: 5000, color: "from-orange-400 to-amber-500" },
                ];

                container.innerHTML = `
                    <div class="card">
                        <div class="card-header">
                            <h3 class="card-title">
                                <i class="fas fa-dollar-sign text-amber-600"></i> Your Savings Journey
                            </h3>
                        </div>
                        <div class="card-content">
                            <!-- Total Saved -->
                            <div class="text-center p-6 bg-white/60 rounded-xl mb-6">
                                <div class="text-4xl font-bold text-amber-600 mb-2">
                                    $${totalSaved.toFixed(2)}
                                </div>
                                <p class="text-slate-700 font-medium">Total Saved So Far</p>
                                <div class="flex justify-center gap-4 mt-4 text-sm">
                                    <div>
                                        <p class="text-slate-500">Daily</p>
                                        <p class="font-bold text-slate-800">$${dailySavings.toFixed(2)}</p>
                                    </div>
                                    <div class="w-px bg-slate-300"></div>
                                    <div>
                                        <p class="text-slate-500">Monthly</p>
                                        <p class="font-bold text-slate-800">$${monthlySavings.toFixed(0)}</p>
                                    </div>
                                    <div class="w-px bg-slate-300"></div>
                                    <div>
                                        <p class="text-slate-500">Yearly</p>
                                        <p class="font-bold text-slate-800">$${yearlySavings.toFixed(0)}</p>
                                    </div>
                                </div>
                            </div>

                            <!-- Savings Goals -->
                            <div class="mb-6">
                                <h3 class="font-semibold text-slate-800 mb-4">What You Could Afford</h3>
                                <div class="savings-goals">
                                    ${savingsGoals.map(goal => {
                                        const daysToGoal = dailySavings > 0 ? Math.ceil(goal.amount / dailySavings) : 0;
                                        const monthsToGoal = Math.floor(daysToGoal / 30);
                                        const progress = totalSaved > 0 ? Math.min((totalSaved / goal.amount) * 100, 100) : 0;
                                        const isAchievable = yearlySavings >= goal.amount;

                                        return `
                                            <div class="savings-goal">
                                                <i class="savings-goal-icon fas fa-${goal.icon}"></i>
                                                <div class="savings-goal-amount">$${goal.amount}</div>
                                                <div class="savings-goal-label">${goal.label}</div>
                                                ${isAchievable ? `
                                                    <div class="text-xs mt-2 ${progress >= 100 ? 'text-green-600' : 'text-slate-600'}">
                                                        ${progress >= 100 
                                                            ? '✓ Already saved enough!' 
                                                            : daysToGoal <= 365
                                                            ? `${monthsToGoal} months away`
                                                            : 'Keep reducing to reach this faster'}
                                                    </div>
                                                ` : `
                                                    <div class="text-xs mt-2 text-slate-500">
                                                        Reduce more to achieve this
                                                    </div>
                                                `}
                                            </div>
                                        `;
                                    }).join('')}
                                </div>
                            </div>

                            <!-- Lifetime Projection -->
                            <div class="p-4 bg-gradient-to-r from-green-50 to-emerald-50 rounded-lg">
                                <h3 class="font-semibold text-slate-800 mb-2">Lifetime Savings Potential</h3>
                                <div class="space-y-2 text-sm">
                                    <div class="flex justify-between">
                                        <span class="text-slate-600">5 Years</span>
                                        <span class="font-bold text-green-600">$${(yearlySavings * 5).toLocaleString()}</span>
                                    </div>
                                    <div class="flex justify-between">
                                        <span class="text-slate-600">10 Years</span>
                                        <span class="font-bold text-green-600">$${(yearlySavings * 10).toLocaleString()}</span>
                                    </div>
                                    <div class="flex justify-between">
                                        <span class="text-slate-600">20 Years</span>
                                        <span class="font-bold text-green-600">$${(yearlySavings * 20).toLocaleString()}</span>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                `;
            }

            // Update all charts
            updateCharts() {
                this.updateWeeklyChart();
                this.updateMonthlyChart();
                this.updateTriggerChart();
            }

            // Update weekly chart
            updateWeeklyChart() {
                const ctx = document.getElementById('weeklyChart');
                if (!ctx) return;
                
                // Get data for the last 7 days
                const last7Days = this.getLastNDays(7);
                const labels = last7Days.map(day => {
                    const date = new Date(day);
                    return date.toLocaleDateString('en-US', { weekday: 'short' });
                });
                
                const data = last7Days.map(day => {
                    const dayLogs = this.cigaretteLogs.filter(log => log.date === day);
                    return dayLogs.reduce((total, log) => total + log.count, 0);
                });
                
                // Destroy existing chart if it exists
                if (this.charts.weeklyChart) {
                    this.charts.weeklyChart.destroy();
                }
                
                // Create new chart
                this.charts.weeklyChart = new Chart(ctx, {
                    type: 'line',
                    data: {
                        labels: labels,
                        datasets: [{
                            label: 'Cigarettes per Day',
                            data: data,
                            borderColor: '#e74c3c',
                            backgroundColor: 'rgba(231, 76, 60, 0.1)',
                            tension: 0.3,
                            fill: true
                        }]
                    },
                    options: {
                        responsive: true,
                        maintainAspectRatio: false,
                        scales: {
                            y: {
                                beginAtZero: true,
                                title: {
                                    display: true,
                                    text: 'Cigarettes'
                                }
                            }
                        }
                    }
                });
            }

            // Update monthly chart
            updateMonthlyChart() {
                const ctx = document.getElementById('monthlyChart');
                if (!ctx) return;
                
                // Get data for the last 30 days
                const last30Days = this.getLastNDays(30);
                const labels = last30Days.map(day => {
                    const date = new Date(day);
                    return date.toLocaleDateString('en-US', { month: 'short', day: 'numeric' });
                });
                
                const data = last30Days.map(day => {
                    const dayLogs = this.cigaretteLogs.filter(log => log.date === day);
                    return dayLogs.reduce((total, log) => total + log.count, 0);
                });
                
                // Destroy existing chart if it exists
                if (this.charts.monthlyChart) {
                    this.charts.monthlyChart.destroy();
                }
                
                // Create new chart
                this.charts.monthlyChart = new Chart(ctx, {
                    type: 'line',
                    data: {
                        labels: labels,
                        datasets: [{
                            label: 'Daily Cigarettes',
                            data: data,
                            borderColor: '#3498db',
                            backgroundColor: 'rgba(52, 152, 219, 0.1)',
                            tension: 0.3,
                            fill: true
                        }]
                    },
                    options: {
                        responsive: true,
                        maintainAspectRatio: false,
                        scales: {
                            y: {
                                beginAtZero: true,
                                title: {
                                    display: true,
                                    text: 'Cigarettes'
                                }
                            }
                        }
                    }
                });
            }

            // Update trigger chart
            updateTriggerChart() {
                const ctx = document.getElementById('triggerChart');
                if (!ctx) return;
                
                // Count triggers from all logs
                const triggerCounts = {};
                this.cigaretteLogs.forEach(log => {
                    log.triggers.forEach(trigger => {
                        triggerCounts[trigger] = (triggerCounts[trigger] || 0) + 1;
                    });
                });
                
                const labels = Object.keys(triggerCounts).map(key => this.capitalizeFirst(key));
                const data = Object.values(triggerCounts);
                
                // Destroy existing chart if it exists
                if (this.charts.triggerChart) {
                    this.charts.triggerChart.destroy();
                }
                
                // Create new chart
                this.charts.triggerChart = new Chart(ctx, {
                    type: 'bar',
                    data: {
                        labels: labels,
                        datasets: [{
                            label: 'Trigger Frequency',
                            data: data,
                            backgroundColor: [
                                '#e74c3c',
                                '#3498db',
                                '#2ecc71',
                                '#f39c12',
                                '#9b59b6',
                                '#34495e'
                            ]
                        }]
                    },
                    options: {
                        responsive: true,
                        maintainAspectRatio: false,
                        scales: {
                            y: {
                                beginAtZero: true,
                                title: {
                                    display: true,
                                    text: 'Times Triggered'
                                }
                            }
                        }
                    }
                });
            }

            // Helper functions
            getLastNDays(n) {
                const days = [];
                for (let i = n - 1; i >= 0; i--) {
                    const date = new Date();
                    date.setDate(date.getDate() - i);
                    days.push(date.toISOString().split('T')[0]);
                }
                return days;
            }

            calculateAverageDaily(days) {
                if (days.length === 0) return 0;
                
                const total = days.reduce((sum, day) => {
                    const dayLogs = this.cigaretteLogs.filter(log => log.date === day);
                    return sum + dayLogs.reduce((daySum, log) => daySum + log.count, 0);
                }, 0);
                
                return total / days.length;
            }

            getGoalDescription(goal) {
                switch (goal.type) {
                    case 'reduce':
                        return `Reduce to ${goal.targetValue} cigarettes per day`;
                    case 'quit':
                        return `Quit smoking completely`;
                    case 'save':
                        return `Save $${goal.targetValue}`;
                    default:
                        return 'Unknown goal';
                }
            }

            formatDate(dateString) {
                if (!dateString) return 'Not set';
                const date = new Date(dateString);
                return date.toLocaleDateString('en-US', { year: 'numeric', month: 'short', day: 'numeric' });
            }

            capitalizeFirst(str) {
                if (!str) return '';
                return str.charAt(0).toUpperCase() + str.slice(1);
            }
        }

        // Initialize the app when the page loads
        document.addEventListener('DOMContentLoaded', () => {
            new QuitPathApp();
        });
    </script>
</body>
</html>
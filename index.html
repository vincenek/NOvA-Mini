<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>AlphaArb Pro | Professional Crypto Arbitrage Platform</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/apexcharts"></script>
    <style>
        :root {
            --primary: #3a86ff;
            --primary-light: #5fa0ff;
            --primary-dark: #2667cc;
            --secondary: #1a1d28;
            --success: #06d6a0;
            --success-dark: #04b486;
            --warning: #ffd166;
            --danger: #ef476f;
            --dark: #0d0f16;
            --darker: #090b10;
            --light: #f8f9fa;
            --gray: #6c757d;
            --card-bg: rgba(255, 255, 255, 0.95);
            --card-border: rgba(0, 0, 0, 0.08);
            --card-hover: rgba(255, 255, 255, 0.98);
            --text-primary: #212529;
            --text-secondary: #495057;
            --text-muted: #6c757d;
            --bg-primary: #f8f9fa;
            --bg-secondary: #e9ecef;
            --shadow: 0 4px 12px rgba(0, 0, 0, 0.08);
            --shadow-lg: 0 10px 30px rgba(0, 0, 0, 0.12);
        }

        .dark-mode {
            --primary: #5fa0ff;
            --primary-light: #7db3ff;
            --primary-dark: #3a86ff;
            --secondary: #252a38;
            --success: #06d6a0;
            --success-dark: #04b486;
            --warning: #ffd166;
            --danger: #ef476f;
            --dark: #0d0f16;
            --darker: #090b10;
            --light: #1a1d28;
            --gray: #8a94a6;
            --card-bg: rgba(37, 42, 56, 0.95);
            --card-border: rgba(255, 255, 255, 0.08);
            --card-hover: rgba(37, 42, 56, 0.98);
            --text-primary: #f8f9fa;
            --text-secondary: #e9ecef;
            --text-muted: #8a94a6;
            --bg-primary: #0d0f16;
            --bg-secondary: #151821;
            --shadow: 0 4px 12px rgba(0, 0, 0, 0.25);
            --shadow-lg: 0 10px 30px rgba(0, 0, 0, 0.35);
        }

        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: 'Inter', 'Segoe UI', system-ui, -apple-system, sans-serif;
            transition: background-color 0.3s, color 0.3s, border-color 0.3s;
        }

        body {
            background-color: var(--bg-primary);
            color: var(--text-primary);
            min-height: 100vh;
            padding: 0;
            line-height: 1.6;
            font-size: 16px;
            position: relative;
            overflow-x: hidden;
        }

        .app-container {
            max-width: 1400px;
            margin: 0 auto;
            padding: 0 15px;
        }

        /* Header Styles */
        header {
            background-color: var(--card-bg);
            border-bottom: 1px solid var(--card-border);
            padding: 15px 0;
            position: sticky;
            top: 0;
            z-index: 100;
            backdrop-filter: blur(10px);
            box-shadow: var(--shadow);
        }

        .header-content {
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        .logo {
            display: flex;
            align-items: center;
            gap: 12px;
        }

        .logo-icon {
            width: 42px;
            height: 42px;
            background: linear-gradient(135deg, var(--primary), var(--success));
            border-radius: 10px;
            display: flex;
            align-items: center;
            justify-content: center;
            box-shadow: 0 4px 12px rgba(58, 134, 255, 0.3);
        }

        .logo-icon i {
            font-size: 20px;
            color: white;
        }

        .logo-text {
            display: flex;
            flex-direction: column;
        }

        .logo-text h1 {
            font-size: 1.5rem;
            font-weight: 700;
            color: var(--text-primary);
            line-height: 1.2;
        }

        .logo-text span {
            font-size: 0.8rem;
            color: var(--text-muted);
            font-weight: 500;
        }

        .header-controls {
            display: flex;
            align-items: center;
            gap: 15px;
        }

        /* Theme Toggle */
        .theme-toggle {
            display: flex;
            align-items: center;
            gap: 10px;
            cursor: pointer;
            padding: 8px 12px;
            border-radius: 8px;
            background: var(--bg-secondary);
            border: 1px solid var(--card-border);
        }

        .theme-toggle i {
            font-size: 1.1rem;
            color: var(--text-muted);
        }

        /* Main Content */
        .main-content {
            padding: 25px 0;
        }

        .dashboard {
            display: grid;
            grid-template-columns: 1fr;
            gap: 20px;
        }

        /* Cards */
        .card {
            background: var(--card-bg);
            border-radius: 16px;
            padding: 24px;
            border: 1px solid var(--card-border);
            box-shadow: var(--shadow);
            position: relative;
            overflow: hidden;
        }

        .card:hover {
            box-shadow: var(--shadow-lg);
            transform: translateY(-2px);
        }

        .card-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 20px;
            padding-bottom: 16px;
            border-bottom: 1px solid var(--card-border);
        }

        .card-title {
            font-size: 1.25rem;
            display: flex;
            align-items: center;
            gap: 10px;
            font-weight: 600;
            color: var(--text-primary);
        }

        .card-title i {
            color: var(--primary);
            background: rgba(58, 134, 255, 0.1);
            width: 36px;
            height: 36px;
            border-radius: 10px;
            display: flex;
            align-items: center;
            justify-content: center;
        }

        /* Controls */
        .controls {
            display: flex;
            flex-direction: column;
            gap: 16px;
            margin-bottom: 20px;
        }

        .control-row {
            display: flex;
            gap: 15px;
            flex-wrap: wrap;
        }

        .control-group {
            display: flex;
            flex-direction: column;
            flex: 1;
            min-width: 160px;
        }

        label {
            margin-bottom: 8px;
            font-weight: 600;
            color: var(--text-secondary);
            font-size: 0.9rem;
            display: flex;
            align-items: center;
            gap: 6px;
        }

        .info-icon {
            color: var(--primary-light);
            cursor: help;
            position: relative;
        }

        select, input {
            padding: 12px 15px;
            border-radius: 10px;
            border: 1px solid var(--card-border);
            background: var(--bg-secondary);
            color: var(--text-primary);
            font-size: 0.95rem;
            width: 100%;
            transition: all 0.3s ease;
        }

        select:focus, input:focus {
            outline: none;
            border-color: var(--primary);
            box-shadow: 0 0 0 3px rgba(58, 134, 255, 0.2);
        }

        /* Buttons */
        .btn {
            padding: 12px 20px;
            border-radius: 10px;
            border: none;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s ease;
            font-size: 0.95rem;
            display: inline-flex;
            align-items: center;
            justify-content: center;
            gap: 8px;
            width: 100%;
        }

        .btn-primary {
            background: linear-gradient(to right, var(--primary), var(--success));
            color: white;
            box-shadow: 0 4px 12px rgba(58, 134, 255, 0.3);
        }

        .btn-primary:hover {
            transform: translateY(-2px);
            box-shadow: 0 6px 18px rgba(58, 134, 255, 0.4);
        }

        .btn-outline {
            background: transparent;
            border: 2px solid var(--primary);
            color: var(--primary);
        }

        .btn-outline:hover {
            background: rgba(58, 134, 255, 0.1);
            transform: translateY(-2px);
        }

        .btn-success {
            background: var(--success);
            color: white;
            box-shadow: 0 4px 12px rgba(6, 214, 160, 0.3);
        }

        .btn-success:hover {
            background: var(--success-dark);
            transform: translateY(-2px);
            box-shadow: 0 6px 18px rgba(6, 214, 160, 0.4);
        }

        .btn-warning {
            background: rgba(239, 71, 111, 0.1);
            border: 2px solid rgba(239, 71, 111, 0.3);
            color: #ef476f;
        }

        .btn-warning:hover {
            background: rgba(239, 71, 111, 0.2);
            transform: translateY(-2px);
        }

        .btn-group {
            display: flex;
            flex-direction: column;
            gap: 12px;
            margin-top: 15px;
        }

        /* Tables */
        table {
            width: 100%;
            border-collapse: collapse;
            margin-top: 20px;
            font-size: 0.9rem;
        }

        th {
            background: var(--bg-secondary);
            padding: 14px 12px;
            text-align: left;
            color: var(--text-muted);
            font-weight: 600;
            font-size: 0.85rem;
            position: sticky;
            top: 0;
        }

        td {
            padding: 14px 12px;
            border-bottom: 1px solid var(--card-border);
            font-size: 0.9rem;
        }

        tr:last-child td {
            border-bottom: none;
        }

        tr:hover {
            background: var(--bg-secondary);
        }

        .profit {
            color: var(--success);
            font-weight: 700;
        }

        .loss {
            color: var(--danger);
            font-weight: 700;
        }

        /* Status Indicators */
        .status-indicator {
            display: flex;
            align-items: center;
            gap: 8px;
            font-size: 0.9rem;
            margin-top: 15px;
            color: var(--text-muted);
            padding: 10px 15px;
            background: var(--bg-secondary);
            border-radius: 10px;
        }

        .status-dot {
            width: 10px;
            height: 10px;
            border-radius: 50%;
            background-color: var(--success);
        }

        .status-dot.offline {
            background-color: var(--danger);
        }

        .scan-status {
            display: flex;
            align-items: center;
            gap: 10px;
            padding: 10px 15px;
            background: var(--bg-secondary);
            border-radius: 10px;
            margin-top: 15px;
            font-size: 0.9rem;
        }

        .scan-status .spinner {
            width: 18px;
            height: 18px;
            border: 3px solid rgba(58, 134, 255, 0.3);
            border-top: 3px solid var(--primary);
            border-radius: 50%;
            animation: spin 1s linear infinite;
        }

        @keyframes spin {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
        }

        /* Opportunity Cards */
        .opportunity-card {
            background: var(--bg-secondary);
            border-radius: 12px;
            padding: 20px;
            margin-top: 20px;
            border: 1px solid rgba(58, 134, 255, 0.2);
            position: relative;
            overflow: hidden;
        }

        .opportunity-card::before {
            content: "";
            position: absolute;
            top: 0;
            left: 0;
            width: 4px;
            height: 100%;
            background: linear-gradient(to bottom, var(--primary), var(--success));
        }

        .opportunity-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 15px;
        }

        .opportunity-badge {
            padding: 6px 12px;
            border-radius: 20px;
            font-size: 0.8rem;
            font-weight: 700;
        }

        .badge-success {
            background: rgba(6, 214, 160, 0.2);
            color: var(--success);
        }

        .badge-warning {
            background: rgba(255, 209, 102, 0.2);
            color: var(--warning);
        }

        .opportunity-content {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(140px, 1fr));
            gap: 15px;
        }

        .opportunity-item {
            display: flex;
            flex-direction: column;
        }

        .opportunity-label {
            color: var(--text-muted);
            font-size: 0.85rem;
            margin-bottom: 5px;
        }

        .opportunity-value {
            font-size: 1rem;
            font-weight: 700;
        }

        /* Charts */
        .chart-container {
            height: 280px;
            margin-top: 20px;
        }

        /* Tabs */
        .tabs {
            display: flex;
            gap: 10px;
            margin-bottom: 20px;
            overflow-x: auto;
            padding-bottom: 5px;
        }

        .tab {
            padding: 12px 20px;
            background: var(--bg-secondary);
            border-radius: 10px;
            cursor: pointer;
            transition: all 0.3s ease;
            white-space: nowrap;
            border: 1px solid transparent;
            font-weight: 500;
        }

        .tab.active {
            background: rgba(58, 134, 255, 0.2);
            border-color: var(--primary);
            color: var(--primary);
        }

        .tab-content {
            display: none;
        }

        .tab-content.active {
            display: block;
        }

        /* Features Grid */
        .features {
            display: grid;
            grid-template-columns: 1fr;
            gap: 20px;
            margin-top: 30px;
        }

        .feature {
            background: var(--card-bg);
            padding: 25px 20px;
            border-radius: 12px;
            display: flex;
            flex-direction: column;
            align-items: center;
            text-align: center;
            border: 1px solid var(--card-border);
            transition: transform 0.3s ease;
        }

        .feature:hover {
            transform: translateY(-5px);
            box-shadow: var(--shadow-lg);
        }

        .feature i {
            font-size: 2rem;
            color: var(--primary);
            margin-bottom: 15px;
            background: rgba(58, 134, 255, 0.1);
            width: 60px;
            height: 60px;
            display: flex;
            align-items: center;
            justify-content: center;
            border-radius: 12px;
        }

        .feature h3 {
            margin-bottom: 12px;
            color: var(--text-primary);
            font-size: 1.1rem;
            font-weight: 600;
        }

        .feature p {
            color: var(--text-muted);
            font-size: 0.9rem;
            line-height: 1.6;
        }

        /* Notification */
        .notification {
            position: fixed;
            bottom: 20px;
            right: 20px;
            background: var(--success);
            color: white;
            padding: 15px 20px;
            border-radius: 10px;
            box-shadow: var(--shadow-lg);
            display: flex;
            align-items: center;
            gap: 10px;
            z-index: 1000;
            transform: translateX(150%);
            transition: transform 0.4s cubic-bezier(0.175, 0.885, 0.32, 1.275);
            max-width: 350px;
        }

        .notification.show {
            transform: translateX(0);
        }

        .notification.warning {
            background: var(--warning);
            color: #212529;
        }

        .notification.error {
            background: var(--danger);
        }

        /* Footer */
        footer {
            text-align: center;
            margin-top: 30px;
            padding: 20px;
            color: var(--text-muted);
            font-size: 0.85rem;
            background: var(--card-bg);
            border-radius: 12px;
            border: 1px solid var(--card-border);
        }

        /* Mobile Responsiveness */
        @media (max-width: 768px) {
            .header-content {
                flex-direction: column;
                gap: 15px;
                align-items: flex-start;
            }

            .header-controls {
                width: 100%;
                justify-content: space-between;
            }

            .control-row {
                flex-direction: column;
            }

            .control-group {
                min-width: 100%;
            }

            .btn-group {
                flex-direction: column;
            }

            .opportunity-content {
                grid-template-columns: repeat(2, 1fr);
            }

            .features {
                grid-template-columns: 1fr;
            }
        }

        @media (min-width: 769px) {
            .dashboard {
                grid-template-columns: 1fr 1fr;
            }

            .btn-group {
                flex-direction: row;
                flex-wrap: wrap;
            }

            .btn {
                width: auto;
                flex: 1;
            }

            .features {
                grid-template-columns: repeat(2, 1fr);
            }
        }

        @media (min-width: 1024px) {
            .features {
                grid-template-columns: repeat(4, 1fr);
            }

            .notification {
                max-width: 400px;
            }
        }
    </style>
</head>
<body>
    <div class="app-container">
        <header>
            <div class="header-content">
                <div class="logo">
                    <div class="logo-icon">
                        <i class="fas fa-chart-network"></i>
                    </div>
                    <div class="logo-text">
                        <h1>AlphaArb Pro</h1>
                        <span>Professional Crypto Arbitrage</span>
                    </div>
                </div>
                
                <div class="header-controls">
                    <div class="theme-toggle" id="theme-toggle">
                        <i class="fas fa-moon"></i>
                        <span>Dark Mode</span>
                    </div>
                    <button id="reset-btn" class="btn btn-warning">
                        <i class="fas fa-redo"></i> Reset
                    </button>
                </div>
            </div>
        </header>
        
        <div class="main-content">
            <div class="tabs">
                <div class="tab active" data-tab="scanner">Arbitrage Scanner</div>
                <div class="tab" data-tab="triangular">Triangular Arbitrage</div>
                <div class="tab" data-tab="cross-chain">Cross-Chain</div>
                <div class="tab" data-tab="portfolio">Portfolio</div>
                <div class="tab" data-tab="backtesting">Backtesting</div>
            </div>
            
            <div class="dashboard">
                <!-- Arbitrage Scanner Tab -->
                <div class="tab-content active" id="scanner-tab">
                    <div class="card">
                        <div class="card-header">
                            <h2 class="card-title"><i class="fas fa-search-dollar"></i> Arbitrage Scanner</h2>
                            <div class="scan-status" id="scan-status">
                                <div class="spinner"></div>
                                <span id="scan-text">Ready to scan</span>
                            </div>
                        </div>
                        
                        <div class="controls">
                            <div class="control-row">
                                <div class="control-group">
                                    <label for="crypto-pair">
                                        Crypto Pair
                                        <i class="fas fa-info-circle info-icon" data-tooltip="Select cryptocurrency trading pair"></i>
                                    </label>
                                    <select id="crypto-pair">
                                        <option value="BTC/USDT">BTC/USDT</option>
                                        <option value="ETH/USDT" selected>ETH/USDT</option>
                                        <option value="SOL/USD">SOL/USD</option>
                                        <option value="BNB/USDT">BNB/USDT</option>
                                        <option value="XRP/USDT">XRP/USDT</option>
                                        <option value="ADA/USD">ADA/USD</option>
                                        <option value="DOGE/USD">DOGE/USD</option>
                                        <option value="DOT/USDT">DOT/USDT</option>
                                        <option value="LTC/USD">LTC/USD</option>
                                    </select>
                                </div>
                                
                                <div class="control-group">
                                    <label for="min-profit">
                                        Min Profit (%)
                                        <i class="fas fa-info-circle info-icon" data-tooltip="Minimum profit percentage to show opportunities"></i>
                                    </label>
                                    <input type="number" id="min-profit" value="0.5" step="0.1" min="0">
                                </div>
                            </div>
                            
                            <div class="control-row">
                                <div class="control-group">
                                    <label for="fee-percentage">
                                        Trading Fee (%)
                                        <i class="fas fa-info-circle info-icon" data-tooltip="Your trading fee percentage on exchanges"></i>
                                    </label>
                                    <input type="number" id="fee-percentage" value="0.1" step="0.01" min="0">
                                </div>
                                
                                <div class="control-group">
                                    <label for="transfer-fee">
                                        Transfer Fee (%)
                                        <i class="fas fa-info-circle info-icon" data-tooltip="Estimated network transfer fee"></i>
                                    </label>
                                    <input type="number" id="transfer-fee" value="0.05" step="0.01" min="0">
                                </div>
                            </div>
                        </div>
                        
                        <div class="btn-group">
                            <button id="scan-btn" class="btn btn-primary">
                                <i class="fas fa-sync-alt"></i> Scan Arbitrage
                            </button>
                            
                            <button id="export-csv" class="btn btn-outline">
                                <i class="fas fa-file-csv"></i> Export CSV
                            </button>
                            
                            <button id="auto-scan" class="btn btn-success">
                                <i class="fas fa-play"></i> Auto Scan
                            </button>
                        </div>
                        
                        <div class="status-indicator">
                            <div class="status-dot" id="status-dot"></div>
                            <span id="status-text">Connected to live market data</span>
                        </div>
                        
                        <div style="overflow-x: auto;">
                            <table>
                                <thead>
                                    <tr>
                                        <th>Exchange</th>
                                        <th>Price</th>
                                        <th>Spread</th>
                                        <th>Profit</th>
                                        <th>Volume (24h)</th>
                                        <th>Action</th>
                                    </tr>
                                </thead>
                                <tbody id="exchange-data">
                                    <tr>
                                        <td colspan="6" style="text-align: center; padding: 30px;">
                                            <i class="fas fa-search" style="font-size: 2rem; margin-bottom: 15px; color: var(--text-muted);"></i>
                                            <p>Click "Scan Arbitrage" to find opportunities</p>
                                        </td>
                                    </tr>
                                </tbody>
                            </table>
                        </div>
                        
                        <div class="opportunity-card">
                            <div class="opportunity-header">
                                <h3>Best Opportunity</h3>
                                <span class="opportunity-badge badge-success">LIVE</span>
                            </div>
                            <div class="opportunity-content">
                                <div class="opportunity-item">
                                    <span class="opportunity-label">Buy From</span>
                                    <span class="opportunity-value" id="buy-exchange">-</span>
                                </div>
                                <div class="opportunity-item">
                                    <span class="opportunity-label">Sell To</span>
                                    <span class="opportunity-value" id="sell-exchange">-</span>
                                </div>
                                <div class="opportunity-item">
                                    <span class="opportunity-label">Spread</span>
                                    <span class="opportunity-value" id="spread-value">0.00%</span>
                                </div>
                                <div class="opportunity-item">
                                    <span class="opportunity-label">Profit</span>
                                    <span class="opportunity-value profit" id="profit-value">0.00%</span>
                                </div>
                                <div class="opportunity-item">
                                    <span class="opportunity-label">Time Window</span>
                                    <span class="opportunity-value" id="time-window">2-4 min</span>
                                </div>
                                <div class="opportunity-item">
                                    <span class="opportunity-label">Success Probability</span>
                                    <span class="opportunity-value" id="arb-success">87%</span>
                                </div>
                            </div>
                        </div>
                    </div>
                    
                    <div class="card">
                        <div class="card-header">
                            <h2 class="card-title"><i class="fas fa-chart-line"></i> Risk Simulator</h2>
                        </div>
                        
                        <div class="controls">
                            <div class="control-row">
                                <div class="control-group">
                                    <label for="simulation-type">Simulation Type</label>
                                    <select id="simulation-type">
                                        <option value="monte-carlo">Monte Carlo</option>
                                        <option value="volatility">Volatility Analysis</option>
                                        <option value="historical">Historical Performance</option>
                                    </select>
                                </div>
                                
                                <div class="control-group">
                                    <label for="risk-factor">Risk Factor</label>
                                    <select id="risk-factor">
                                        <option value="low">Low</option>
                                        <option value="medium" selected>Medium</option>
                                        <option value="high">High</option>
                                    </select>
                                </div>
                            </div>
                            
                            <div class="control-row">
                                <div class="control-group">
                                    <label for="simulation-period">Period (mins)</label>
                                    <input type="number" id="simulation-period" value="10" min="1" max="60">
                                </div>
                                
                                <div class="control-group">
                                    <label for="trade-amount">Trade Amount ($)</label>
                                    <input type="number" id="trade-amount" value="1000" min="10">
                                </div>
                            </div>
                        </div>
                        
                        <div class="btn-group">
                            <button id="run-simulation" class="btn btn-primary">
                                <i class="fas fa-play"></i> Run Simulation
                            </button>
                            
                            <button id="save-simulation" class="btn btn-outline">
                                <i class="fas fa-save"></i> Save Profile
                            </button>
                        </div>
                        
                        <div class="chart-container">
                            <canvas id="risk-chart"></canvas>
                        </div>
                        
                        <div class="opportunity-card">
                            <div class="opportunity-header">
                                <h3>Risk Analysis</h3>
                                <span class="opportunity-badge badge-warning" id="risk-badge">MODERATE</span>
                            </div>
                            <div class="opportunity-content">
                                <div class="opportunity-item">
                                    <span class="opportunity-label">Success Probability</span>
                                    <span class="opportunity-value" id="success-prob">74%</span>
                                </div>
                                <div class="opportunity-item">
                                    <span class="opportunity-label">Avg. Profit</span>
                                    <span class="opportunity-value profit" id="avg-profit">0.42%</span>
                                </div>
                                <div class="opportunity-item">
                                    <span class="opportunity-label">Max Drawdown</span>
                                    <span class="opportunity-value loss" id="max-drawdown">-0.38%</span>
                                </div>
                                <div class="opportunity-item">
                                    <span class="opportunity-label">Est. Profit</span>
                                    <span class="opportunity-value profit" id="est-profit">$4.20</span>
                                </div>
                                <div class="opportunity-item">
                                    <span class="opportunity-label">Volatility</span>
                                    <span class="opportunity-value" id="volatility">1.25%</span>
                                </div>
                                <div class="opportunity-item">
                                    <span class="opportunity-label">Risk Score</span>
                                    <span class="opportunity-value" id="risk-score">5.8/10</span>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
                
                <!-- Triangular Arbitrage Tab -->
                <div class="tab-content" id="triangular-tab">
                    <div class="card">
                        <div class="card-header">
                            <h2 class="card-title"><i class="fas fa-exchange-alt"></i> Triangular Arbitrage</h2>
                        </div>
                        
                        <div class="controls">
                            <div class="control-row">
                                <div class="control-group">
                                    <label for="tri-pair1">Trading Pair 1</label>
                                    <select id="tri-pair1">
                                        <option value="BTC/USDT">BTC/USDT</option>
                                        <option value="ETH/USDT" selected>ETH/USDT</option>
                                        <option value="BNB/USDT">BNB/USDT</option>
                                    </select>
                                </div>
                                
                                <div class="control-group">
                                    <label for="tri-pair2">Trading Pair 2</label>
                                    <select id="tri-pair2">
                                        <option value="ETH/BTC">ETH/BTC</option>
                                        <option value="BNB/BTC" selected>BNB/BTC</option>
                                        <option value="ADA/BTC">ADA/BTC</option>
                                    </select>
                                </div>
                                
                                <div class="control-group">
                                    <label for="tri-pair3">Trading Pair 3</label>
                                    <select id="tri-pair3">
                                        <option value="BNB/ETH">BNB/ETH</option>
                                        <option value="ADA/ETH" selected>ADA/ETH</option>
                                        <option value="DOT/ETH">DOT/ETH</option>
                                    </select>
                                </div>
                            </div>
                        </div>
                        
                        <div class="btn-group">
                            <button id="scan-triangular" class="btn btn-primary">
                                <i class="fas fa-sync-alt"></i> Scan Triangular
                            </button>
                        </div>
                        
                        <div style="overflow-x: auto; margin-top: 20px;">
                            <table>
                                <thead>
                                    <tr>
                                        <th>Arbitrage Path</th>
                                        <th>Profit</th>
                                        <th>Exchanges</th>
                                        <th>Time Window</th>
                                        <th>Risk</th>
                                        <th>Action</th>
                                    </tr>
                                </thead>
                                <tbody id="triangular-data">
                                    <tr>
                                        <td>ETH → BTC → BNB → ETH</td>
                                        <td class="profit">1.73%</td>
                                        <td>Binance, KuCoin</td>
                                        <td>3-5 min</td>
                                        <td>Medium</td>
                                        <td>
                                            <button class="btn btn-outline" style="padding: 5px 10px; font-size: 0.8rem;">
                                                <i class="fas fa-play"></i> Execute
                                            </button>
                                        </td>
                                    </tr>
                                    <tr>
                                        <td>BTC → ETH → ADA → BTC</td>
                                        <td class="profit">0.92%</td>
                                        <td>Binance, Coinbase</td>
                                        <td>2-4 min</td>
                                        <td>Low</td>
                                        <td>
                                            <button class="btn btn-outline" style="padding: 5px 10px; font-size: 0.8rem;">
                                                <i class="fas fa-play"></i> Execute
                                            </button>
                                        </td>
                                    </tr>
                                </tbody>
                            </table>
                        </div>
                    </div>
                </div>
                
                <!-- Cross-Chain Tab -->
                <div class="tab-content" id="cross-chain-tab">
                    <div class="card">
                        <div class="card-header">
                            <h2 class="card-title"><i class="fas fa-link"></i> Cross-Chain Arbitrage</h2>
                        </div>
                        
                        <div class="controls">
                            <div class="control-row">
                                <div class="control-group">
                                    <label for="source-chain">Source Chain</label>
                                    <select id="source-chain">
                                        <option value="ethereum">Ethereum</option>
                                        <option value="bsc" selected>Binance Smart Chain</option>
                                        <option value="polygon">Polygon</option>
                                        <option value="avalanche">Avalanche</option>
                                        <option value="solana">Solana</option>
                                    </select>
                                </div>
                                
                                <div class="control-group">
                                    <label for="target-chain">Target Chain</label>
                                    <select id="target-chain">
                                        <option value="ethereum">Ethereum</option>
                                        <option value="bsc">Binance Smart Chain</option>
                                        <option value="polygon" selected>Polygon</option>
                                        <option value="avalanche">Avalanche</option>
                                        <option value="solana">Solana</option>
                                    </select>
                                </div>
                                
                                <div class="control-group">
                                    <label for="bridge-protocol">Bridge Protocol</label>
                                    <select id="bridge-protocol">
                                        <option value="any">Any</option>
                                        <option value="multichain" selected>Multichain</option>
                                        <option value="wormhole">Wormhole</option>
                                        <option value="axelar">Axelar</option>
                                        <option value="layerzero">LayerZero</option>
                                    </select>
                                </div>
                            </div>
                        </div>
                        
                        <div class="btn-group">
                            <button id="scan-cross-chain" class="btn btn-primary">
                                <i class="fas fa-sync-alt"></i> Scan Cross-Chain
                            </button>
                        </div>
                        
                        <div style="overflow-x: auto; margin-top: 20px;">
                            <table>
                                <thead>
                                    <tr>
                                        <th>Asset</th>
                                        <th>Source Chain</th>
                                        <th>Target Chain</th>
                                        <th>Price Diff</th>
                                        <th>Bridge</th>
                                        <th>Net Profit</th>
                                        <th>Action</th>
                                    </tr>
                                </thead>
                                <tbody id="cross-chain-data">
                                    <tr>
                                        <td>USDC</td>
                                        <td>BSC</td>
                                        <td>Polygon</td>
                                        <td class="profit">2.15%</td>
                                        <td>Multichain</td>
                                        <td class="profit">2.03%</td>
                                        <td>
                                            <button class="btn btn-outline" style="padding: 5px 10px; font-size: 0.8rem;">
                                                <i class="fas fa-play"></i> Bridge
                                            </button>
                                        </td>
                                    </tr>
                                    <tr>
                                        <td>ETH</td>
                                        <td>Ethereum</td>
                                        <td>Avalanche</td>
                                        <td class="profit">1.42%</td>
                                        <td>Axelar</td>
                                        <td class="profit">1.28%</td>
                                        <td>
                                            <button class="btn btn-outline" style="padding: 5px 10px; font-size: 0.8rem;">
                                                <i class="fas fa-play"></i> Bridge
                                            </button>
                                        </td>
                                    </tr>
                                </tbody>
                            </table>
                        </div>
                    </div>
                </div>
                
                <!-- Portfolio Tab -->
                <div class="tab-content" id="portfolio-tab">
                    <div class="card">
                        <div class="card-header">
                            <h2 class="card-title"><i class="fas fa-chart-pie"></i> Arbitrage Portfolio</h2>
                        </div>
                        
                        <div class="opportunity-content" style="grid-template-columns: repeat(2, 1fr); margin-bottom: 20px;">
                            <div class="opportunity-item">
                                <span class="opportunity-label">Total Profit</span>
                                <span class="opportunity-value profit">$1,842.50</span>
                            </div>
                            <div class="opportunity-item">
                                <span class="opportunity-label">Active Trades</span>
                                <span class="opportunity-value">12</span>
                            </div>
                            <div class="opportunity-item">
                                <span class="opportunity-label">Success Rate</span>
                                <span class="opportunity-value">87.3%</span>
                            </div>
                            <div class="opportunity-item">
                                <span class="opportunity-label">Risk Score</span>
                                <span class="opportunity-value">6.2/10</span>
                            </div>
                        </div>
                        
                        <div class="chart-container">
                            <canvas id="portfolio-chart"></canvas>
                        </div>
                        
                        <div style="overflow-x: auto; margin-top: 20px;">
                            <table>
                                <thead>
                                    <tr>
                                        <th>Date</th>
                                        <th>Asset</th>
                                        <th>Type</th>
                                        <th>Amount</th>
                                        <th>Profit/Loss</th>
                                        <th>Status</th>
                                    </tr>
                                </thead>
                                <tbody id="portfolio-history">
                                    <tr>
                                        <td>2023-06-15 14:32</td>
                                        <td>ETH/USDT</td>
                                        <td>Simple Arbitrage</td>
                                        <td>$1,000</td>
                                        <td class="profit">+$12.50</td>
                                        <td><span class="badge-success">Completed</span></td>
                                    </tr>
                                    <tr>
                                        <td>2023-06-15 13:45</td>
                                        <td>BTC/ETH/BNB</td>
                                        <td>Triangular</td>
                                        <td>$2,500</td>
                                        <td class="profit">+$31.75</td>
                                        <td><span class="badge-success">Completed</span></td>
                                    </tr>
                                    <tr>
                                        <td>2023-06-15 12:20</td>
                                        <td>USDC (BSC→Polygon)</td>
                                        <td>Cross-Chain</td>
                                        <td>$5,000</td>
                                        <td class="profit">+$101.50</td>
                                        <td><span class="badge-success">Completed</span></td>
                                    </tr>
                                </tbody>
                            </table>
                        </div>
                    </div>
                </div>
                
                <!-- Backtesting Tab -->
                <div class="tab-content" id="backtesting-tab">
                    <div class="card">
                        <div class="card-header">
                            <h2 class="card-title"><i class="fas fa-history"></i> Strategy Backtesting</h2>
                        </div>
                        
                        <div class="controls">
                            <div class="control-row">
                                <div class="control-group">
                                    <label for="backtest-period">Backtest Period</label>
                                    <select id="backtest-period">
                                        <option value="7d">Last 7 Days</option>
                                        <option value="30d" selected>Last 30 Days</option>
                                        <option value="90d">Last 90 Days</option>
                                        <option value="1y">Last Year</option>
                                    </select>
                                </div>
                                
                                <div class="control-group">
                                    <label for="initial-capital">Initial Capital ($)</label>
                                    <input type="number" id="initial-capital" value="5000" min="100">
                                </div>
                            </div>
                            
                            <div class="control-row">
                                <div class="control-group">
                                    <label for="strategy-type">Strategy Type</label>
                                    <select id="strategy-type">
                                        <option value="simple">Simple Arbitrage</option>
                                        <option value="triangular" selected>Triangular</option>
                                        <option value="cross-chain">Cross-Chain</option>
                                        <option value="mixed">Mixed Strategy</option>
                                    </select>
                                </div>
                                
                                <div class="control-group">
                                    <label for="max-risk">Max Risk per Trade (%)</label>
                                    <input type="number" id="max-risk" value="2" min="0.1" max="10" step="0.1">
                                </div>
                            </div>
                        </div>
                        
                        <div class="btn-group">
                            <button id="run-backtest" class="btn btn-primary">
                                <i class="fas fa-play"></i> Run Backtest
                            </button>
                            
                            <button id="export-backtest" class="btn btn-outline">
                                <i class="fas fa-download"></i> Export Results
                            </button>
                        </div>
                        
                        <div class="chart-container">
                            <canvas id="backtest-chart"></canvas>
                        </div>
                        
                        <div class="opportunity-card">
                            <div class="opportunity-header">
                                <h3>Backtest Results</h3>
                                <span class="opportunity-badge badge-success">PROFITABLE</span>
                            </div>
                            <div class="opportunity-content">
                                <div class="opportunity-item">
                                    <span class="opportunity-label">Total Return</span>
                                    <span class="opportunity-value profit">14.2%</span>
                                </div>
                                <div class="opportunity-item">
                                    <span class="opportunity-label">Sharpe Ratio</span>
                                    <span class="opportunity-value">1.85</span>
                                </div>
                                <div class="opportunity-item">
                                    <span class="opportunity-label">Max Drawdown</span>
                                    <span class="opportunity-value loss">-3.7%</span>
                                </div>
                                <div class="opportunity-item">
                                    <span class="opportunity-label">Win Rate</span>
                                    <span class="opportunity-value">76.4%</span>
                                </div>
                                <div class="opportunity-item">
                                    <span class="opportunity-label">Total Trades</span>
                                    <span class="opportunity-value">142</span>
                                </div>
                                <div class="opportunity-item">
                                    <span class="opportunity-label">Profit Factor</span>
                                    <span class="opportunity-value">2.34</span>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
            
            <div class="features">
                <div class="feature">
                    <i class="fas fa-bolt"></i>
                    <h3>Real-Time Scanning</h3>
                    <p>Continuous monitoring of 20+ exchanges with sub-second updates for arbitrage opportunities.</p>
                </div>
                <div class="feature">
                    <i class="fas fa-shield-alt"></i>
                    <h3>Risk Management</h3>
                    <p>Advanced risk scoring and simulation to evaluate trade success probability and exposure.</p>
                </div>
                <div class="feature">
                    <i class="fas fa-robot"></i>
                    <h3>AI Prediction</h3>
                    <p>Machine learning algorithms predict future arbitrage opportunities with high accuracy.</p>
                </div>
                <div class="feature">
                    <i class="fas fa-chart-network"></i>
                    <h3>Multi-Exchange</h3>
                    <p>Simultaneous scanning across all major exchanges for the best opportunities.</p>
                </div>
            </div>
            
            <div class="card" style="background: rgba(239, 71, 111, 0.05); border-color: rgba(239, 71, 111, 0.2);">
                <div class="card-header">
                    <h2 class="card-title"><i class="fas fa-exclamation-triangle"></i> Important Disclaimer</h2>
                </div>
                <p style="color: var(--text-secondary); line-height: 1.6;">
                    Crypto arbitrage involves significant risks including price volatility, execution risk, liquidity constraints, and technical failures. 
                    This tool is for informational purposes only and does not constitute financial advice. 
                    Always do your own research, understand the risks, and never invest more than you can afford to lose. 
                    Past performance is not indicative of future results.
                </p>
            </div>
        </div>
        
        <footer>
            <p>AlphaArb Pro - Professional Crypto Arbitrage Platform | Real-time Market Data & Analysis</p>
            <p>© 2023 AlphaArb Technologies | All computations happen locally | Privacy Guaranteed</p>
        </footer>
    </div>
    
    <div id="notification" class="notification">
        <i class="fas fa-bell"></i>
        <span id="notification-text">New arbitrage opportunity found!</span>
    </div>

    <script>
        // Initialize the application
        document.addEventListener('DOMContentLoaded', function() {
            initTheme();
            initCharts();
            setupEventListeners();
            initTabs();
            
            // Request notification permission
            if (Notification.permission !== 'granted') {
                Notification.requestPermission();
            }
            
            // Load initial data
            setTimeout(fetchMarketData, 1000);
        });
        
        // Theme management
        function initTheme() {
            const themeToggle = document.getElementById('theme-toggle');
            const themeIcon = themeToggle.querySelector('i');
            const themeText = themeToggle.querySelector('span');
            
            // Check for saved theme or prefer color scheme
            const savedTheme = localStorage.getItem('theme');
            const prefersDark = window.matchMedia('(prefers-color-scheme: dark)').matches;
            
            if (savedTheme === 'dark' || (!savedTheme && prefersDark)) {
                document.body.classList.add('dark-mode');
                themeIcon.className = 'fas fa-sun';
                themeText.textContent = 'Light Mode';
            } else {
                document.body.classList.remove('dark-mode');
                themeIcon.className = 'fas fa-moon';
                themeText.textContent = 'Dark Mode';
            }
            
            themeToggle.addEventListener('click', function() {
                if (document.body.classList.contains('dark-mode')) {
                    document.body.classList.remove('dark-mode');
                    localStorage.setItem('theme', 'light');
                    themeIcon.className = 'fas fa-moon';
                    themeText.textContent = 'Dark Mode';
                } else {
                    document.body.classList.add('dark-mode');
                    localStorage.setItem('theme', 'dark');
                    themeIcon.className = 'fas fa-sun';
                    themeText.textContent = 'Light Mode';
                }
                
                // Update charts for new theme
                updateChartsTheme();
            });
        }
        
        // Tabs functionality
        function initTabs() {
            const tabs = document.querySelectorAll('.tab');
            const tabContents = document.querySelectorAll('.tab-content');
            
            tabs.forEach(tab => {
                tab.addEventListener('click', () => {
                    // Remove active class from all tabs and contents
                    tabs.forEach(t => t.classList.remove('active'));
                    tabContents.forEach(c => c.classList.remove('active'));
                    
                    // Add active class to clicked tab
                    tab.classList.add('active');
                    
                    // Show corresponding content
                    const tabId = tab.getAttribute('data-tab');
                    document.getElementById(`${tabId}-tab`).classList.add('active');
                });
            });
        }
        
        // Chart instances
        let riskChart = null;
        let portfolioChart = null;
        let backtestChart = null;
        let autoScanInterval = null;
        
        // Initialize charts
        function initCharts() {
            initRiskChart();
            initPortfolioChart();
            initBacktestChart();
        }
        
        function initRiskChart() {
            const ctx = document.getElementById('risk-chart').getContext('2d');
            
            // Generate sample data for the risk chart
            const labels = Array.from({length: 20}, (_, i) => `Step ${i+1}`);
            const data = Array.from({length: 20}, () => Math.random() * 20 + 70);
            
            riskChart = new Chart(ctx, {
                type: 'line',
                data: {
                    labels: labels,
                    datasets: [{
                        label: 'Profit Probability',
                        data: data,
                        borderColor: getComputedStyle(document.documentElement).getPropertyValue('--success'),
                        backgroundColor: 'rgba(6, 214, 160, 0.1)',
                        borderWidth: 3,
                        fill: true,
                        tension: 0.4,
                        pointBackgroundColor: getComputedStyle(document.documentElement).getPropertyValue('--success'),
                        pointBorderColor: '#fff',
                        pointBorderWidth: 2,
                        pointRadius: 4
                    }]
                },
                options: {
                    responsive: true,
                    maintainAspectRatio: false,
                    plugins: {
                        legend: {
                            display: false
                        },
                        tooltip: {
                            backgroundColor: 'rgba(37, 42, 56, 0.9)',
                            titleColor: '#f8f9fa',
                            bodyColor: '#e9ecef',
                            borderColor: 'rgba(255, 255, 255, 0.1)',
                            borderWidth: 1,
                            callbacks: {
                                label: function(context) {
                                    return `Profit chance: ${context.parsed.y.toFixed(1)}%`;
                                }
                            }
                        }
                    },
                    scales: {
                        y: {
                            beginAtZero: false,
                            min: 50,
                            max: 100,
                            grid: {
                                color: 'rgba(108, 117, 125, 0.1)'
                            },
                            ticks: {
                                color: getComputedStyle(document.documentElement).getPropertyValue('--text-muted'),
                                callback: function(value) {
                                    return value + '%';
                                }
                            }
                        },
                        x: {
                            grid: {
                                display: false
                            },
                            ticks: {
                                color: getComputedStyle(document.documentElement).getPropertyValue('--text-muted')
                            }
                        }
                    }
                }
            });
        }
        
        function initPortfolioChart() {
            const ctx = document.getElementById('portfolio-chart').getContext('2d');
            
            // Generate sample data for portfolio chart
            const labels = ['Jun 9', 'Jun 10', 'Jun 11', 'Jun 12', 'Jun 13', 'Jun 14', 'Jun 15'];
            const data = [1200, 1350, 1420, 1550, 1620, 1740, 1842];
            
            portfolioChart = new Chart(ctx, {
                type: 'line',
                data: {
                    labels: labels,
                    datasets: [{
                        label: 'Portfolio Value',
                        data: data,
                        borderColor: getComputedStyle(document.documentElement).getPropertyValue('--primary'),
                        backgroundColor: 'rgba(58, 134, 255, 0.1)',
                        borderWidth: 3,
                        fill: true,
                        tension: 0.4,
                        pointBackgroundColor: getComputedStyle(document.documentElement).getPropertyValue('--primary'),
                        pointBorderColor: '#fff',
                        pointBorderWidth: 2,
                        pointRadius: 4
                    }]
                },
                options: {
                    responsive: true,
                    maintainAspectRatio: false,
                    plugins: {
                        legend: {
                            display: false
                        },
                        tooltip: {
                            backgroundColor: 'rgba(37, 42, 56, 0.9)',
                            titleColor: '#f8f9fa',
                            bodyColor: '#e9ecef',
                            borderColor: 'rgba(255, 255, 255, 0.1)',
                            borderWidth: 1,
                            callbacks: {
                                label: function(context) {
                                    return `$${context.parsed.y}`;
                                }
                            }
                        }
                    },
                    scales: {
                        y: {
                            beginAtZero: false,
                            grid: {
                                color: 'rgba(108, 117, 125, 0.1)'
                            },
                            ticks: {
                                color: getComputedStyle(document.documentElement).getPropertyValue('--text-muted'),
                                callback: function(value) {
                                    return '$' + value;
                                }
                            }
                        },
                        x: {
                            grid: {
                                display: false
                            },
                            ticks: {
                                color: getComputedStyle(document.documentElement).getPropertyValue('--text-muted')
                            }
                        }
                    }
                }
            });
        }
        
        function initBacktestChart() {
            const ctx = document.getElementById('backtest-chart').getContext('2d');
            
            // Generate sample data for backtest chart
            const labels = Array.from({length: 30}, (_, i) => `Day ${i+1}`);
            const data = Array.from({length: 30}, (_, i) => 5000 + (i * 5000 / 30) + (Math.random() * 200 - 100));
            
            backtestChart = new Chart(ctx, {
                type: 'line',
                data: {
                    labels: labels,
                    datasets: [{
                        label: 'Portfolio Value',
                        data: data,
                        borderColor: getComputedStyle(document.documentElement).getPropertyValue('--success'),
                        backgroundColor: 'rgba(6, 214, 160, 0.1)',
                        borderWidth: 3,
                        fill: true,
                        tension: 0.4,
                        pointBackgroundColor: getComputedStyle(document.documentElement).getPropertyValue('--success'),
                        pointBorderColor: '#fff',
                        pointBorderWidth: 2,
                        pointRadius: 3
                    }]
                },
                options: {
                    responsive: true,
                    maintainAspectRatio: false,
                    plugins: {
                        legend: {
                            display: false
                        },
                        tooltip: {
                            backgroundColor: 'rgba(37, 42, 56, 0.9)',
                            titleColor: '#f8f9fa',
                            bodyColor: '#e9ecef',
                            borderColor: 'rgba(255, 255, 255, 0.1)',
                            borderWidth: 1,
                            callbacks: {
                                label: function(context) {
                                    return `$${context.parsed.y.toFixed(2)}`;
                                }
                            }
                        }
                    },
                    scales: {
                        y: {
                            beginAtZero: false,
                            grid: {
                                color: 'rgba(108, 117, 125, 0.1)'
                            },
                            ticks: {
                                color: getComputedStyle(document.documentElement).getPropertyValue('--text-muted'),
                                callback: function(value) {
                                    return '$' + value.toLocaleString();
                                }
                            }
                        },
                        x: {
                            grid: {
                                display: false
                            },
                            ticks: {
                                color: getComputedStyle(document.documentElement).getPropertyValue('--text-muted')
                            }
                        }
                    }
                }
            });
        }
        
        function updateChartsTheme() {
            if (riskChart) riskChart.update();
            if (portfolioChart) portfolioChart.update();
            if (backtestChart) backtestChart.update();
        }
        
        function setupEventListeners() {
            document.getElementById('scan-btn').addEventListener('click', scanArbitrage);
            document.getElementById('export-csv').addEventListener('click', exportCSV);
            document.getElementById('run-simulation').addEventListener('click', runSimulation);
            document.getElementById('auto-scan').addEventListener('click', toggleAutoScan);
            document.getElementById('reset-btn').addEventListener('click', resetApplication);
            document.getElementById('scan-triangular').addEventListener('click', scanTriangularArbitrage);
            document.getElementById('scan-cross-chain').addEventListener('click', scanCrossChainArbitrage);
            document.getElementById('run-backtest').addEventListener('click', runBacktest);
        }
        
        // Exchange data cache
        const exchangeData = {
            'Binance': { price: 0, volume: 0, lastUpdated: 0 },
            'Coinbase': { price: 0, volume: 0, lastUpdated: 0 },
            'Kraken': { price: 0, volume: 0, lastUpdated: 0 },
            'KuCoin': { price: 0, volume: 0, lastUpdated: 0 }
        };
        
        // Fetch market data from exchanges (simulated)
        async function fetchMarketData() {
            const pair = document.getElementById('crypto-pair').value;
            
            // Show scanning status
            document.getElementById('scan-text').textContent = "Updating market data...";
            document.getElementById('scan-status').style.display = 'flex';
            
            try {
                // Simulate API calls with random data
                const exchanges = ['Binance', 'Coinbase', 'Kraken', 'KuCoin'];
                const basePrice = pair === 'BTC/USDT' ? 30500 : 
                                 pair === 'ETH/USDT' ? 1900 : 
                                 pair === 'SOL/USD' ? 25 : 1;
                
                exchanges.forEach(exchange => {
                    // Generate random price variations
                    const variation = (Math.random() * 0.02) - 0.01; // -1% to +1%
                    exchangeData[exchange].price = basePrice * (1 + variation);
                    exchangeData[exchange].volume = (10000000 + Math.random() * 50000000).toFixed(0);
                    exchangeData[exchange].lastUpdated = Date.now();
                });
                
                updateStatus(true);
                document.getElementById('scan-text').textContent = "Market data updated";
                setTimeout(() => {
                    document.getElementById('scan-status').style.display = 'none';
                }, 2000);
            } catch (error) {
                console.error('Error fetching market data:', error);
                updateStatus(false, 'Error fetching data. Retrying...');
                document.getElementById('scan-text').textContent = "Data update failed";
                setTimeout(() => {
                    document.getElementById('scan-status').style.display = 'none';
                }, 2000);
            }
        }
        
        function updateStatus(connected, message = '') {
            const statusDot = document.getElementById('status-dot');
            const statusText = document.getElementById('status-text');
            
            if (connected) {
                statusDot.className = 'status-dot';
                statusText.textContent = message || 'Connected to live market data';
                statusText.style.color = '';
            } else {
                statusDot.className = 'status-dot offline';
                statusText.textContent = message || 'Offline. Using cached data.';
                statusText.style.color = '';
            }
        }
        
        async function scanArbitrage() {
            const pair = document.getElementById('crypto-pair').value;
            const feePercentage = parseFloat(document.getElementById('fee-percentage').value) || 0.1;
            const transferFee = parseFloat(document.getElementById('transfer-fee').value) || 0.05;
            const minProfit = parseFloat(document.getElementById('min-profit').value) || 0.5;
            
            // Show scanning status
            document.getElementById('scan-text').textContent = "Scanning exchanges...";
            document.getElementById('scan-status').style.display = 'flex';
            
            await fetchMarketData();
            
            // Filter out exchanges without data
            const activeExchanges = Object.entries(exchangeData)
                .filter(([_, data]) => data.price > 0)
                .map(([name, data]) => ({ 
                    name, 
                    price: data.price, 
                    volume: data.volume 
                }));
            
            if (activeExchanges.length < 2) {
                showNotification("Not enough exchange data available. Try again later.", "warning");
                document.getElementById('scan-text').textContent = "Scan failed - not enough data";
                setTimeout(() => {
                    document.getElementById('scan-status').style.display = 'none';
                }, 2000);
                return;
            }
            
            // Sort by price (lowest to highest)
            activeExchanges.sort((a, b) => a.price - b.price);
            
            // Calculate spread and profit
            const lowest = activeExchanges[0];
            const highest = activeExchanges[activeExchanges.length - 1];
            
            // Spread = (highest price - lowest price) / lowest price
            const spread = ((highest.price - lowest.price) / lowest.price) * 100;
            
            // Profit = spread - (2 * feePercentage) - transferFee
            const profit = spread - (2 * feePercentage) - transferFee;
            
            // Update the table
            renderExchangeTable(activeExchanges, feePercentage, transferFee);
            
            // Update opportunity card
            document.getElementById('buy-exchange').textContent = `${lowest.name}: $${lowest.price.toFixed(2)}`;
            document.getElementById('sell-exchange').textContent = `${highest.name}: $${highest.price.toFixed(2)}`;
            document.getElementById('spread-value').textContent = `${spread.toFixed(2)}%`;
            document.getElementById('profit-value').textContent = `${profit.toFixed(2)}%`;
            
            // Calculate time window based on profit and volatility
            const timeWindow = profit > 1.5 ? "1-2 min" : profit > 0.8 ? "2-4 min" : "4-8 min";
            document.getElementById('time-window').textContent = timeWindow;
            
            // Calculate success probability
            const successProb = Math.min(95, Math.max(60, profit * 25));
            document.getElementById('arb-success').textContent = `${successProb.toFixed(0)}%`;
            
            // Show notification if significant opportunity
            if (profit > minProfit) {
                showNotification(`Arbitrage opportunity: ${profit.toFixed(2)}% profit on ${pair}`);
                
                // Browser notification
                if (Notification.permission === 'granted') {
                    new Notification('AlphaArb Opportunity', {
                        body: `${profit.toFixed(2)}% profit on ${pair}\nBuy on ${lowest.name} at $${lowest.price.toFixed(2)}\nSell on ${highest.name} at $${highest.price.toFixed(2)}`,
                        icon: 'data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHZpZXdCb3g9IjAgMCAyNCAyNCIgZmlsbD0iIzNhODZmZiI+PHBhdGggZD0iTTEzLjc4OCw1LjQ4NEMxNC40NDUsNC44MjcgMTUuNTU1LDQuODI3IDE2LjIxMiw1LjQ4NGw1LjMwNyw1LjMwN2MxLjMxLDEuMzEgMS4zMSwzLjQzNiAwLDQuNzQ2bC01LjMwNyw1LjMwN2MtMC42NTcsMC42NTctMS43NjcsMC42NTctMi40MjQsMEwxMy43ODgsMTUuNUg1Yy0xLjEwMywwLTItMC44OTctMi0ydi0zYzAtMS4xMDMsMC44OTctMiwyLTJoOC43ODhMMTMuNzg4LDUuNDg0eiIvPjwvc3ZnPg=='
                    });
                }
            }
            
            // Update risk simulation based on this opportunity
            updateRiskSimulation(profit);
            
            // Update scan status
            document.getElementById('scan-text').textContent = "Scan completed!";
            setTimeout(() => {
                document.getElementById('scan-status').style.display = 'none';
            }, 2000);
        }
        
        function renderExchangeTable(exchanges, feePercentage, transferFee) {
            const tableBody = document.getElementById('exchange-data');
            tableBody.innerHTML = '';
            
            const lowestPrice = exchanges[0].price;
            
            exchanges.forEach(exchange => {
                const row = document.createElement('tr');
                
                // Calculate spread relative to lowest price
                const spread = ((exchange.price - lowestPrice) / lowestPrice) * 100;
                
                // Calculate profit (spread - 2*fees - transfer cost)
                const profit = spread - (2 * feePercentage) - transferFee;
                
                // Determine profit/loss class
                const profitClass = profit > 0.5 ? 'profit' : (profit > 0 ? '' : 'loss');
                
                // Format volume
                const volume = exchange.volume > 1000000 
                    ? `$${(exchange.volume / 1000000).toFixed(2)}M` 
                    : `$${(exchange.volume / 1000).toFixed(1)}K`;
                
                row.innerHTML = `
                    <td>${exchange.name}</td>
                    <td>$${exchange.price.toFixed(2)}</td>
                    <td>${spread.toFixed(2)}%</td>
                    <td class="${profitClass}">${profit.toFixed(2)}%</td>
                    <td>${volume}</td>
                    <td>
                        <button class="btn btn-outline" style="padding: 5px 10px; font-size: 0.8rem;">
                            <i class="fas fa-external-link-alt"></i> Trade
                        </button>
                    </td>
                `;
                
                tableBody.appendChild(row);
            });
        }
        
        function updateRiskSimulation(profit) {
            // Get additional parameters
            const tradeAmount = parseFloat(document.getElementById('trade-amount').value) || 1000;
            const riskFactor = document.getElementById('risk-factor').value;
            
            // Generate simulation data based on profit value and risk factor
            const data = [];
            let volatility;
            
            switch(riskFactor) {
                case 'low':
                    volatility = 0.05 + (Math.random() * 0.05);
                    break;
                case 'high':
                    volatility = 0.2 + (Math.random() * 0.3);
                    break;
                default:
                    volatility = 0.1 + (Math.random() * 0.15);
            }
            
            for (let i = 0; i < 20; i++) {
                // Simulate decreasing probability over time
                const probability = Math.max(0, profit * 15 - i * (volatility * 3));
                data.push(probability);
            }
            
            // Update chart
            riskChart.data.datasets[0].data = data;
            riskChart.update();
            
            // Calculate metrics
            const successProb = Math.min(95, Math.max(5, profit * 20));
            const avgProfit = Math.max(0.1, profit * 0.9);
            const maxDrawdown = Math.min(0, -(profit * 0.25));
            const estProfit = (tradeAmount * avgProfit / 100).toFixed(2);
            const vol = (volatility * 100).toFixed(2);
            const riskScore = (8 - volatility * 20).toFixed(1);
            
            // Update UI
            document.getElementById('success-prob').textContent = `${successProb.toFixed(0)}%`;
            document.getElementById('avg-profit').textContent = `${avgProfit.toFixed(2)}%`;
            document.getElementById('max-drawdown').textContent = `${maxDrawdown.toFixed(2)}%`;
            document.getElementById('volatility').textContent = `${vol}%`;
            document.getElementById('est-profit').textContent = `$${estProfit}`;
            document.getElementById('risk-score').textContent = `${riskScore}/10`;
            
            // Update risk badge
            const riskBadge = document.getElementById('risk-badge');
            if (successProb > 75) {
                riskBadge.className = 'opportunity-badge badge-success';
                riskBadge.textContent = 'LOW RISK';
            } else if (successProb > 50) {
                riskBadge.className = 'opportunity-badge badge-warning';
                riskBadge.textContent = 'MODERATE';
            } else {
                riskBadge.className = 'opportunity-badge';
                riskBadge.style.background = 'rgba(239, 71, 111, 0.2)';
                riskBadge.style.color = '#ef476f';
                riskBadge.textContent = 'HIGH RISK';
            }
        }
        
        function scanTriangularArbitrage() {
            showNotification("Scanning for triangular arbitrage opportunities...");
            
            // Simulate API call delay
            setTimeout(() => {
                showNotification("Found 2 triangular arbitrage opportunities!");
            }, 1500);
        }
        
        function scanCrossChainArbitrage() {
            showNotification("Scanning for cross-chain arbitrage opportunities...");
            
            // Simulate API call delay
            setTimeout(() => {
                showNotification("Found 3 cross-chain arbitrage opportunities!");
            }, 1500);
        }
        
        function runSimulation() {
            const btn = document.getElementById('run-simulation');
            const originalText = btn.innerHTML;
            btn.innerHTML = '<i class="fas fa-spinner fa-spin"></i> Simulating...';
            btn.disabled = true;
            
            setTimeout(() => {
                const profitValue = parseFloat(document.getElementById('profit-value').textContent) || 0.5;
                updateRiskSimulation(profitValue);
                
                btn.innerHTML = originalText;
                btn.disabled = false;
                
                showNotification("Risk simulation completed successfully");
            }, 1500);
        }
        
        function runBacktest() {
            const btn = document.getElementById('run-backtest');
            const originalText = btn.innerHTML;
            btn.innerHTML = '<i class="fas fa-spinner fa-spin"></i> Backtesting...';
            btn.disabled = true;
            
            setTimeout(() => {
                // Generate new backtest data
                const labels = Array.from({length: 30}, (_, i) => `Day ${i+1}`);
                const data = Array.from({length: 30}, (_, i) => {
                    const initial = 5000;
                    const growth = (i * 5000 / 30);
                    const noise = (Math.random() * 400 - 200);
                    return initial + growth + noise;
                });
                
                backtestChart.data.labels = labels;
                backtestChart.data.datasets[0].data = data;
                backtestChart.update();
                
                btn.innerHTML = originalText;
                btn.disabled = false;
                
                showNotification("Backtest completed successfully");
            }, 2000);
        }
        
        function showNotification(message, type = "success") {
            const notification = document.getElementById('notification');
            const notificationText = document.getElementById('notification-text');
            
            notificationText.textContent = message;
            notification.className = `notification show ${type}`;
            
            setTimeout(() => {
                notification.className = "notification";
            }, 5000);
        }
        
        function exportCSV() {
            const pair = document.getElementById('crypto-pair').value;
            const now = new Date();
            const timestamp = now.toISOString().replace(/[:.]/g, '-');
            const filename = `alphaarb-${pair}-${timestamp}.csv`;
            
            // Create CSV content
            let csvContent = "Exchange,Price,Spread,Profit,Volume\n";
            const rows = document.querySelectorAll('#exchange-data tr');
            
            rows.forEach(row => {
                const cells = row.querySelectorAll('td');
                if (cells.length >= 5) {
                    const exchange = cells[0].textContent;
                    const price = cells[1].textContent.replace('$', '');
                    const spread = cells[2].textContent.replace('%', '');
                    const profit = cells[3].textContent.replace('%', '');
                    const volume = cells[4].textContent;
                    csvContent += `"${exchange}",${price},${spread},${profit},"${volume}"\n`;
                }
            });
            
            // Create download link
            const blob = new Blob([csvContent], { type: 'text/csv;charset=utf-8;' });
            const link = document.createElement('a');
            const url = URL.createObjectURL(blob);
            link.setAttribute('href', url);
            link.setAttribute('download', filename);
            link.style.visibility = 'hidden';
            document.body.appendChild(link);
            link.click();
            document.body.removeChild(link);
            
            showNotification(`CSV exported: ${filename}`);
        }
        
        function toggleAutoScan() {
            const autoScanBtn = document.getElementById('auto-scan');
            
            if (autoScanInterval) {
                clearInterval(autoScanInterval);
                autoScanInterval = null;
                autoScanBtn.innerHTML = '<i class="fas fa-play"></i> Auto Scan';
                autoScanBtn.classList.remove('btn-outline');
                autoScanBtn.classList.add('btn-success');
                showNotification("Auto scan disabled");
            } else {
                autoScanInterval = setInterval(() => {
                    scanArbitrage();
                }, 30000);
                autoScanBtn.innerHTML = '<i class="fas fa-stop"></i> Stop Scan';
                autoScanBtn.classList.remove('btn-success');
                autoScanBtn.classList.add('btn-outline');
                showNotification("Auto scan enabled - scanning every 30 seconds");
                scanArbitrage(); // Run immediately
            }
        }
        
        // Reset application to initial state
        function resetApplication() {
            // Stop auto-scan if running
            if (autoScanInterval) {
                clearInterval(autoScanInterval);
                autoScanInterval = null;
                document.getElementById('auto-scan').innerHTML = '<i class="fas fa-play"></i> Auto Scan';
                document.getElementById('auto-scan').classList.remove('btn-outline');
                document.getElementById('auto-scan').classList.add('btn-success');
            }
            
            // Reset table and opportunity data
            document.getElementById('exchange-data').innerHTML = `
                <tr>
                    <td colspan="6" style="text-align: center; padding: 30px;">
                        <i class="fas fa-search" style="font-size: 2rem; margin-bottom: 15px; color: var(--text-muted);"></i>
                        <p>Click "Scan Arbitrage" to find opportunities</p>
                    </td>
                </tr>
            `;
            
            document.getElementById('buy-exchange').textContent = '-';
            document.getElementById('sell-exchange').textContent = '-';
            document.getElementById('spread-value').textContent = '0.00%';
            document.getElementById('profit-value').textContent = '0.00%';
            
            // Reset status indicator
            updateStatus(true, 'Connected to live market data');
            
            // Show reset notification
            showNotification("Application has been reset to initial state");
        }
    </script>
</body>
</html>